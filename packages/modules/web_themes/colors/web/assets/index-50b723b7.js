var Ca=Object.defineProperty;var Ia=(t,e,a)=>e in t?Ca(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var p=(t,e,a)=>(Ia(t,typeof e!="symbol"?e+"":e,a),a);import{m as Qt,r as J,a as le,c as f,s as fe,d as I,p as Yt,b as Zt,w as Ba,o as i,e as h,t as k,f as n,n as z,g as B,h as w,i as ae,j as b,k as j,u as d,l as m,F as W,q,v as Ve,x as mt,y as Xt,z as ft,A as Mt,B as ot,C as Ee,D as Et,E as Va,G as st,H as Ta,I as R,J as La,K as ze,L as K,M as ee,N as Oa,O as Oe,P as Kt,Q as _t,R as Aa,S as Da,T as Qe,U as Wa,V as Ea,W as Ga,X as ja}from"./vendor-73164592.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const Ua=0,ea={host:location.hostname,port:location.protocol=="https:"?443:80,endpoint:"/ws",protocol:location.protocol=="https:"?"wss":"ws",connectTimeout:4e3,reconnectPeriod:4e3,clientId:Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,6)},rt={topic:"",qos:Ua};let Se;const{host:za,port:Na,endpoint:Fa,...ta}=ea,qa=`${ta.protocol}://${za}:${Na}${Fa}`;try{Se=Qt.connect(qa,ta),Se.on("connect",()=>{console.info("MQTT connection successful")}),Se.on("error",t=>{console.error("MQTT connection failed: ",t)})}catch(t){console.error("MQTT connect error: ",t)}function Ra(t){Se?Se.on("message",t):console.error("MqttRegister: MQTT client not available")}function Ce(t){rt.topic=t;const{topic:e,qos:a}=rt;Se.subscribe(e,{qos:a},s=>{if(s){console.error("MQTT Subscription error: "+s);return}})}function Ge(t){rt.topic=t;const{topic:e}=rt;Se.unsubscribe(e,a=>{if(a){console.error("MQTT Unsubscribe from "+t+" failed: "+a);return}})}function lt(t,e){Se.publish(t,e,{qos:0},s=>{s&&console.warn("MQTT publish error: ",s),console.info("Message sent: ["+t+"]("+e+")")})}function Ha(){return ea.clientId}class Ja{constructor(e){p(this,"id");p(this,"name","Ladepunkt");p(this,"icon","Ladepunkt");p(this,"type","");p(this,"ev",0);p(this,"template",0);p(this,"connectedPhases",0);p(this,"phase_1",0);p(this,"autoPhaseSwitchHw",!1);p(this,"controlPilotInterruptionHw",!1);p(this,"isEnabled",!0);p(this,"isPluggedIn",!1);p(this,"isCharging",!1);p(this,"_isLocked",!1);p(this,"_connectedVehicle",0);p(this,"chargeTemplate",0);p(this,"evTemplate",0);p(this,"_chargeMode","pv_charging");p(this,"_hasPriority",!1);p(this,"currentPlan","");p(this,"averageConsumption",0);p(this,"vehicleName","");p(this,"rangeCharged",0);p(this,"rangeUnit","");p(this,"counter",0);p(this,"dailyYield",0);p(this,"energyPv",0);p(this,"energyBat",0);p(this,"pvPercentage",0);p(this,"faultState",0);p(this,"faultStr","");p(this,"phasesInUse",0);p(this,"power",0);p(this,"chargedSincePlugged",0);p(this,"stateStr","");p(this,"current",0);p(this,"phasesToUse",0);p(this,"soc",0);p(this,"isSocConfigured",!0);p(this,"isSocManual",!1);p(this,"color","white");p(this,"_scheduledCharging",!1);p(this,"_instantChargeLimitMode","");p(this,"_instantTargetCurrent",0);p(this,"_instantTargetSoc",0);p(this,"_instantMaxEnergy",0);p(this,"_pvFeedInLimit",!1);p(this,"_pvMinCurrent",0);p(this,"_pvMaxSoc",0);p(this,"_pvMinSoc",0);p(this,"_pvMinSocCurrent",0);this.id=e}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked=e,Z("cpLock",e,this.id)}updateIsLocked(e){this._isLocked=e}get connectedVehicle(){return this._connectedVehicle}set connectedVehicle(e){this._connectedVehicle=e,Z("cpVehicle",e,this.id)}updateConnectedVehicle(e){this._connectedVehicle=e}get chargeMode(){return this._chargeMode}set chargeMode(e){this._chargeMode=e,Z("chargeMode",e,this.id)}updateChargeMode(e){this._chargeMode=e}get hasPriority(){return this._hasPriority}set hasPriority(e){this._hasPriority=e,Z("cpPriority",e,this.id)}updateCpPriority(e){this._hasPriority=e}get scheduledCharging(){return this._scheduledCharging}set scheduledCharging(e){this._scheduledCharging=e,Z("cpScheduledCharging",e,this.id)}updateScheduledCharging(e){this._scheduledCharging=e}get instantTargetCurrent(){return this._instantTargetCurrent}set instantTargetCurrent(e){this._instantTargetCurrent=e,Z("cpInstantTargetCurrent",e,this.id)}updateInstantTargetCurrent(e){this._instantTargetCurrent=e}get instantChargeLimitMode(){return this._instantChargeLimitMode}set instantChargeLimitMode(e){this._instantChargeLimitMode=e,Z("cpInstantChargeLimitMode",e,this.id)}updateInstantChargeLimitMode(e){this._instantChargeLimitMode=e}get instantTargetSoc(){return this._instantTargetSoc}set instantTargetSoc(e){this._instantTargetSoc=e,Z("cpInstantTargetSoc",e,this.id)}updateInstantTargetSoc(e){this._instantTargetSoc=e}get instantMaxEnergy(){return this._instantMaxEnergy}set instantMaxEnergy(e){this._instantMaxEnergy=e,Z("cpInstantMaxEnergy",e,this.id)}updateInstantMaxEnergy(e){this._instantMaxEnergy=e}get pvFeedInLimit(){return this._pvFeedInLimit}set pvFeedInLimit(e){this._pvFeedInLimit=e,Z("cpPvFeedInLimit",e,this.id)}updatePvFeedInLimit(e){this._pvFeedInLimit=e}get pvMinCurrent(){return this._pvMinCurrent}set pvMinCurrent(e){this._pvMinCurrent=e,Z("cpPvMinCurrent",e,this.id)}updatePvMinCurrent(e){this._pvMinCurrent=e}get pvMaxSoc(){return this._pvMaxSoc}set pvMaxSoc(e){this._pvMaxSoc=e,Z("cpPvMaxSoc",e,this.id)}updatePvMaxSoc(e){this._pvMaxSoc=e}get pvMinSoc(){return this._pvMinSoc}set pvMinSoc(e){this._pvMinSoc=e,Z("cpPvMinSoc",e,this.id)}updatePvMinSoc(e){this._pvMinSoc=e}get pvMinSocCurrent(){return this._pvMinSocCurrent}set pvMinSocCurrent(e){this._pvMinSocCurrent=e,Z("cpPvMinSocCurrent",e,this.id)}updatePvMinSocCurrent(e){this._pvMinSocCurrent=e}toPowerItem(){return{name:this.name,power:this.power,energy:this.dailyYield,energyPv:this.energyPv,energyBat:this.energyBat,pvPercentage:this.pvPercentage,color:this.color,icon:this.icon}}}class Qa{constructor(e){p(this,"id");p(this,"name","");p(this,"_chargeTemplateId",0);p(this,"_evTemplateId",0);p(this,"tags",[]);p(this,"soc",0);p(this,"range",0);this.id=e}get chargeTemplateId(){return this._chargeTemplateId}set chargeTemplateId(e){this._chargeTemplateId=e,Z("vhChargeTemplateId",e,this.id)}updateChargeTemplateId(e){this._chargeTemplateId=e}get evTemplateId(){return this._evTemplateId}set evTemplateId(e){this._evTemplateId=e,Z("vhEvTemplateId",e,this.id)}updateEvTemplateId(e){this._evTemplateId=e}}var ce=(t=>(t.instant_charging="instant_charging",t.pv_charging="pv_charging",t.scheduled_charging="scheduled_charging",t.standby="standby",t.stop="stop",t))(ce||{});function aa(){return{frequency:{once:[new Date("2022-02-02"),new Date("2022-02-22")],selected:"daily",weekly:[!1,!1,!1,!1,!1,!1,!1]},name:"Neuer Plan",time:["10:00","16:00"],current:16}}function na(){return{name:"Neuer Plan",timed:!1,time:"12:00",soc:80,frequency:{once:[new Date("2022-02-02"),new Date("2022-02-22")],selected:"daily",weekly:[!1,!1,!1,!1,!1,!1,!1]}}}const T=J({}),X=J({}),ue=J({}),xt=J({});function Ya(t){t in T||(T[t]=new Ja(t),T[t].color="var(--color-cp"+Object.values(T).length+")")}function Za(){Object.keys(T).forEach(t=>{delete T[parseInt(t)]})}const Xa={cpLock:"openWB/set/chargepoint/%/set/manual_lock",chargeMode:"openWB/set/vehicle/template/charge_template/%/chargemode/selected",cpPriority:"openWB/set/vehicle/template/charge_template/%/prio",cpScheduledCharging:"openWB/set/vehicle/template/charge_template/%/time_charging/active",pvBatteryPriority:"openWB/set/general/chargemode_config/pv_charging/bat_prio",chargeTemplate:"openWB/set/vehicle/template/charge_template/%",cpVehicle:"openWB/set/chargepoint/%/config/ev",cpInstantChargeLimitMode:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/limit/selected",cpInstantTargetCurrent:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/current",cpInstantTargetSoc:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/limit/soc",cpInstantMaxEnergy:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/limit/amount",cpPvFeedInLimit:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/feed_in_limit",cpPvMinCurrent:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/min_current",cpPvMaxSoc:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/max_soc",cpPvMinSoc:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/min_soc",cpPvMinSocCurrent:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/min_soc_current",etMaxPrice:"openWB/set/optional/et/max_price",vhChargeTemplateId:"openWB/set/vehicle/%/charge_template",vhEvTemplateId:"openWB/set/vehicle/%/ev_template",shSetManual:"openWB/set/LegacySmartHome/config/set/Devices/%/mode",shSwitchOn:"openWB/set/LegacySmartHome/config/set/Devices/%/device_manual_control"};function Z(t,e,a=0){if(isNaN(a)){console.warn("Invalid index");return}let s=Xa[t];if(!s){console.warn("No topic for update type "+t);return}switch(t){case"chargeMode":case"cpPriority":case"cpScheduledCharging":case"cpInstantTargetCurrent":case"cpInstantChargeLimitMode":case"cpInstantTargetSoc":case"cpInstantMaxEnergy":case"cpPvFeedInLimit":case"cpPvMinCurrent":case"cpPvMaxSoc":case"cpPvMinSoc":case"cpPvMinSocCurrent":s=s.replace("%",T[a].chargeTemplate.toString());break;default:s=s.replace("%",String(a))}switch(typeof e){case"number":lt(s,JSON.stringify(+e));break;default:lt(s,JSON.stringify(e))}}function oa(t){const e=ue[t];if(e){const a="openWB/set/vehicle/template/charge_template/"+t;lt(a,JSON.stringify(e))}}function Ct(t){lt("openWB/set/command/"+Ha()+"/todo",JSON.stringify(t))}let Ka=class{constructor(e){p(this,"id");p(this,"name","");p(this,"power",0);p(this,"energy",0);p(this,"energyPv",0);p(this,"energyBat",0);p(this,"pvPercentage",0);p(this,"configured",!0);p(this,"showInGraph",!0);p(this,"color","white");p(this,"icon","");p(this,"countAsHouse",!1);this.id=e}};class en{constructor(){p(this,"batterySoc",0);p(this,"isBatteryConfigured",!0);p(this,"chargeMode","0");p(this,"_pvBatteryPriority",!1);p(this,"displayLiveGraph",!0);p(this,"isEtEnabled",!0);p(this,"etMaxPrice",0);p(this,"etCurrentPrice",0);p(this,"cpDailyExported",0);p(this,"evuId",0);p(this,"etProvider","")}get pvBatteryPriority(){return this._pvBatteryPriority}set pvBatteryPriority(e){this._pvBatteryPriority=e,Z("pvBatteryPriority",e)}updatePvBatteryPriority(e){this._pvBatteryPriority=e}}const je=J({evuIn:{name:"Netz",color:"var(--color-evu)",icon:""},pv:{name:"PV",color:"var(--color-pv",icon:""},batOut:{name:"Bat >",color:"var(--color-battery)",icon:""},evuOut:{name:"Export",color:"var(--color-export)",icon:""},charging:{name:"Laden",color:"var(--color-charging)",icon:""},devices:{name:"Geräte",color:"var(--color-devices)",icon:""},batIn:{name:"> Bat",color:"var(--color-battery)",icon:""},house:{name:"Haus",color:"var(--color-house)",icon:""}}),$=J({evuIn:ie("evuIn"),pv:ie("pv"),batOut:ie("batOut"),evuOut:ie("evuOut"),charging:ie("charging"),devices:ie("devices"),batIn:ie("batIn"),house:ie("house")}),N=J({evuIn:ie("evuIn"),pv:ie("pv"),batOut:ie("batOut")}),A=J({evuOut:ie("evuOut"),charging:ie("charging"),devices:ie("devices"),batIn:ie("batIn"),house:ie("house")}),Ye=J([]),re=J(new en);le("");Array.from({length:9},(t,e)=>Ye[e]=new Ka(e));Object.values(Ye).forEach(t=>{t.color="var(--color-sh"+(t.id+1)+")"});function ie(t){return{name:je[t].name,power:0,energy:0,energyPv:0,energyBat:0,pvPercentage:0,color:je[t].color,icon:je[t].icon}}class tn{constructor(){p(this,"etPriceList","");p(this,"_etMaxPrice",20);p(this,"etCurrentPrice",0);p(this,"isEtEnabled",!1);p(this,"etProvider","")}get etMaxPrice(){return this._etMaxPrice}set etMaxPrice(e){this._etMaxPrice=e,Z("etMaxPrice",e)}updateEtMaxPrice(e){this._etMaxPrice=e}}const We=J(new tn);class an{constructor(e){p(this,"id");p(this,"name","Gerät");p(this,"power",0);p(this,"status","off");p(this,"energy",0);p(this,"runningTime",0);p(this,"configured",!1);p(this,"_showInGraph",!0);p(this,"color","white");p(this,"canSwitch",!1);p(this,"countAsHouse",!1);p(this,"energyPv",0);p(this,"energyBat",0);p(this,"pvPercentage",0);p(this,"tempConfigured",0);p(this,"temp",[300,300,300]);p(this,"on",!1);p(this,"isAutomatic",!0);p(this,"icon","");this.id=e}get showInGraph(){return this._showInGraph}set showInGraph(e){this._showInGraph=e,he()}}const F=J({});function It(t){t in F?console.info("Duplicate sh device message: "+t):(F[t]=new an(t),F[t].color="var(--color-sh"+Object.values(F).length+")")}class nn{constructor(){p(this,"_showRelativeArcs",!1);p(this,"showTodayGraph",!0);p(this,"_graphPreference","today");p(this,"_usageStackOrder",0);p(this,"_displayMode","dark");p(this,"_showGrid",!1);p(this,"_smartHomeColors","normal");p(this,"_decimalPlaces",1);p(this,"_showQuickAccess",!0);p(this,"_simpleCpList",!1);p(this,"_showAnimations",!0);p(this,"_preferWideBoxes",!1);p(this,"_maxPower",4e3);p(this,"isEtEnabled",!1);p(this,"etPrice",20.5);p(this,"showRightButton",!0);p(this,"showLeftButton",!0);p(this,"animationDuration",300);p(this,"animationDelay",100)}get showRelativeArcs(){return this._showRelativeArcs}set showRelativeArcs(e){this._showRelativeArcs=e,he()}setShowRelativeArcs(e){this._showRelativeArcs=e}get graphPreference(){return this._graphPreference}set graphPreference(e){this._graphPreference=e,he()}setGraphPreference(e){this._graphPreference=e}get usageStackOrder(){return this._usageStackOrder}set usageStackOrder(e){this._usageStackOrder=e,he()}setUsageStackOrder(e){this._usageStackOrder=e}get displayMode(){return this._displayMode}set displayMode(e){this._displayMode=e,rn(e)}setDisplayMode(e){this._displayMode=e}get showGrid(){return this._showGrid}set showGrid(e){this._showGrid=e,he()}setShowGrid(e){this._showGrid=e}get decimalPlaces(){return this._decimalPlaces}set decimalPlaces(e){this._decimalPlaces=e,he()}setDecimalPlaces(e){this._decimalPlaces=e}get smartHomeColors(){return this._smartHomeColors}set smartHomeColors(e){this._smartHomeColors=e,Gt(e),he()}setSmartHomeColors(e){this._smartHomeColors=e,Gt(e)}get showQuickAccess(){return this._showQuickAccess}set showQuickAccess(e){this._showQuickAccess=e,he()}setShowQuickAccess(e){this._showQuickAccess=e}get simpleCpList(){return this._simpleCpList}set simpleCpList(e){this._simpleCpList=e,he()}setSimpleCpList(e){this._simpleCpList=e}get showAnimations(){return this._showAnimations}set showAnimations(e){this._showAnimations=e,he()}setShowAnimations(e){this._showAnimations=e}get preferWideBoxes(){return this._preferWideBoxes}set preferWideBoxes(e){this._preferWideBoxes=e,he()}setPreferWideBoxes(e){this._preferWideBoxes=e}get maxPower(){return this._maxPower}set maxPower(e){this._maxPower=e,he()}setMaxPower(e){this._maxPower=e}}const _=J(new nn);function sa(){cn();const t=fe("html");t.classed("theme-dark",_.displayMode=="dark"),t.classed("theme-light",_.displayMode=="light"),t.classed("theme-blue",_.displayMode=="blue"),t.classed("shcolors-standard",_.smartHomeColors=="standard"),t.classed("shcolors-advanced",_.smartHomeColors=="advanced"),t.classed("shcolors-normal",_.smartHomeColors=="normal")}const on=992,it=J({x:document.documentElement.clientWidth,y:document.documentElement.clientHeight});function sn(){it.x=document.documentElement.clientWidth,it.y=document.documentElement.clientHeight,sa()}const Ie=f(()=>it.x>=on),se={stop:{mode:ce.stop,name:"Stop",color:"var(--color-fg)",icon:"fa-power-off"},standby:{mode:ce.standby,name:"Standby",color:"var(--color-axis",icon:"fa-pause"},pv_charging:{mode:ce.pv_charging,name:"PV",color:"var(--color-pv",icon:"fa-solar-panel"},scheduled_charging:{mode:ce.scheduled_charging,name:"Zielladen",color:"var(--color-battery)",icon:"fa-bullseye"},instant_charging:{mode:ce.instant_charging,name:"Sofort",color:"var(--color-charging)",icon:"fa-bolt"}};function he(){ln()}function rn(t){const e=fe("html");e.classed("theme-dark",t=="dark"),e.classed("theme-light",t=="light"),e.classed("theme-blue",t=="blue"),he()}function Gt(t){const e=fe("html");e.classed("shcolors-normal",t=="normal"),e.classed("shcolors-standard",t=="standard"),e.classed("shcolors-advanced",t=="advanced")}const $e={chargemode:"Der Lademodus für diesen Ladepunkt",vehicle:"Das Fahrzeug, das an diesem Ladepounkt geladen wird",locked:"Diesen Ladepunkt sperren",priority:"Diesen Ladepunkt auf hohe Priorität setzen",timeplan:"An diesem Ladepunkt nach dem konfigurierten Zeitplan laden",minsoc:"Immer mindestens bis zum eingestellten Ladestand laden. Wenn notwendig mit Netzstrom.",minpv:"Durchgehend mit mindestens dem eingestellten Strom laden. Wenn notwendig mit Netzstrom."};function ln(){const t={};t.hideSH=Object.values(F).filter(e=>!e.showInGraph).map(e=>e.id),t.showLG=_.graphPreference=="live",t.displayM=_.displayMode,t.stackO=_.usageStackOrder,t.showGr=_.showGrid,t.decimalP=_.decimalPlaces,t.smartHomeC=_.smartHomeColors,t.relPM=_.showRelativeArcs,t.maxPow=_.maxPower,t.showQA=_.showQuickAccess,t.simpleCP=_.simpleCpList,t.animation=_.showAnimations,t.wideB=_.preferWideBoxes,document.cookie="openWBColorTheme="+JSON.stringify(t)+"; max-age=16000000"}function cn(){const e=document.cookie.split(";").filter(a=>a.split("=")[0]==="openWBColorTheme");if(e.length>0){const a=JSON.parse(e[0].split("=")[1]);a.decimalP!==void 0&&_.setDecimalPlaces(+a.decimalP),a.smartHomeC!==void 0&&_.setSmartHomeColors(a.smartHomeC),a.hideSH!==void 0&&a.hideSH.map(s=>{F[s]==null&&It(s),F[s].showInGraph=!1}),a.showLG!==void 0&&_.setGraphPreference(a.showLG?"live":"today"),a.maxPow!==void 0&&_.setMaxPower(+a.maxPow),a.relPM!==void 0&&_.setShowRelativeArcs(a.relPM),a.displayM!==void 0&&_.setDisplayMode(a.displayM),a.stackO!==void 0&&_.setUsageStackOrder(a.stackO),a.showGr!==void 0&&_.setShowGrid(a.showGr),a.showQA!==void 0&&_.setShowQuickAccess(a.showQA),a.simpleCP!==void 0&&_.setSimpleCpList(a.simpleCP),a.animation!=null&&_.setShowAnimations(a.animation),a.wideB!=null&&_.setPreferWideBoxes(a.wideB)}}const dn=["origin"],un=I({__name:"PMSourceArc",props:{radius:{},cornerRadius:{},circleGapSize:{},emptyPower:{}},setup(t){const e=t,a=f(()=>{const s=Object.values(N).length;let o={name:"",power:e.emptyPower,energy:0,energyPv:0,energyBat:0,pvPercentage:0,color:"var(--color-bg)",icon:""},r=N;r["zz-empty"]=o;const l=Yt().value(g=>g.power).startAngle(-Math.PI/2+e.circleGapSize).endAngle(Math.PI/2-e.circleGapSize).sort(null),c=Zt().innerRadius(e.radius/6*5).outerRadius(e.radius).cornerRadius(e.cornerRadius).padAngle(0),u=fe("g#pmSourceArc");return u.selectAll("*").remove(),u.selectAll("sources").data(l(Object.values(r))).enter().append("path").attr("d",c).attr("fill",g=>g.data.color).attr("stroke",(g,y)=>y==s?g.data.power>0?"var(--color-scale)":"null":g.data.color),"pmSourceArc.vue"});return Ba(()=>{let s=N.pv.power+N.evuIn.power+N.batOut.power;s>_.maxPower&&(_.maxPower=s)}),(s,o)=>(i(),h("g",{id:"pmSourceArc",origin:a.value},null,8,dn))}}),hn=["origin"],pn=I({__name:"PMUsageArc",props:{radius:{},cornerRadius:{},circleGapSize:{},emptyPower:{}},setup(t){const e=t,a=f(()=>{let s={name:"",power:e.emptyPower,energy:0,energyPv:0,energyBat:0,pvPercentage:0,color:"var(--color-bg)",icon:""};const o=[A.evuOut,A.charging].concat(Object.values(F).filter(g=>g.configured&&!g.countAsHouse).sort((g,y)=>y.power-g.power)).concat([A.batIn,A.house]).concat(s),r=o.length-1,l=Yt().value(g=>g.power).startAngle(Math.PI*1.5-e.circleGapSize).endAngle(Math.PI/2+e.circleGapSize).sort(null),c=Zt().innerRadius(e.radius/6*5).outerRadius(e.radius).cornerRadius(e.cornerRadius),u=fe("g#pmUsageArc");return u.selectAll("*").remove(),u.selectAll("consumers").data(l(o)).enter().append("path").attr("d",c).attr("fill",g=>g.data.color).attr("stroke",(g,y)=>y==r?g.data.power>0?"var(--color-scale)":"null":g.data.color),"pmUsageArc.vue"});return(s,o)=>(i(),h("g",{id:"pmUsageArc",origin:a.value},null,8,hn))}});function Be(t,e=1){let a;if(t>=1e3&&e<4){switch(e){case 0:a=Math.round(t/1e3);break;case 1:a=Math.round(t/100)/10;break;case 2:a=Math.round(t/10)/100;break;case 3:a=Math.round(t)/1e3;break;default:a=Math.round(t/100)/10;break}return(a==null?void 0:a.toLocaleString(void 0,{minimumFractionDigits:e}))+" kW"}else return Math.round(t).toLocaleString(void 0)+" W"}function Ze(t,e=1,a=!1){let s;if(t>=1e3&&e<4){switch(e){case 0:s=Math.round(t/1e3);break;case 1:s=(Math.round(t/100)/10).toFixed(1);break;case 2:s=(Math.round(t/10)/100).toFixed(2);break;case 3:s=(Math.round(t)/1e3).toFixed(3);break;default:s=Math.round(t/100)/10;break}return s.toLocaleString(void 0,{minimumFractionDigits:e})+(a?" MWh":" kWh")}else return Math.round(t).toLocaleString(void 0)+(a?" kWh":" Wh")}function gn(t){const e=Math.floor(t/3600),a=(t%3600/60).toFixed(0);return e>0?e+"h "+a+" min":a+" min"}function mn(t,e){return["Jan","Feb","März","April","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"][t]+" "+e}function fn(t){return(Math.round(t*10)/10).toLocaleString(void 0,{minimumFractionDigits:1})+"°"}const Bt=I({__name:"FormatWatt",props:{watt:{}},setup(t){const e=t,a=f(()=>Be(e.watt,_.decimalPlaces));return(s,o)=>k(a.value)}}),_n={key:0,id:"pmLabel"},vn=["x","y","fill","text-anchor"],bn=22,be=I({__name:"PMLabel",props:{x:{},y:{},data:{},props:{},anchor:{},labeltext:{},labelicon:{},labelcolor:{}},setup(t){const e=t,a=f(()=>e.labeltext?e.labeltext:e.props?e.props.icon+" ":e.labelicon?e.labelicon+" ":""),s=f(()=>e.labelcolor?e.labelcolor:e.props?e.props.color:""),o=f(()=>!e.data||e.data.power>0),r=f(()=>e.labeltext?"":"fas");return(l,c)=>o.value?(i(),h("g",_n,[n("text",{x:l.x,y:l.y,fill:s.value,"text-anchor":l.anchor,"font-size":bn,class:"pmLabel"},[n("tspan",{class:z(r.value)},k(a.value),3),n("tspan",null,[l.data!==void 0?(i(),B(Bt,{key:0,watt:l.data.power},null,8,["watt"])):w("",!0)])],8,vn)])):w("",!0)}}),yn={class:"wb-widget p-0 m-0 shadow"},wn={class:"d-flex justify-content-between"},kn={class:"m-4 me-0 mb-0"},$n=n("div",{class:"p-0"},"(title goes here)",-1),Sn={class:"p-4 pb-0 ps-0 m-0",style:{"text-align":"right"}},xn={class:"px-4 pt-4 pb-2 wb-subwidget"},Pn={class:"row"},Mn={class:"col"},Cn={class:"container-fluid m-0 p-0"},In={key:0},Bn=n("hr",null,null,-1),Vn={class:"px-4 py-2 wb-subwidget"},Tn={class:"row"},Ln={class:"col"},On={class:"container-fluid m-0 p-0"},xe=I({__name:"WBWidget",props:{variableWidth:{type:Boolean},fullWidth:{type:Boolean}},setup(t){const e=t,a=f(()=>e.fullWidth?"col-12":e.variableWidth&&_.preferWideBoxes?"col-lg-6":"col-lg-4");return(s,o)=>(i(),h("div",{class:z(["p-2 m-0 d-flex flex-fill",a.value])},[n("div",yn,[n("div",wn,[n("h3",kn,[ae(s.$slots,"title",{},()=>[$n]),ae(s.$slots,"subtitle")]),n("div",Sn,[ae(s.$slots,"buttons")])]),n("div",xn,[n("div",Pn,[n("div",Mn,[n("div",Cn,[ae(s.$slots,"default")])])])]),s.$slots.footer!=null?(i(),h("div",In,[Bn,n("div",Vn,[n("div",Tn,[n("div",Ln,[n("div",On,[ae(s.$slots,"footer")])])])])])):w("",!0)])],2))}}),An={id:"powermeter",class:"p-0 m-0"},Dn=["viewBox"],Wn=["transform"],En=["x"],ye=500,Me=20,jt=1,Gn=I({__name:"PowerMeter",setup(t){const e=ye,a=Math.PI/40,s=[[4],[4,6],[1,4,6],[0,2,4,6],[0,2,3,5,6]],o=[{x:-85,y:e/2*1/5},{x:0,y:e/2*1/5},{x:85,y:e/2*1/5},{x:-85,y:e/2*2/5},{x:0,y:e/2*2/5},{x:85,y:e/2*2/5},{x:0,y:e/2*3/5}],r=f(()=>ye/2-Me),l=f(()=>{let x="",U=Object.values(N).filter(Q=>Q.power>0);return U.length==1&&U[0].name=="PV"?x="Aktueller Verbrauch: ":x="Bezug/Verbrauch: ",x+Be(A.house.power+A.charging.power+A.devices.power+A.batIn.power,_.decimalPlaces)}),c=f(()=>{let x=N.pv.power+N.evuIn.power+N.batOut.power;return _.maxPower>x?Be(_.maxPower,_.decimalPlaces):Be(x,_.decimalPlaces)}),u=f(()=>Object.values(T)),g=f(()=>{let x=0;return _.showRelativeArcs&&(x=_.maxPower-(N.pv.power+N.evuIn.power+N.batOut.power)),x<0?0:x}),y=f(()=>[A.evuOut,A.charging,A.devices,A.batIn,A.house].filter(x=>x.power>0)),M=f(()=>s[y.value.length-1]);function C(x){return o[M.value[x]]}function S(x){return u.value[x].soc}function P(x){return x.length>12?x.slice(0,12-1)+".":x}return(x,U)=>(i(),B(xe,{"full-width":!0},{title:b(()=>[j(" Aktuelle Leistung ")]),default:b(()=>[n("figure",An,[(i(),h("svg",{viewBox:"0 0 "+ye+" "+d(e)},[n("g",{transform:"translate("+ye/2+","+d(e)/2+")"},[m(un,{radius:r.value,"corner-radius":jt,"circle-gap-size":a,"empty-power":g.value},null,8,["radius","empty-power"]),m(pn,{"sh-device":d(Ye),radius:r.value,"corner-radius":jt,"circle-gap-size":a,"empty-power":g.value},null,8,["sh-device","radius","empty-power"]),m(be,{x:0,y:-d(e)/10*2,data:d(N).pv,props:d(je).pv,anchor:"middle",config:d(_)},null,8,["y","data","props","config"]),m(be,{x:0,y:-d(e)/10*3,data:d(N).evuIn,props:d(je).evuIn,anchor:"middle",config:d(_)},null,8,["y","data","props","config"]),m(be,{x:0,y:-d(e)/10,data:d(N).batOut,props:d(je).batOut,anchor:"middle",config:d(_)},null,8,["y","data","props","config"]),(i(!0),h(W,null,q(y.value,(Q,Y)=>(i(),B(be,{key:Y,x:C(Y).x,y:C(Y).y,data:Q,labelicon:Q.icon,labelcolor:Q.color,anchor:"middle",config:d(_)},null,8,["x","y","data","labelicon","labelcolor","config"]))),128)),u.value.length>0&&u.value[0].isSocConfigured?(i(),B(be,{key:0,x:-ye/2-Me/4+10,y:-d(e)/2+Me+5,labeltext:P(u.value[0].vehicleName)+": "+S(0)+"%",labelcolor:u.value[0].color,anchor:"start",config:d(_)},null,8,["x","y","labeltext","labelcolor","config"])):w("",!0),u.value.length>1&&u.value[1].isSocConfigured?(i(),B(be,{key:1,x:ye/2+Me/4-10,y:-d(e)/2+Me+5,labeltext:P(u.value[1].vehicleName)+": "+S(1)+"%",labelcolor:u.value[1].color,anchor:"end",config:d(_)},null,8,["x","y","labeltext","labelcolor","config"])):w("",!0),d(re).batterySoc>0?(i(),B(be,{key:2,x:-ye/2-Me/4+10,y:d(e)/2-Me+15,labeltext:"Speicher: "+d(re).batterySoc+"%",labelcolor:d(A).batIn.color,anchor:"start",config:d(_)},null,8,["x","y","labeltext","labelcolor","config"])):w("",!0),m(be,{x:0,y:0,labeltext:l.value,labelcolor:"var(--color-fg)",anchor:"middle",config:d(_)},null,8,["labeltext","config"]),d(_).showRelativeArcs?(i(),h("text",{key:3,x:ye/2-44,y:"2","text-anchor":"middle",fill:"var(--color-axis)","font-size":"12"}," Peak: "+k(c.value),9,En)):w("",!0)],8,Wn)],8,Dn))])]),_:1}))}}),Te=["charging","house","batIn","devices"];class jn{constructor(){p(this,"data",[]);p(this,"_graphMode","")}get graphMode(){return this._graphMode}set graphMode(e){this._graphMode=e}}const v=J(new jn);let ct=!0,Xe=!0;function Ut(){ct=!1}function zt(){Xe=!1}function Un(t){Xe=t}function et(t){v.data=t}const te=J({refreshTopicPrefix:"openWB/graph/alllivevaluesJson",updateTopic:"openWB/graph/lastlivevaluesJson",configTopic:"openWB/graph/config/#",initialized:!1,initCounter:0,graphRefreshCounter:0,rawDataPacks:[],duration:0,activate(){v.data=[],this.unsubscribeUpdates(),this.subscribeRefresh(),Ce(this.configTopic),this.initialized=!1,this.initCounter=0,this.graphRefreshCounter=0,this.rawDataPacks=[]},deactivate(){this.unsubscribeRefresh(),this.unsubscribeUpdates(),Ge(this.configTopic)},subscribeRefresh(){for(let t=1;t<17;t++)Ce(this.refreshTopicPrefix+t)},unsubscribeRefresh(){for(let t=1;t<17;t++)Ge(this.refreshTopicPrefix+t)},subscribeUpdates(){Ce(this.updateTopic)},unsubscribeUpdates(){Ge(this.updateTopic)}}),H=J({topic:"openWB/log/daily/#",date:new Date,activate(){if(v.graphMode=="day"||v.graphMode=="today"){this.date=new Date;const t=this.date.getFullYear().toString()+(this.date.getMonth()+1).toString().padStart(2,"0")+this.date.getDate().toString().padStart(2,"0");v.data=[],Ce(this.topic),Ct({command:"getDailyLog",data:{day:t}})}},deactivate(){Ge(this.topic)},back(){this.date=new Date(this.date.setTime(this.date.getTime()-864e5))},forward(){this.date=new Date(this.date.setTime(this.date.getTime()+864e5))},setDate(t){this.date=t},getDate(){return this.date}}),_e=J({topic:"openWB/log/monthly/#",month:new Date().getMonth()+1,year:new Date().getFullYear(),activate(){const t=this.year.toString()+this.month.toString().padStart(2,"0");v.data=[],Ce(this.topic),Ct({command:"getMonthlyLog",data:{month:t}})},deactivate(){Ge(this.topic)},back(){this.month-=1,this.month<1&&(this.month=12,this.year-=1),this.activate()},forward(){this.month-1<new Date().getMonth()&&(this.month=this.month+1,this.month>12&&(this.month=1,this.year+=1),this.activate())},getDate(){return new Date(this.year,this.month)}}),De=J({topic:"openWB/log/yearly/#",month:new Date().getMonth()+1,year:new Date().getFullYear(),activate(){const t=this.year.toString();v.data=[],Ce(this.topic),Ct({command:"getYearlyLog",data:{year:t}})},deactivate(){Ge(this.topic)},back(){this.month-=1,this.month<1&&(this.month=12,this.year-=1),this.activate()},forward(){this.month-1<new Date().getMonth()&&(this.month=this.month+1,this.month>12&&(this.month=1,this.year+=1),this.activate())},getDate(){return new Date(this.year,this.month)}});function de(t=!1){switch(v.graphMode==""?zn(_.graphPreference):v.graphMode=="live"?_.graphPreference="live":_.graphPreference="today",t||(ct=!0,Xe=!0),v.graphMode){case"live":H.deactivate(),_e.deactivate(),De.deactivate(),te.activate();break;case"today":te.deactivate(),_e.deactivate(),De.deactivate(),H.activate();break;case"day":te.deactivate(),_e.deactivate(),De.deactivate(),H.activate();break;case"month":te.deactivate(),H.deactivate(),De.deactivate(),_e.activate();break;case"year":te.deactivate(),H.deactivate(),_e.deactivate(),De.activate();break}}function zn(t){v.graphMode=t}function Vt(t,e){e[t+"Pv"]=1e3*(e[t]*(e.solarPower-e.gridPush))/(e.solarPower-e.gridPush+e.gridPull+e.batOut),e[t+"Bat"]=1e3*(e[t]*e.batOut)/(e.solarPower-e.gridPush+e.gridPull+e.batOut)}function ra(t){$.pv.energy=t.solarPower*1e3,$.evuIn.energy=t.gridPull*1e3,$.batOut.energy=t.batOut*1e3,$.evuOut.energy=t.gridPush*1e3,$.batIn.energy=t.batIn*1e3,$.charging.energy=t.charging*1e3,$.devices.energy=t.devices*1e3,$.house.energy=$.evuIn.energy+$.pv.energy+$.batOut.energy-$.evuOut.energy-$.batIn.energy-$.charging.energy-$.devices.energy,Te.map(e=>{$[e].pvPercentage=Math.round(($[e].energyPv+$[e].energyBat)/$[e].energy*100)})}function Tt(){switch(v.graphMode){case"live":v.graphMode="today",_.showRightButton=!0,de();break;case"today":v.graphMode="day",H.date=new Date,H.back(),de();break;case"day":H.back(),de();break;case"month":_e.back();break}}function la(){const t=new Date;switch(v.graphMode){case"live":break;case"today":v.graphMode="live",_.showRightButton=!1,de();break;case"day":H.forward(),H.date.getDate()==t.getDate()&&H.date.getMonth()==t.getMonth()&&H.date.getFullYear()==t.getFullYear()&&(v.graphMode="today"),de();break;case"month":_e.forward();break}}function ia(){switch(v.graphMode){case"live":Tt();break;case"day":case"today":v.graphMode="month",de();break;case"month":v.graphMode="year",de();break}}function ca(){switch(v.graphMode){case"year":v.graphMode="month",de();break;case"month":v.graphMode="day",de();break;case"today":case"day":v.graphMode="live",de();break}}function Nt(t){if(v.graphMode=="day"||v.graphMode=="today"){H.setDate(t);const e=new Date;H.date.getDate()==e.getDate()&&H.date.getMonth()==e.getMonth()&&H.date.getFullYear()==e.getFullYear()?v.graphMode="today":v.graphMode="day",de()}}const Nn=["origin","transform"],Fn=I({__name:"PGSourceGraph",props:{width:{},height:{},margin:{}},setup(t){const e=t,a={house:"var(--color-house)",batIn:"var(--color-battery)",inverter:"var(--color-pv)",batOut:"var(--color-battery)",selfUsage:"var(--color-pv)",gridPush:"var(--color-export)",gridPull:"var(--color-evu)"};var s,o;const r=_.showAnimations?_.animationDuration:0,l=_.showAnimations?_.animationDelay:0,c=f(()=>{if(v.data.length>0){const G=fe("g#pgSourceGraph");v.graphMode=="month"||v.graphMode=="year"?L(G):D(G);const V=G.append("g").attr("class","axis");V.call(U.value),V.selectAll(".tick").attr("font-size",12),V.selectAll(".tick line").attr("stroke",Y.value).attr("stroke-width",Q.value),V.select(".domain").attr("stroke","var(--color-bg)")}return"pgSourceGraph.vue"}),u=f(()=>v.graphMode=="month"||v.graphMode=="year"?["gridPull","batOut","selfUsage","gridPush"]:["selfUsage","gridPush","batOut","gridPull"]),g=f(()=>Ve().domain([0,v.data.length-1]).range([0,e.width])),y=f(()=>mt().domain(Array.from({length:v.data.length},(G,V)=>V)).range([0,e.width+e.margin.right]).paddingInner(.4)),M=f(()=>Xt().keys(u.value)),C=f(()=>M.value(v.data)),S=f(()=>Ve().range([e.height-10,0]).domain(v.graphMode=="year"?[0,Math.ceil(P.value[1]*10)/10]:[0,Math.ceil(P.value[1])])),P=f(()=>{let G=ft(v.data,V=>Math.max(V.solarPower+V.gridPull+V.batOut,V.selfUsage+V.gridPush));return G[0]!=null&&G[1]!=null?G:[0,0]}),x=f(()=>v.graphMode=="month"||v.graphMode=="year")?-e.width-e.margin.right:-e.width,U=f(()=>Mt(S.value).tickSizeInner(x).ticks(4).tickFormat(G=>(G==0?"":Math.round(G*10)/10).toLocaleString(void 0))),Q=f(()=>_.showGrid?"0.5":"1"),Y=f(()=>_.showGrid?"var(--color-grid)":"var(--color-bg)");function D(G){const V=ot().x((ge,qe)=>g.value(qe)).y(S.value(0)),ne=ot().x((ge,qe)=>g.value(qe)).y0(ge=>S.value(ge[0])).y1(ge=>S.value(ge[1]));ct?(G.selectAll("*").remove(),s=G.selectAll(".sourceareas").data(C.value).enter().append("path").attr("fill",(ge,qe)=>a[u.value[qe]]).attr("d",ge=>V(ge)),s.transition().duration(r).delay(l).ease(Ee).attr("d",ge=>ne(ge)),Ut()):s.data(C.value).transition().duration(0).ease(Ee).attr("d",ge=>ne(ge))}function L(G){ct?(G.selectAll("*").remove(),o=G.selectAll(".sourcebar").data(C.value).enter().append("g").attr("fill",(V,ne)=>a[u.value[ne]]).selectAll("rect").data(V=>V).enter().append("rect").attr("x",(V,ne)=>y.value(ne)??0).attr("y",()=>S.value(0)).attr("height",0).attr("width",y.value.bandwidth()),o.transition().duration(r).delay(l).ease(Ee).attr("height",V=>S.value(V[0])-S.value(V[1])).attr("y",V=>S.value(V[1])),Ut()):(G.selectAll("*").remove(),o=G.selectAll(".sourcebar").data(C.value).enter().append("g").attr("fill",(V,ne)=>a[u.value[ne]]).selectAll("rect").data(V=>V).enter().append("rect").attr("x",(V,ne)=>y.value(ne)??0).attr("y",V=>S.value(V[1])).attr("width",y.value.bandwidth()).attr("height",V=>S.value(V[0])-S.value(V[1])))}return(G,V)=>(i(),h("g",{id:"pgSourceGraph",origin:c.value,transform:"translate("+G.margin.left+","+G.margin.top+")"},null,8,Nn))}}),qn=["origin","transform"],Rn=I({__name:"PGUsageGraph",props:{width:{},height:{},margin:{},stackOrder:{}},setup(t){const e=t,a=[["house","charging","devices","batIn","inverter"],["charging","devices","house","batIn","inverter"],["devices","house","charging","batIn","inverter"]],s={house:"var(--color-house)",charging:"var(--color-charging)",batIn:"var(--color-battery)",inverter:"var(--color-pv)",batOut:"var(--color-battery)",selfUsage:"var(--color-pv)",gridPush:"var(--color-export)",gridPull:"var(--color-evu)",cp0:"var(--color-cp0)",cp1:"var(--color-cp1)",cp2:"var(--color-cp2)",cp3:"var(--color-cp3)",sh1:"var(--color-sh1)",sh2:"var(--color-sh2)",sh3:"var(--color-sh3)",sh4:"var(--color-sh4)",devices:"var(--color-devices)"};var o,r;const l=_.showAnimations?_.animationDuration:0,c=_.showAnimations?_.animationDelay:0,u=f(()=>{if(v.data.length>0){const D=fe("g#pgUsageGraph");v.graphMode=="month"||v.graphMode=="year"?Y(D):Q(D);const L=D.append("g").attr("class","axis");L.call(U.value),L.selectAll(".tick").attr("font-size",12).attr("color","var(--color-axis)"),_.showGrid?L.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"):L.selectAll(".tick line").attr("stroke","var(--color-bg)"),L.select(".domain").attr("stroke","var(--color-bg)")}return"pgUsageGraph.vue"}),g=f(()=>Xt().keys(a[e.stackOrder])),y=f(()=>g.value(v.data)),M=f(()=>Ve().domain([0,v.data.length-1]).range([0,e.width])),C=f(()=>mt().domain(Array.from({length:v.data.length},(D,L)=>L)).range([0,e.width+e.margin.right]).paddingInner(.4)),S=f(()=>Ve().range([e.height+10,2*e.height]).domain(v.graphMode=="year"?[0,Math.ceil(P.value[1]*10)/10]:[0,Math.ceil(P.value[1])])),P=f(()=>{let D=ft(v.data,L=>L.house+L.charging+L.batIn+L.inverter+L.devices);return D[0]!=null&&D[1]!=null?D:[0,0]}),x=f(()=>v.graphMode=="month"||v.graphMode=="year")?-e.width-e.margin.right:-e.width,U=f(()=>Mt(S.value).tickSizeInner(x).ticks(4).tickFormat(D=>(D==0?"":Math.round(D*10)/10).toLocaleString(void 0)));function Q(D){const L=ot().x((V,ne)=>M.value(ne)).y(S.value(0)),G=ot().x((V,ne)=>M.value(ne)).y0(V=>S.value(V[0])).y1(V=>S.value(V[1]));_.showAnimations?Xe?(D.selectAll("*").remove(),o=D.selectAll(".usageareas").data(y.value).enter().append("path").attr("d",V=>L(V)).attr("fill",(V,ne)=>s[a[e.stackOrder][ne]]),o.transition().duration(300).delay(100).ease(Ee).attr("d",V=>G(V)),zt()):o.data(y.value).transition().duration(100).ease(Ee).attr("d",V=>G(V)):(D.selectAll("*").remove(),D.selectAll(".usageareas").data(y.value).enter().append("path").attr("d",V=>G(V)).attr("fill",(V,ne)=>s[a[e.stackOrder][ne]]))}function Y(D){Xe?(D.selectAll("*").remove(),r=D.selectAll(".usagebar").data(y.value).enter().append("g").attr("fill",(L,G)=>s[a[e.stackOrder][G]]).selectAll("rect").data(L=>L).enter().append("rect").attr("x",(L,G)=>C.value(G)??0).attr("y",()=>S.value(0)).attr("height",0).attr("width",C.value.bandwidth()),r.transition().duration(l).delay(c).ease(Ee).attr("y",L=>S.value(L[0])).attr("height",L=>S.value(L[1])-S.value(L[0])),zt()):(D.selectAll("*").remove(),r=D.selectAll(".usagebar").data(y.value).enter().append("g").attr("fill",(L,G)=>s[a[e.stackOrder][G]]).selectAll("rect").data(L=>L).enter().append("rect").attr("x",(L,G)=>C.value(G)??0).attr("y",L=>S.value(L[0])).attr("height",L=>S.value(L[1])-S.value(L[0])).attr("width",C.value.bandwidth()))}return(D,L)=>(i(),h("g",{id:"pgUsageGraph",origin:u.value,transform:"translate("+D.margin.left+","+D.margin.top+")"},null,8,qn))}}),Hn=["transform"],Jn=["origin","transform"],Qn=["origin","transform"],Yn={key:0},Zn=["width","height"],Xn={key:1},Kn=["y","width","height"],bt=12,eo=I({__name:"PGXAxis",props:{width:{},height:{},margin:{}},setup(t){const e=t,a=f(()=>Et(r.value).ticks(4).tickSizeInner(o.value).tickFormat(Va("%H:%M"))),s=f(()=>Et(l.value).ticks(4).tickSizeInner(o.value).tickFormat((g,y)=>(y+1).toString())),o=f(()=>v.graphMode!=="month"&&v.graphMode!=="year"?_.showGrid?-(e.height/2-7):-10:0),r=f(()=>{let g=ft(v.data,y=>y.date);return g[0]&&g[1]?st().domain(g).range([0,e.width]):st().range([0,0])}),l=f(()=>mt().domain(Array.from({length:v.data.length},(g,y)=>y)).paddingInner(.4).range([0,e.width+e.margin.right])),c=f(()=>{let g=fe("g#PGXAxis");return g.selectAll("*").remove(),v.graphMode=="month"||v.graphMode=="year"?g.call(s.value):g.call(a.value),g.selectAll(".tick").attr("color","var(--color-axis)").attr("font-size",bt),_.showGrid?g.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"):g.selectAll(".tick line").attr("stroke","var(--color-bg)"),g.select(".domain").attr("stroke","var(--color-bg)"),g.append("text").attr("x",-e.margin.left).attr("y",12).attr("fill","var(--color-axis)").attr("font-size",bt).text(v.graphMode=="year"?"MWh":"kWh").attr("text-anchor","start"),"PGXAxis.vue"}),u=f(()=>{let g=fe("g#PGXAxis2");return g.selectAll("*").remove(),_.showGrid&&(g.selectAll(".tick").attr("color","var(--color-axis)").attr("font-size",bt),g.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"),g.select(".domain").attr("stroke","var(--color-bg)")),"PGXAxis.vue"});return(g,y)=>(i(),h("g",{transform:"translate("+g.margin.left+","+g.margin.top+")"},[n("g",{id:"PGXAxis",class:"axis",origin:c.value,transform:"translate(0,"+(g.height/2-6)+")"},null,8,Jn),n("g",{id:"PGXAxis2",class:"axis",origin:u.value,transform:"translate(0,"+(g.height/2+10)+")"},null,8,Qn),d(_).showGrid?(i(),h("g",Yn,[n("rect",{x:"0",y:"0",width:g.width,height:g.height/2-10,fill:"none",stroke:"var(--color-grid)","stroke-width":"0.5"},null,8,Zn)])):w("",!0),d(_).showGrid?(i(),h("g",Xn,[n("rect",{x:"0",y:g.height/2+10,width:g.width,height:g.height/2-10,fill:"none",stroke:"var(--color-grid)","stroke-width":"0.5"},null,8,Kn)])):w("",!0)],8,Hn))}}),to=["d"],ao=["d","stroke"],no=["x","y","text-anchor"],Ft=I({__name:"PgSoc",props:{width:{},height:{},margin:{},order:{}},setup(t){const e=t,a=f(()=>Object.values(X)),s=f(()=>{let M=ft(v.data,C=>C.date);return M[0]&&M[1]?st().domain(M).range([0,e.width]):st().range([0,0])}),o=f(()=>Ve().range([e.height-10,0]).domain([0,100])),r=f(()=>{let C=Ta().x(S=>s.value(S.date)).y(S=>o.value(S["soc"+e.order])!=null?o.value(S["soc"+e.order]):o.value(0))(v.data);return C||""}),l=f(()=>a.value[e.order].name??""),c=f(()=>e.order==0?"var(--color-cp1)":"var(--color-cp2)"),u=f(()=>e.order==0?e.width-3:3),g=f(()=>v.data.length>0?e.order==0?o.value(v.data[v.data.length-1].soc0+2):o.value(v.data[0].soc1+2):0),y=f(()=>e.order==0?"end":"start");return(M,C)=>(i(),h(W,null,[n("path",{class:"soc-baseline",d:r.value,stroke:"var(--color-bg)","stroke-width":"1",fill:"none"},null,8,to),n("path",{class:"soc-dashes",d:r.value,stroke:c.value,"stroke-width":"1",style:{strokeDasharray:"3,3"},fill:"none"},null,8,ao),n("text",{class:"cpname",x:u.value,y:g.value,style:R({fill:c.value,fontSize:10}),"text-anchor":y.value},k(l.value),13,no)],64))}}),oo=["transform"],so=I({__name:"PgSocAxis",props:{width:{},height:{},margin:{}},setup(t){const e=t,a=f(()=>Ve().range([e.height-10,0]).domain([0,100])),s=f(()=>La(a.value).ticks(5).tickFormat(r=>r.toString()+"%"));function o(){let r=fe("g#PGSocAxis");r.call(s.value),r.selectAll(".tick").attr("font-size",12),r.selectAll(".tick line").attr("stroke","var(--color-bg)"),r.select(".domain").attr("stroke","var(--color-bg)")}return ze(()=>{o()}),(r,l)=>(i(),h("g",{id:"PGSocAxis",class:"axis",transform:"translate("+(r.width-20)+",0)"},null,8,oo))}}),ro=t=>(K("data-v-73750280"),t=t(),ee(),t),lo={class:"d-flex align-self-top justify-content-center align-items-center"},io={class:"input-group input-group-xs"},co={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},uo={class:"dropdown-menu"},ho={class:"table optiontable"},po=["onClick"],go={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},mo={class:"dropdown-menu"},fo={class:"table optiontable"},_o=["onClick"],vo={class:"btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},bo={class:"dropdown-menu"},yo={class:"table optiontable"},wo=["onClick"],ko=ro(()=>n("span",{class:"fa-solid fa-circle-check"},null,-1)),$o=[ko],So=I({__name:"DateInput",props:{modelValue:{type:Date,required:!0},mode:{type:String,default:"day"}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=new Date().getFullYear();let o=Array.from({length:10},(C,S)=>s-S);const r=le(!0),l=[[0,1,2,3],[4,5,6,7],[8,9,10,11]],c=le(a.modelValue.getDate()),u=le(a.modelValue.getMonth()),g=le(a.modelValue.getFullYear()),y=f(()=>{const S=new Date(g.value,u.value,1).getDay();let P=0;switch(u.value){case 1:case 3:case 5:case 7:case 8:case 10:case 12:P=31;break;case 4:case 6:case 9:case 11:P=30;break;case 2:Math.trunc(g.value/4)*4==g.value&&(P=29)}let x=[],U=[0,0,0,0,0,0,0],Q=S;for(let Y=0;Y<P;Y++)U[Q]=Y+1,Q==6?(x.push(U),U=[0,0,0,0,0,0,0],Q=0):Q++;return Q<8&&x.push(U),x});function M(){e("update:modelValue",new Date(g.value,u.value,c.value)),r.value=!1}return(C,S)=>(i(),h("span",lo,[n("div",io,[n("button",co,k(c.value),1),n("div",uo,[n("table",ho,[(i(!0),h(W,null,q(y.value,(P,x)=>(i(),h("tr",{key:x,class:""},[(i(!0),h(W,null,q(P,(U,Q)=>(i(),h("td",{key:Q},[c.value!=0?(i(),h("span",{key:0,type:"button",class:"btn optionbutton",onClick:Y=>c.value=U},k(U),9,po)):w("",!0)]))),128))]))),128))])]),n("button",go,k(u.value+1),1),n("div",mo,[n("table",fo,[(i(),h(W,null,q(l,(P,x)=>n("tr",{key:x,class:""},[(i(!0),h(W,null,q(P,(U,Q)=>(i(),h("td",{key:Q,class:"p-0 m-0"},[n("span",{type:"button",class:"btn btn-sm optionbutton",onClick:Y=>u.value=U},k(U+1),9,_o)]))),128))])),64))])]),n("button",vo,k(g.value),1),n("div",bo,[n("table",yo,[(i(!0),h(W,null,q(d(o),(P,x)=>(i(),h("tr",{key:x,class:""},[n("td",null,[n("span",{type:"button",class:"btn optionbutton",onClick:U=>g.value=P},k(P),9,wo)])]))),128))])]),n("button",{class:"button-outline-secondary",type:"button",onClick:M},$o)])]))}});const E=(t,e)=>{const a=t.__vccOpts||t;for(const[s,o]of e)a[s]=o;return a},Ke=E(So,[["__scopeId","data-v-73750280"]]),xo={class:"btn-group m-0",role:"group","aria-label":"radiobar"},Po=["id","value"],Mo=I({__name:"RadioBarInput",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(l){e("update:modelValue",l)}});function o(l){let c=a.options[l].color?a.options[l].color:"var(--color-fg)";return a.options[l].active?{color:"var(--color-bg)",background:c}:{color:c}}function r(l){let c=l.target;for(;c&&!c.value&&c.parentElement;)c=c.parentElement;c.value&&(s.value=c.value)}return(l,c)=>(i(),h("div",null,[n("div",xo,[(i(!0),h(W,null,q(l.options,(u,g)=>(i(),h("button",{id:"radio-"+u.value,key:g,class:z(["btn btn-outline-secondary btn-sm radiobutton mx-0 mb-0 px-2",u.value==s.value?"active":""]),value:u.value,style:R(o(g)),onClick:r},[n("span",{style:R(o(g))},[u.icon?(i(),h("i",{key:0,class:z(["fa-solid",u.icon])},null,2)):w("",!0),j(" "+k(u.text),1)],4)],14,Po))),128))])]))}});const da=E(Mo,[["__scopeId","data-v-82ab6829"]]),vt=t=>(K("data-v-708803a4"),t=t(),ee(),t),Co=vt(()=>n("i",{class:"fa-solid fa-xl fa-chevron-circle-up"},null,-1)),Io=[Co],Bo=vt(()=>n("span",{class:"fa-solid fa-xl fa-chevron-circle-left arrowButton"},null,-1)),Vo=[Bo],To=vt(()=>n("span",{class:"fa-solid fa-xl fa-gear"},null,-1)),Lo=[To],Oo=vt(()=>n("span",{class:"fa-solid fa-xl fa-circle-check"},null,-1)),Ao=[Oo],Do=I({__name:"PgSelector",props:{widgetid:{},showLeftButton:{type:Boolean},showRightButton:{type:Boolean}},emits:["shiftLeft","shiftRight","shiftUp","shiftDown"],setup(t){const e=t,a=le(0),s=f(()=>{switch(v.graphMode){case"live":return`${te.duration} min`;case"today":return"heute";case"day":return H.date.getDate()+"."+(H.date.getMonth()+1)+".";case"month":return mn(_e.month-1,_e.year);case"year":return De.year.toString();default:return"???"}}),o=["live","today","day","month","year"],r=["Live","Heute","Tag","Monat","Jahr"],l=f({get(){return v.graphMode},set(Y){switch(Y){case"day":M();break;case"today":C();break;case"live":y();break;case"month":S();break;case"year":P()}}}),c=f(()=>{switch(v.graphMode){case"live":case"today":return H.getDate();case"month":return _e.getDate();default:return H.getDate()}});function u(Y){Nt(Y)}function g(){a.value+=1,a.value>2&&(a.value=0)}function y(){v.graphMode!="live"&&(v.graphMode="live",de())}function M(){v.graphMode!="day"&&v.graphMode!="today"&&(v.graphMode="day",de())}function C(){v.graphMode!="today"&&(v.graphMode="today",Nt(new Date))}function S(){v.graphMode!="month"&&(v.graphMode="month",de())}function P(){v.graphMode!="year"&&(v.graphMode="year",de())}const x=f(()=>a.value>0?{border:"1px solid var(--color-frame)"}:""),U=f(()=>a.value==1?"justify-content-between":"justify-content-end"),Q=f(()=>a.value==1?"justify-content-between":"justify-content-center");return(Y,D)=>(i(),h("div",{class:"d-flex flex-column justify-content-center pgselector rounded",style:R(x.value)},[a.value==2?(i(),B(da,{key:0,id:"pgm2",modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=L=>l.value=L),class:"m-2",options:o.map((L,G)=>({text:r[G],value:L,color:"var(--color-menu)",active:L==d(v).graphMode}))},null,8,["modelValue","options"])):w("",!0),a.value==1?(i(),h("span",{key:1,type:"button",class:z(["arrowButton d-flex align-self-center mb-3 mt-3",{disabled:!e.showLeftButton}]),onClick:D[1]||(D[1]=L=>Y.$emit("shiftUp"))},Io,2)):w("",!0),n("div",{class:z(["d-flex align-items-center",Q.value])},[a.value==1?(i(),h("span",{key:0,type:"button",class:z(["p-1",{disabled:!e.showLeftButton}]),onClick:D[2]||(D[2]=L=>Y.$emit("shiftLeft"))},Vo,2)):w("",!0),a.value<2?(i(),h("span",{key:1,type:"button",class:"p-2 px-3 badge rounded-pill datebadge",onClick:g},k(s.value),1)):w("",!0),a.value==2?(i(),B(Ke,{key:2,"model-value":c.value,mode:d(v).graphMode,"onUpdate:modelValue":u},null,8,["model-value","mode"])):w("",!0),a.value==1?(i(),h("span",{key:3,id:"graphRightButton",type:"button",class:z(["arrowButton fa-solid fa-xl fa-chevron-circle-right p-1",{disabled:!e.showRightButton}]),onClick:D[3]||(D[3]=L=>Y.$emit("shiftRight"))},null,2)):w("",!0)],2),n("div",{class:z(["d-flex align-items-center",U.value])},[a.value==1?(i(),h("span",{key:0,type:"button",class:"p-1",onClick:g},Lo)):w("",!0),a.value==1?(i(),h("span",{key:1,id:"graphLeftButton",type:"button",class:z(["arrowButton fa-solid fa-xl fa-chevron-circle-down p-1",{disabled:!e.showLeftButton}]),onClick:D[4]||(D[4]=L=>Y.$emit("shiftDown"))},null,2)):w("",!0),a.value>0?(i(),h("span",{key:2,type:"button",class:"p-1",onClick:D[5]||(D[5]=L=>a.value=0)},Ao)):w("",!0)],2)],4))}});const ua=E(Do,[["__scopeId","data-v-708803a4"]]),Wo=t=>(K("data-v-2ce1d1f1"),t=t(),ee(),t),Eo=["viewBox"],Go=["transform"],jo={id:"button"},Uo=["y"],zo=Wo(()=>n("tspan",{fill:"var(--color-menu)",class:"fas fa-lg"},k(""),-1)),No=[zo],we=500,ke=500,Fo=2,qo="Leistung / Ladestand ",Ro=I({__name:"PowerGraph",setup(t){const e={top:10,right:20,bottom:10,left:25};function a(){let s=_.usageStackOrder+1;s>Fo&&(s=0),_.usageStackOrder=s,Un(!0)}return(s,o)=>(i(),B(xe,{"full-width":!0},{title:b(()=>[j(k(qo))]),buttons:b(()=>[m(ua,{widgetid:"graphsettings","show-left-button":!0,"show-right-button":!0,onShiftLeft:d(Tt),onShiftRight:d(la),onShiftUp:d(ia),onShiftDown:d(ca)},null,8,["onShiftLeft","onShiftRight","onShiftUp","onShiftDown"])]),default:b(()=>[n("figure",{id:"powergraph",class:"p-0 m-0",onClick:a},[(i(),h("svg",{viewBox:"0 0 "+we+" "+ke},[m(Fn,{width:we-e.left-2*e.right,height:(ke-e.top-e.bottom)/2,margin:e},null,8,["width","height"]),m(Rn,{width:we-e.left-2*e.right,height:(ke-e.top-e.bottom)/2,margin:e,"stack-order":d(_).usageStackOrder},null,8,["width","height","stack-order"]),m(eo,{width:we-e.left-2*e.right,height:ke-e.top-e.bottom,margin:e,"graph-data":d(v)},null,8,["width","height","graph-data"]),n("g",{transform:"translate("+e.left+","+e.top+")"},[(d(v).graphMode=="day"||d(v).graphMode=="today")&&Object.values(d(X)).length>0?(i(),B(Ft,{key:0,width:we-e.left-2*e.right,height:(ke-e.top-e.bottom)/2,margin:e,order:0},null,8,["width","height"])):w("",!0),(d(v).graphMode=="day"||d(v).graphMode=="today")&&Object.values(d(X)).length>1?(i(),B(Ft,{key:1,width:we-e.left-2*e.right,height:(ke-e.top-e.bottom)/2,margin:e,order:1},null,8,["width","height"])):w("",!0),d(v).graphMode=="day"||d(v).graphMode=="today"?(i(),B(so,{key:2,width:we-e.left-e.right,height:(ke-e.top-e.bottom)/2,margin:e},null,8,["width","height"])):w("",!0)],8,Go),n("g",jo,[n("text",{x:we,y:ke-10,color:"var(--color-menu)","text-anchor":"end"},No,8,Uo)])],8,Eo))])]),_:1}))}});const Ho=E(Ro,[["__scopeId","data-v-2ce1d1f1"]]),Jo=["id"],Qo=["x","width","height","fill"],Yo=["x","width","height"],Zo=["x","width","height"],Xo=I({__name:"EmBar",props:{item:{},xScale:{},yScale:{},margin:{},height:{},barcount:{},autarchy:{},autText:{}},setup(t){const e=t,a=f(()=>e.height-e.yScale(e.item.energy)-e.margin.top-e.margin.bottom),s=f(()=>e.item.energyPv>0?e.height-e.yScale(e.item.energyPv)-e.margin.top-e.margin.bottom:0),o=f(()=>e.item.energyPv>0?e.height-e.yScale(e.item.energyBat)-e.margin.top-e.margin.bottom:0);return(r,l)=>(i(),h("g",{id:"bar-"+e.item.name,transform:"scale(1,-1) translate (0,-445)"},[n("rect",{class:"bar",x:e.xScale(r.item.name),y:"0",width:e.xScale.bandwidth(),height:a.value,fill:r.item.color},null,8,Qo),n("rect",{class:"bar",x:e.xScale(r.item.name)+e.xScale.bandwidth()/6,y:"0",width:e.xScale.bandwidth()*2/3,height:s.value,fill:"var(--color-pv)","fill-opacity":"66%"},null,8,Yo),n("rect",{class:"bar",x:e.xScale(r.item.name)+e.xScale.bandwidth()/6,y:"0",width:e.xScale.bandwidth()*2/3,height:o.value,fill:"var(--color-pv)","fill-opacity":"66%"},null,8,Zo)],8,Jo))}}),Ko={id:"emBargraph"},es=n("animateTransform",{"attribute-name":"transform",type:"scale",from:"1 0",to:"1 1",begin:"0s",dur:"2s"},null,-1),ts=I({__name:"EMBarGraph",props:{plotdata:{},xScale:{},yScale:{},margin:{},height:{}},setup(t){const e=t;function a(o){if(o.name=="PV"){const r=v.graphMode=="live"||v.graphMode=="day"?N:$,c=(v.graphMode=="live"||v.graphMode=="day"?A:$).evuOut.energy,u=r.pv.energy;return Math.round((u-c)/u*100)}else if(o.name=="Netz"){const r=v.graphMode=="live"||v.graphMode=="day"?N:$,l=v.graphMode=="live"||v.graphMode=="day"?A:$,c=l.evuOut.energy,u=r.evuIn.energy,g=r.pv.energy,y=r.batOut.energy,M=l.batIn.energy;return Math.round((g+y-c-M)/(g+y+u-c-M)*100)}else return o.pvPercentage}function s(o){return o.name=="PV"?"Eigen":"Aut"}return(o,r)=>(i(),h("g",Ko,[(i(!0),h(W,null,q(e.plotdata,(l,c)=>(i(),h("g",{key:c},[m(Xo,{item:l,"x-scale":e.xScale,"y-scale":e.yScale,margin:e.margin,height:e.height,barcount:e.plotdata.length,"aut-text":s(l),autarchy:a(l)},null,8,["item","x-scale","y-scale","margin","height","barcount","aut-text","autarchy"])]))),128)),es]))}}),as=["origin"],ns=I({__name:"EMYAxis",props:{yScale:{type:[Function,Object]},width:{},fontsize:{}},setup(t){const e=t,a=f(()=>Mt(e.yScale).tickFormat(o=>o>0?(o/1e3).toString():"").ticks(6).tickSizeInner(-e.width)),s=f(()=>{const o=fe("g#emYAxis");return o.attr("class","axis").call(a.value),o.append("text").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("energy"),o.selectAll(".tick").attr("font-size",e.fontsize),_.showGrid?o.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"):o.selectAll(".tick line").attr("stroke","var(--color-bg)"),o.select(".domain").attr("stroke","var(--color-bg)"),"emYAxis.vue"});return(o,r)=>(i(),h("g",{id:"emYAxis",class:"axis",origin:s.value},null,8,as))}}),os=["id"],ss=["x","y","font-size"],rs=["x","y","font-size","fill"],ls=["x","y","font-size","fill"],is=I({__name:"EmLabel",props:{item:{},xScale:{},yScale:{},margin:{},height:{},barcount:{},autarchy:{},autText:{}},setup(t){const e=t,a=f(()=>e.autarchy?e.yScale(e.item.energy)-25:e.yScale(e.item.energy)-10),s=f(()=>{let u=16,g=e.barcount;return g<=5?u=16:g==6?u=14:g>6&&g<=8?u=13:g==9?u=11:g==10?u=10:u=9,u}),o=f(()=>{let u=12,g=e.barcount;return g<=5?u=12:g==6?u=11:g>6&&g<=8||g==9?u=8:g==10?u=7:u=6,u});function r(u,g){return g.length>o.value?g.substring(0,o.value)+".":g}function l(){return e.autarchy?e.autText+": "+e.autarchy.toLocaleString(void 0)+" %":""}function c(){return"var(--color-pv)"}return(u,g)=>(i(),h("g",{id:"barlabel-"+e.item.name},[n("text",{x:e.xScale(u.item.name)+e.xScale.bandwidth()/2,y:a.value,"font-size":s.value,"text-anchor":"middle",fill:"var(--color-menu)"},k(d(Ze)(u.item.energy,d(_).decimalPlaces,d(v).graphMode=="year")),9,ss),n("text",{x:e.xScale(u.item.name)+e.xScale.bandwidth()/2,y:e.yScale(u.item.energy)-10,"font-size":s.value-2,"text-anchor":"middle",fill:c()},k(l()),9,rs),n("text",{x:e.xScale(u.item.name)+e.xScale.bandwidth()/2,y:e.height-e.margin.bottom-5,"font-size":s.value,"text-anchor":"middle",fill:u.item.color,class:z(u.item.icon.length<=2?"fas":"")},k(r(u.item.name,u.item.icon)),11,ls)],8,os))}}),cs={id:"emBarLabels"},ds=I({__name:"EMLabels",props:{plotdata:{},xScale:{},yScale:{},height:{},margin:{}},setup(t){const e=t;function a(o){if(o.name=="PV"){const r=v.graphMode=="live"||v.graphMode=="day"?N:$,c=(v.graphMode=="live"||v.graphMode=="day"?A:$).evuOut.energy,u=r.pv.energy;return Math.round((u-c)/u*100)}else if(o.name=="Netz"){const r=v.graphMode=="live"||v.graphMode=="day"?N:$,l=v.graphMode=="live"||v.graphMode=="day"?A:$,c=l.evuOut.energy,u=r.evuIn.energy,g=r.pv.energy,y=r.batOut.energy,M=l.batIn.energy;return Math.round((g+y-c-M)/(g+y+u-c-M)*100)}else return o.pvPercentage}function s(o){return o.name=="PV"?"Eigen":"Aut"}return(o,r)=>(i(),h("g",cs,[(i(!0),h(W,null,q(e.plotdata,(l,c)=>(i(),h("g",{key:c},[m(is,{item:l,"x-scale":e.xScale,"y-scale":e.yScale,margin:e.margin,height:e.height,barcount:e.plotdata.length,"aut-text":s(l),autarchy:a(l)},null,8,["item","x-scale","y-scale","margin","height","barcount","aut-text","autarchy"])]))),128))]))}}),us={id:"energymeter",class:"p-0 m-0"},hs={viewBox:"0 0 500 500"},ps=["transform"],gs=["x"],qt=500,yt=500,Rt=12,ms="Energie",fs=I({__name:"EnergyMeter",props:{usageDetails:{}},setup(t){const e=t,a={top:25,bottom:30,left:25,right:0},s=f(()=>{let l=Object.values(N),c=e.usageDetails,u=Object.values($),g=[];switch(v.graphMode){default:case"live":case"today":g=l.concat(c).filter(y=>y.energy>0);break;case"day":case"month":case"year":g=u.filter(y=>y.energy>0)}return g}),o=f(()=>mt().range([0,qt-a.left-a.right]).domain(s.value.map(l=>l.name)).padding(.4)),r=f(()=>Ve().range([yt-a.bottom-a.top,15]).domain([0,Oa(s.value,l=>l.energy)]));return(l,c)=>(i(),B(xe,{"full-width":!0},{title:b(()=>[j(k(ms))]),buttons:b(()=>[m(ua,{widgetid:"graphsettings","show-left-button":!0,"show-right-button":!0,onShiftLeft:d(Tt),onShiftRight:d(la),onShiftUp:d(ia),onShiftDown:d(ca)},null,8,["onShiftLeft","onShiftRight","onShiftUp","onShiftDown"])]),default:b(()=>[n("figure",us,[(i(),h("svg",hs,[n("g",{transform:"translate("+a.left+","+a.top+")"},[m(ts,{plotdata:s.value,"x-scale":o.value,"y-scale":r.value,height:yt,margin:a},null,8,["plotdata","x-scale","y-scale"]),m(ns,{"y-scale":r.value,width:qt,fontsize:Rt,config:d(_)},null,8,["y-scale","config"]),n("text",{x:-a.left,y:"-15",fill:"var(--color-axis)","font-size":Rt},k(d(v).graphMode=="year"?"MWh":"kWh"),9,gs),m(ds,{plotdata:s.value,"x-scale":o.value,"y-scale":r.value,height:yt,margin:a,config:d(_)},null,8,["plotdata","x-scale","y-scale","config"])],8,ps)]))])]),_:1}))}}),_s={class:"d-flex flex-column align-items-center"},vs={class:"heading mt-1"},bs={class:"mx-1"},ys={class:"d-flex my-0 align-items-center content"},ws=I({__name:"InfoItem",props:{heading:{}},setup(t){const e=t;return(a,s)=>(i(),h("span",_s,[n("span",vs,k(e.heading),1),n("span",bs,[n("span",ys,[ae(a.$slots,"default",{},void 0,!0)])])]))}});const oe=E(ws,[["__scopeId","data-v-5512398e"]]),ks={class:"row p-0 m-0"},$s={class:"col p-0 m-0"},Ss={class:"d-flex justify-content-between"},xs={class:"col p-0 m-0",style:{"text-align":"right"}},Ps={class:"container-fluid m-0 p-0"},Ms=I({__name:"WbSubwidget",props:{titlecolor:{},fullwidth:{type:Boolean}},setup(t){const e=t,a=f(()=>e.titlecolor?{color:e.titlecolor}:{color:"var(--color-fg)"}),s=f(()=>e.fullwidth?"col-lg-12":"col-lg-4");return(o,r)=>(i(),h("div",{class:z(["px-4 pt-3 mb-2 wb-subwidget m-0",s.value])},[n("div",ks,[n("div",$s,[n("div",Ss,[n("h3",{class:"m-0 mb-2",style:R(a.value)},[ae(o.$slots,"title",{},void 0,!0)],4),n("div",xs,[ae(o.$slots,"buttons",{},void 0,!0)])])])]),n("div",Ps,[ae(o.$slots,"default",{},void 0,!0)])],2))}});const ha=E(Ms,[["__scopeId","data-v-263a58f0"]]),Cs=t=>(K("data-v-85517e3c"),t=t(),ee(),t),Is={class:"col-12 m-0 mb-0 px-0 py-0 configitem"},Bs={class:"titlecolumn m-0 p-0 d-flex align-items-center"},Vs=Cs(()=>n("i",{class:"me-1 fa-solid fa-sm fa-circle-info"},null,-1)),Ts={class:"row ms-1 mb-2 p-0 pt-2 d-flex align-items-center"},Ls={class:"col me-1 p-0 ps-4 selectors"},Os={class:"d-flex justify-content-stretch align-items-center"},As=I({__name:"ConfigItem",props:{title:{},infotext:{},icon:{},fullwidth:{type:Boolean}},setup(t){const e=t,a=le(!1);function s(){a.value=!a.value}const o=f(()=>{let r={color:"var(--color-charging)"};return a.value&&(r.color="var(--color-battery)"),r});return(r,l)=>(i(),B(ha,{fullwidth:!!r.fullwidth},{default:b(()=>[n("div",Is,[n("div",Bs,[n("span",{class:"d-flex align-items-baseline m-0 p-0",onClick:s},[e.icon?(i(),h("i",{key:0,class:z(["fa-solid fa-sm m-0 p-0 me-2 item-icon",e.icon])},null,2)):w("",!0),j(" "+k(r.title),1)]),n("span",null,[e.infotext?(i(),h("i",{key:0,class:"fa-solid fa-sm fa-circle-question ms-4 me-2",style:R(o.value),onClick:s},null,4)):w("",!0)])]),a.value?(i(),h("p",{key:0,class:"infotext shadow m-0 ps-2 mb-1 p-1",onClick:s},[Vs,j(" "+k(r.infotext),1)])):w("",!0),n("div",Ts,[n("div",Ls,[n("span",Os,[n("span",null,[ae(r.$slots,"default",{},void 0,!0)])])])])])]),_:3},8,["fullwidth"]))}});const O=E(As,[["__scopeId","data-v-85517e3c"]]),pa=t=>(K("data-v-d228e49b"),t=t(),ee(),t),Ds={class:"d-flex flex-fill justify-content-between"},Ws=pa(()=>n("i",{class:"fa fa-xl fa-minus-square me-2"},null,-1)),Es=[Ws],Gs=["id","min","max","step"],js=pa(()=>n("i",{class:"fa fa-xl fa-plus-square ms-2"},null,-1)),Us=[js],zs={class:"d-flex justify-content-between align-items-start"},Ns={class:"minlabel ps-4"},Fs={class:"valuelabel"},qs={class:"maxlabel pe-4"},Rs=I({__name:"RangeInput",props:{id:{},min:{},max:{},step:{},unit:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(l){e("update:modelValue",l)}});function o(){s.value>a.min&&(s.value=s.value-a.step)}function r(){s.value<a.max&&(s.value=s.value+a.step)}return(l,c)=>(i(),h(W,null,[n("span",Ds,[n("span",{class:"minusButton",onClick:o},Es),Oe(n("input",{id:l.id,"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),type:"range",class:"form-range flex-fill",min:l.min,max:l.max,step:l.step},null,8,Gs),[[Kt,s.value,void 0,{number:!0}]]),n("span",{class:"plusButton",onClick:r},Us)]),n("span",zs,[n("span",Ns,k(l.min),1),n("span",Fs,k(s.value)+" "+k(l.unit),1),n("span",qs,k(l.max),1)])],64))}});const ve=E(Rs,[["__scopeId","data-v-d228e49b"]]),Hs=["id","value"],Js=I({__name:"RadioInput",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(l){e("update:modelValue",l)}});function o(l){return a.options[l][2]?{color:a.options[l][2]}:{color:"var(--color-fg)"}}function r(l){let c=l.target;for(;c&&!c.value&&c.parentElement;)c=c.parentElement;c.value&&(s.value=c.value)}return(l,c)=>(i(),h("div",null,[(i(!0),h(W,null,q(l.options,(u,g)=>(i(),h("button",{id:"radio-"+u[1],key:g,class:z(["btn btn-outline-secondary radiobutton me-2 mb-0 px-2",u[1]==s.value?"active":""]),value:u[1],style:R(o(g)),onClick:r},[n("span",{style:R(o(g))},[u[3]?(i(),h("i",{key:0,class:z(["fa-solid",u[3]])},null,2)):w("",!0),j(" "+k(u[0]),1)],4)],14,Hs))),128))]))}});const Le=E(Js,[["__scopeId","data-v-df222cbe"]]),Qs=t=>(K("data-v-ccd11e7e"),t=t(),ee(),t),Ys={class:"mt-2"},Zs=Qs(()=>n("p",{class:"heading ms-1"},"Sofortladen:",-1)),Xs={key:0},Ks=I({__name:"CPConfigInstant",props:{chargepoint:{}},setup(t){const a=le(t.chargepoint),s=[{name:"keine",id:"none"},{name:"EV-SoC",id:"soc"},{name:"Energiemenge",id:"amount"}];return(o,r)=>(i(),h("div",Ys,[Zs,m(O,{title:"Stromstärke",icon:"fa-bolt",fullwidth:!0},{default:b(()=>[m(ve,{id:"targetCurrent",modelValue:a.value.instantTargetCurrent,"onUpdate:modelValue":r[0]||(r[0]=l=>a.value.instantTargetCurrent=l),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1}),a.value.instantChargeLimitMode!="none"?(i(),h("hr",Xs)):w("",!0),m(O,{title:"Begrenzung",icon:"fa-hand"},{default:b(()=>[m(Le,{modelValue:a.value.instantChargeLimitMode,"onUpdate:modelValue":r[1]||(r[1]=l=>a.value.instantChargeLimitMode=l),options:s.map(l=>[l.name,l.id])},null,8,["modelValue","options"])]),_:1}),a.value.instantChargeLimitMode=="soc"?(i(),B(O,{key:1,title:"Maximaler SoC",icon:"fa-sliders"},{default:b(()=>[m(ve,{id:"maxSoc",modelValue:a.value.instantTargetSoc,"onUpdate:modelValue":r[2]||(r[2]=l=>a.value.instantTargetSoc=l),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1})):w("",!0),a.value.instantChargeLimitMode=="amount"?(i(),B(O,{key:2,title:"Zu ladende Energie",icon:"fa-sliders"},{default:b(()=>[m(ve,{id:"maxEnergy",modelValue:a.value.instantMaxEnergy,"onUpdate:modelValue":r[3]||(r[3]=l=>a.value.instantMaxEnergy=l),min:0,max:100,step:1,unit:"kWh"},null,8,["modelValue"])]),_:1})):w("",!0)]))}});const er=E(Ks,[["__scopeId","data-v-ccd11e7e"]]),tr={class:"form-check form-switch"},me=I({__name:"SwitchInput",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(o){e("update:modelValue",o)}});return(o,r)=>(i(),h("div",tr,[Oe(n("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>s.value=l),class:"form-check-input",type:"checkbox",role:"switch"},null,512),[[_t,s.value]])]))}}),ga=t=>(K("data-v-daf11c39"),t=t(),ee(),t),ar={class:"pt-2"},nr=ga(()=>n("p",{class:"heading ms-1"},"PV-Laden:",-1)),or={class:"form-check form-switch"},sr=ga(()=>n("hr",null,null,-1)),rr={key:2},lr=I({__name:"CPConfigPv",props:{chargepoint:{}},setup(t){const a=le(t.chargepoint),s=f({get(){return a.value.pvMinCurrent>5},set(r){r?a.value.pvMinCurrent=6:a.value.pvMinCurrent=0}}),o=f({get(){return a.value.pvMinSoc>0},set(r){r?a.value.pvMinSoc=50:a.value.pvMinSoc=0}});return(r,l)=>(i(),h("div",ar,[nr,m(O,{title:"Maximaler Ladestand",icon:"fa-battery-three-quarters",fullwidth:!0},{default:b(()=>[m(ve,{id:"maxSoc",modelValue:a.value.pvMaxSoc,"onUpdate:modelValue":l[0]||(l[0]=c=>a.value.pvMaxSoc=c),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1}),m(O,{title:"Einspeisegrenze beachten",icon:"fa-hand",fullwidth:!0},{default:b(()=>[n("div",or,[Oe(n("input",{id:"feedInLimitSwitch","onUpdate:modelValue":l[1]||(l[1]=c=>a.value.pvFeedInLimit=c),class:"form-check-input",type:"checkbox",role:"switch"},null,512),[[_t,a.value.pvFeedInLimit]])])]),_:1}),sr,m(O,{title:"Min-SoC-Laden",icon:"fa-battery-half",infotext:d($e).minsoc,fullwidth:!0},{default:b(()=>[m(me,{modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=c=>o.value=c)},null,8,["modelValue"])]),_:1},8,["infotext"]),o.value?(i(),B(O,{key:0,title:"...bis SoC",fullwidth:!0},{info:b(()=>[j(k(d($e).minsoc),1)]),default:b(()=>[m(ve,{id:"minSoc",modelValue:a.value.pvMinSoc,"onUpdate:modelValue":l[3]||(l[3]=c=>a.value.pvMinSoc=c),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1})):w("",!0),o.value?(i(),B(O,{key:1,title:"...mit Ladestrom",fullwidth:!0},{default:b(()=>[m(ve,{id:"minSocCurrent",modelValue:a.value.pvMinSocCurrent,"onUpdate:modelValue":l[4]||(l[4]=c=>a.value.pvMinSocCurrent=c),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1})):w("",!0),s.value||o.value?(i(),h("hr",rr)):w("",!0),m(O,{title:"Min+PV-Laden",icon:"fa-bolt",infotext:d($e).minpv,fullwidth:!0},{default:b(()=>[m(me,{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=c=>s.value=c)},null,8,["modelValue"])]),_:1},8,["infotext"]),s.value?(i(),B(O,{key:3,title:"...bei Ladestrom (minimal)",fullwidth:!0},{default:b(()=>[m(ve,{id:"minCurrent",modelValue:a.value.pvMinCurrent,"onUpdate:modelValue":l[6]||(l[6]=c=>a.value.pvMinCurrent=c),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1})):w("",!0)]))}});const ir=E(lr,[["__scopeId","data-v-daf11c39"]]),ma=t=>(K("data-v-1a32bb24"),t=t(),ee(),t),cr=["id"],dr={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},ur={class:"modal-content"},hr={class:"modal-header"},pr={class:"modal-title"},gr=ma(()=>n("button",{type:"button",class:"btn-close buttonTextSize d-flex justify-content-center pt-3 pb-0","data-bs-dismiss":"modal"},[n("i",{class:"fa-solid fa-lg fa-rectangle-xmark m-0 p-0"})],-1)),mr={class:"modal-body",style:{"background-color":"var(--color-bg)"}},fr=ma(()=>n("button",{class:"btn btn-secondary float-end mt-3 ms-1","data-bs-dismiss":"modal"}," Schließen ",-1)),_r=I({__name:"ModalComponent",props:{modalId:{}},setup(t){const e=t;return ze(()=>{}),(a,s)=>(i(),h("div",{id:e.modalId,class:"modal fade"},[n("div",dr,[n("div",ur,[n("div",hr,[n("h3",pr,[ae(a.$slots,"title",{},void 0,!0)]),gr]),n("div",mr,[ae(a.$slots,"default",{},void 0,!0),fr])])])],8,cr))}});const Lt=E(_r,[["__scopeId","data-v-1a32bb24"]]),vr=["value"],br=I({__name:"SelectInput",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(o){e("update:modelValue",o)}});return(o,r)=>Oe((i(),h("select",{id:"selectme","onUpdate:modelValue":r[0]||(r[0]=l=>s.value=l),class:"form-select"},[(i(!0),h(W,null,q(o.options,(l,c)=>(i(),h("option",{key:c,value:l[1]},k(l[0]),9,vr))),128))],512)),[[Aa,s.value]])}});const Ot=E(br,[["__scopeId","data-v-5e33ce1f"]]),yr=["id","onUpdate:modelValue","value"],wr=["for"],kr=I({__name:"CheckBoxInput",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(r){console.log("SET CHECKBOX"),e("update:modelValue",r)}});function o(r){return s.value[r]?{color:"var(--color-pv)"}:{color:"var(--color-menu)"}}return(r,l)=>(i(!0),h(W,null,q(r.options,(c,u)=>(i(),h("div",{key:u},[Oe(n("input",{id:"check"+u,"onUpdate:modelValue":g=>s.value[u]=g,class:"form-check-input",type:"checkbox",value:c},null,8,yr),[[_t,s.value[u]]]),n("label",{class:"form-check-label px-2",for:"check"+u,style:R(o(u))},k(r.options[u]),13,wr)]))),128))}});const fa=E(kr,[["__scopeId","data-v-534700e0"]]),$r=I({__name:"TimeInput",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=f({get(){return a.modelValue},set(o){e("update:modelValue",o)}});return(o,r)=>Oe((i(),h("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>s.value=l),type:"time",class:"form-control",name:"t"},null,512)),[[Kt,s.value]])}});const Pt=E($r,[["__scopeId","data-v-51c81cc3"]]),Sr={class:"container-fluid p-0 m-0"},xr={class:"row mt-2"},Pr={class:"col d-flex justify-content-end"},Mr=I({__name:"CPEditSchedule",props:{chargeTemplateId:{},planId:{}},emits:["deletePlan","abort","savePlan"],setup(t){const e=t,a=[["Einmalig","once"],["Täglich","daily"],["Wöchentlich","weekly"]],s=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],o=f(()=>ue[e.chargeTemplateId]),r=f(()=>{let l=o.value.chargemode.scheduled_charging.plans[e.planId];return l||na()});return(l,c)=>(i(),h("div",Sr,[m(O,{title:"Ladestand",fullwidth:!0},{default:b(()=>[m(ve,{id:"soc",modelValue:r.value.soc,"onUpdate:modelValue":c[0]||(c[0]=u=>r.value.soc=u),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1}),m(O,{title:"Zielzeit beachten",fullwidth:!0},{default:b(()=>[m(me,{modelValue:r.value.timed,"onUpdate:modelValue":c[1]||(c[1]=u=>r.value.timed=u)},null,8,["modelValue"])]),_:1}),m(O,{title:"Uhrzeit",fullwidth:!0},{default:b(()=>[m(Pt,{modelValue:r.value.time,"onUpdate:modelValue":c[2]||(c[2]=u=>r.value.time=u)},null,8,["modelValue"])]),_:1}),m(O,{title:"Wiederholungen",fullwidth:!0},{default:b(()=>[m(Ot,{modelValue:r.value.frequency.selected,"onUpdate:modelValue":c[3]||(c[3]=u=>r.value.frequency.selected=u),options:a},null,8,["modelValue"])]),_:1}),r.value.frequency.selected=="once"?(i(),B(O,{key:0,title:"Gültig ab",fullwidth:!0},{default:b(()=>[m(Ke,{modelValue:r.value.frequency.once[0],"onUpdate:modelValue":c[4]||(c[4]=u=>r.value.frequency.once[0]=u)},null,8,["modelValue"])]),_:1})):w("",!0),r.value.frequency.selected=="once"?(i(),B(O,{key:1,title:"Gültig bis",fullwidth:!0},{default:b(()=>[m(Ke,{modelValue:r.value.frequency.once[1],"onUpdate:modelValue":c[5]||(c[5]=u=>r.value.frequency.once[1]=u)},null,8,["modelValue"])]),_:1})):w("",!0),r.value.frequency.selected=="weekly"?(i(),B(O,{key:2,title:"Wochentage",fullwidth:!0},{default:b(()=>[m(fa,{modelValue:r.value.frequency.weekly,"onUpdate:modelValue":c[6]||(c[6]=u=>r.value.frequency.weekly=u),options:s},null,8,["modelValue"])]),_:1})):w("",!0),n("div",xr,[n("div",Pr,[n("button",{class:"btn btn-danger","data-bs-dismiss":"modal",onClick:c[7]||(c[7]=u=>l.$emit("deletePlan",l.planId))}," Löschen "),n("button",{class:"btn btn-warning ms-1","data-bs-dismiss":"modal",onClick:c[8]||(c[8]=u=>l.$emit("abort"))}," Abbrechen "),n("button",{class:"btn btn-success float-end ms-1","data-bs-dismiss":"modal",onClick:c[9]||(c[9]=u=>l.$emit("savePlan",l.planId))}," Speichern ")])])]))}});const Cr=E(Mr,[["__scopeId","data-v-119e0317"]]),Ae=t=>(K("data-v-399182a8"),t=t(),ee(),t),Ir=Ae(()=>n("p",{class:"heading ms-1 pt-2"},"Zielladen:",-1)),Br={class:"table table-borderless"},Vr=Ae(()=>n("thead",null,[n("tr",null,[n("th",{class:"tableheader"},"Ziel-SoC"),n("th",{class:"tableheader"},"Zeit"),n("th",{class:"tableheader"},"Wiederholung"),n("th",{class:"tableheader"})])],-1)),Tr={class:"tablecell"},Lr={class:"tablecell"},Or={class:"tablecell"},Ar={class:"tablecell left"},Dr=["data-bs-target","onClick"],Wr=Ae(()=>n("i",{class:"fas fa-lg fa-pen ms-2"},null,-1)),Er=[Wr],Gr=Ae(()=>n("td",{class:"emptycell"},null,-1)),jr=Ae(()=>n("td",{class:"emptycell"},null,-1)),Ur=Ae(()=>n("td",{class:"emptycell"},null,-1)),zr={class:"right"},Nr=["data-bs-target"],Fr=Ae(()=>n("i",{class:"fa-solid fa-xl fa-square-plus ms-2"},null,-1)),qr=[Fr],Rr=I({__name:"CPConfigScheduled",props:{chargeTemplate:{},chargeTemplateId:{}},setup(t){const e=t,a={daily:"Täglich",once:"Einmal",weekly:"Wöchentlich"},s="schedulesettingmodal"+e.chargeTemplateId,o=J(["0"]),r=f(()=>{let P=e.chargeTemplate.chargemode.scheduled_charging.plans;return P||{}});function l(P){return r.value[P].timed?r.value[P].time:"-"}function c(P){o[0]=P}function u(){oa(e.chargeTemplateId)}function g(){u()}function y(){console.log("abort edit")}function M(P){delete ue[e.chargeTemplateId].chargemode.scheduled_charging.plans[P],u()}function C(){let P=na();e.chargeTemplate.chargemode.scheduled_charging.plans||(ue[e.chargeTemplateId].chargemode.scheduled_charging.plans={});let x=0;Object.keys(r.value).forEach(U=>{+U>x&&(x=+U)}),x=x+1,ue[e.chargeTemplateId].chargemode.scheduled_charging.plans[x.toString()]=P,c(x.toString()),console.log(r.value),S()}function S(){let P=document.getElementById(s);P?new Da(P).show():console.log("NO MODAL ELEMENT")}return(P,x)=>(i(),h(W,null,[Ir,n("table",Br,[Vr,n("tbody",null,[(i(!0),h(W,null,q(Object.keys(r.value),U=>(i(),h("tr",{key:U},[n("td",Tr,k(r.value[U].soc)+" %",1),n("td",Lr,k(l(U)),1),n("td",Or,k(a[r.value[U].frequency.selected]),1),n("td",Ar,[n("span",{class:"editButton","data-bs-toggle":"modal","data-bs-target":"#"+s,onClick:Q=>c(U)},Er,8,Dr)])]))),128)),n("tr",null,[Gr,jr,Ur,n("td",zr,[n("span",{class:"addButton","data-bs-target":"#"+s,onClick:C},qr,8,Nr)])])])]),(i(!0),h(W,null,q(o,U=>(i(),B(Lt,{key:U,"modal-id":s},{title:b(()=>[j(" Zielladen - Parameter ")]),default:b(()=>[m(Cr,{"charge-template-id":P.chargeTemplateId,"plan-id":U,onSavePlan:g,onDeletePlan:M,onAbort:y},null,8,["charge-template-id","plan-id"])]),_:2},1024))),128))],64))}});const Hr=E(Rr,[["__scopeId","data-v-399182a8"]]),Jr={class:"container-fluid p-0 m-0"},Qr={class:"row"},Yr={class:"col d-flex justify-content-end"},Zr=I({__name:"CPEditTimeplan",props:{chargeTemplateId:{},planId:{}},emits:["deletePlan","abort","savePlan"],setup(t){const e=t,a=[["Einmalig","once"],["Täglich","daily"],["Wöchentlich","weekly"]],s=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],o=f(()=>ue[e.chargeTemplateId]),r=f(()=>{let l=o.value.time_charging.plans[e.planId];return l||aa()});return(l,c)=>(i(),h("div",Jr,[m(O,{title:"Beginn",fullwidth:!0},{default:b(()=>[m(Pt,{modelValue:r.value.time[0],"onUpdate:modelValue":c[0]||(c[0]=u=>r.value.time[0]=u)},null,8,["modelValue"])]),_:1}),m(O,{title:"Ende",fullwidth:!0},{default:b(()=>[m(Pt,{modelValue:r.value.time[1],"onUpdate:modelValue":c[1]||(c[1]=u=>r.value.time[1]=u)},null,8,["modelValue"])]),_:1}),m(O,{title:"Ladestrom",fullwidth:!0},{default:b(()=>[m(ve,{id:"current",modelValue:r.value.current,"onUpdate:modelValue":c[2]||(c[2]=u=>r.value.current=u),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1}),m(O,{title:"Wiederholungen",fullwidth:!0},{default:b(()=>[m(Ot,{modelValue:r.value.frequency.selected,"onUpdate:modelValue":c[3]||(c[3]=u=>r.value.frequency.selected=u),options:a},null,8,["modelValue"])]),_:1}),r.value.frequency.selected=="once"?(i(),B(O,{key:0,title:"Gültig ab",fullwidth:!0},{default:b(()=>[m(Ke,{modelValue:r.value.frequency.once[0],"onUpdate:modelValue":c[4]||(c[4]=u=>r.value.frequency.once[0]=u)},null,8,["modelValue"])]),_:1})):w("",!0),r.value.frequency.selected=="once"?(i(),B(O,{key:1,title:"Gültig bis",fullwidth:!0},{default:b(()=>[m(Ke,{modelValue:r.value.frequency.once[1],"onUpdate:modelValue":c[5]||(c[5]=u=>r.value.frequency.once[1]=u)},null,8,["modelValue"])]),_:1})):w("",!0),r.value.frequency.selected=="weekly"?(i(),B(O,{key:2,title:"Wochentage",fullwidth:!0},{default:b(()=>[m(fa,{modelValue:r.value.frequency.weekly,"onUpdate:modelValue":c[6]||(c[6]=u=>r.value.frequency.weekly=u),options:s},null,8,["modelValue"])]),_:1})):w("",!0),n("div",Qr,[n("div",Yr,[n("button",{class:"btn btn-danger",onClick:c[7]||(c[7]=u=>l.$emit("deletePlan",l.planId))}," Löschen "),n("button",{class:"btn btn-warning ms-1",onClick:c[8]||(c[8]=u=>l.$emit("abort"))}," Abbrechen "),n("button",{class:"btn btn-success float-end ms-1",onClick:c[9]||(c[9]=u=>l.$emit("savePlan",l.planId))}," Speichern ")])])]))}});const Xr=E(Zr,[["__scopeId","data-v-dbb0f7ee"]]),Pe=t=>(K("data-v-674bed04"),t=t(),ee(),t),Kr=Pe(()=>n("p",{class:"heading ms-1 pt-2"},"Zeitpläne:",-1)),el={class:"table table-borderless"},tl=Pe(()=>n("thead",null,[n("tr",null,[n("th",{class:"tableheader"},"Von"),n("th",{class:"tableheader"},"Bis"),n("th",{class:"tableheader"},"Ladestrom"),n("th",{class:"tableheader"},"Wiederholung"),n("th",{class:"tableheader right"})])],-1)),al={class:"tablecell"},nl={class:"tablecell"},ol={class:"tablecell"},sl={class:"tablecell"},rl={class:"tablecell left"},ll=["onClick"],il=Pe(()=>n("i",{class:"fas fa-lg fa-pen ms-2"},null,-1)),cl=[il],dl=Pe(()=>n("td",{class:"emptycell"},null,-1)),ul=Pe(()=>n("td",{class:"emptycell"},null,-1)),hl=Pe(()=>n("td",{class:"emptycell"},null,-1)),pl=Pe(()=>n("td",{class:"emptycell"},null,-1)),gl=Pe(()=>n("i",{class:"fa-solid fa-xl fa-square-plus ms-2"},null,-1)),ml=[gl],fl=I({__name:"CPConfigTimed",props:{chargeTemplate:{},chargeTemplateId:{}},setup(t){const e=t,a={daily:"Täglich",once:"Einmal",weekly:"Wöchentlich"},s=J(["0"]);function o(C){s[0]=C}const r=le(!1);function l(){oa(e.chargeTemplateId)}function c(){l(),r.value=!1}function u(){console.log("abort edit"),r.value=!1}function g(C){delete ue[e.chargeTemplateId].time_charging.plans[C],l(),r.value=!1}function y(){let C=aa();e.chargeTemplate.time_charging.plans||(ue[e.chargeTemplateId].time_charging.plans={});let S=0;Object.keys(M.value).forEach(P=>{+P>S&&(S=+P)}),S=S+1,ue[e.chargeTemplateId].time_charging.plans[S.toString()]=C,o(S.toString()),r.value=!0}const M=f(()=>{let C=e.chargeTemplate.time_charging.plans;return C||{}});return(C,S)=>(i(),h(W,null,[Kr,n("table",el,[tl,n("tbody",null,[(i(!0),h(W,null,q(Object.keys(M.value),P=>(i(),h("tr",{key:P},[n("td",al,k(M.value[P].time[0]),1),n("td",nl,k(M.value[P].time[1]),1),n("td",ol,k(M.value[P].current)+" A",1),n("td",sl,k(a[M.value[P].frequency.selected]),1),n("td",rl,[n("span",{class:"editButton",editPlan:"true",onClick:x=>o(P)},cl,8,ll)])]))),128)),n("tr",null,[dl,ul,hl,pl,n("td",{class:"tablecell right"},[n("span",{class:"addButton",onClick:y},ml)])])])]),r.value?(i(),B(xe,{key:0,"full-width":!0},{title:b(()=>[j(" Zeitplan bearbeiten ")]),default:b(()=>[m(Xr,{"charge-template-id":C.chargeTemplateId,"plan-id":s[0],onSavePlan:c,onDeletePlan:g,onAbort:u},null,8,["charge-template-id","plan-id"])]),_:1})):w("",!0)],64))}});const _l=E(fl,[["__scopeId","data-v-674bed04"]]),vl={class:"settingsheader mt-2 ms-1"},bl=I({__name:"CPConfigVehicle",props:{vehicleId:{}},setup(t){const e=t;return(a,s)=>(i(),h(W,null,[n("p",vl," Profile für "+k(d(X)[e.vehicleId].name)+": ",1),m(O,{title:"Ladeprofil",icon:"fa-sliders",fullwidth:!0},{default:b(()=>[m(Le,{modelValue:d(X)[e.vehicleId].chargeTemplateId,"onUpdate:modelValue":s[0]||(s[0]=o=>d(X)[e.vehicleId].chargeTemplateId=o),modelModifiers:{number:!0},options:Object.keys(d(ue)).map(o=>[d(ue)[+o].name,o])},null,8,["modelValue","options"])]),_:1}),m(O,{title:"Fahrzeug-Vorlage",icon:"fa-sliders",fullwidth:!0},{default:b(()=>[m(Le,{modelValue:d(X)[e.vehicleId].evTemplateId,"onUpdate:modelValue":s[1]||(s[1]=o=>d(X)[e.vehicleId].evTemplateId=o),modelModifiers:{number:!0},options:Object.keys(d(xt)).map(o=>[d(xt)[+o].name,o])},null,8,["modelValue","options"])]),_:1})],64))}});const yl=E(bl,[["__scopeId","data-v-fcb57a44"]]),wl=t=>(K("data-v-29abd227"),t=t(),ee(),t),kl=wl(()=>n("p",{class:"settingsheader mt-2 ms-1"},"Ladepunkt:",-1)),$l=I({__name:"CPChargeConfig",props:{chargepoint:{}},emits:["closeConfig"],setup(t){const a=t.chargepoint;return(s,o)=>(i(),h(W,null,[kl,m(O,{title:"Lademodus",icon:"fa-charging-station",infotext:d($e).chargemode,fullwidth:!0},{default:b(()=>[m(Le,{modelValue:d(a).chargeMode,"onUpdate:modelValue":o[0]||(o[0]=r=>d(a).chargeMode=r),options:Object.keys(d(se)).map(r=>[d(se)[r].name,r,d(se)[r].color,d(se)[r].icon])},null,8,["modelValue","options"])]),_:1},8,["infotext"]),m(O,{title:"Fahrzeug",icon:"fa-car",infotext:d($e).vehicle,fullwidth:!0},{default:b(()=>[m(Le,{modelValue:d(a).connectedVehicle,"onUpdate:modelValue":o[1]||(o[1]=r=>d(a).connectedVehicle=r),modelModifiers:{number:!0},options:Object.values(d(X)).map(r=>[r.name,r.id])},null,8,["modelValue","options"])]),_:1},8,["infotext"]),m(O,{title:"Sperren",icon:"fa-lock",infotext:d($e).locked,fullwidth:!0},{default:b(()=>[m(me,{modelValue:d(a).isLocked,"onUpdate:modelValue":o[2]||(o[2]=r=>d(a).isLocked=r)},null,8,["modelValue"])]),_:1},8,["infotext"]),m(O,{title:"Priorität",icon:"fa-star",infotext:d($e).priority,fullwidth:!0},{default:b(()=>[m(me,{modelValue:d(a).hasPriority,"onUpdate:modelValue":o[3]||(o[3]=r=>d(a).hasPriority=r)},null,8,["modelValue"])]),_:1},8,["infotext"]),m(O,{title:"Zeitplan",icon:"fa-clock",infotext:d($e).timeplan,fullwidth:!0},{default:b(()=>[m(me,{modelValue:d(a).scheduledCharging,"onUpdate:modelValue":o[4]||(o[4]=r=>d(a).scheduledCharging=r)},null,8,["modelValue"])]),_:1},8,["infotext"])],64))}});const Sl=E($l,[["__scopeId","data-v-29abd227"]]),Ne=t=>(K("data-v-963883cd"),t=t(),ee(),t),xl={class:"status-string"},Pl={style:{color:"red"}},Ml={class:"m-0 mt-4 p-0"},Cl={class:"nav nav-tabs nav-justified mx-1 mt-1",role:"tablist"},Il=["data-bs-target"],Bl=Ne(()=>n("i",{class:"fa-solid fa-charging-station"},null,-1)),Vl=[Bl],Tl=["data-bs-target"],Ll=Ne(()=>n("i",{class:"fa-solid fa-lg fa-bolt"},null,-1)),Ol=[Ll],Al=["data-bs-target"],Dl=Ne(()=>n("i",{class:"fa-solid fa-solar-panel me-1"},null,-1)),Wl=[Dl],El=["data-bs-target"],Gl=Ne(()=>n("i",{class:"fa-solid fa-bullseye me-1"},null,-1)),jl=[Gl],Ul=["data-bs-target"],zl=Ne(()=>n("i",{class:"fa-solid fa-clock"},null,-1)),Nl=[zl],Fl=["data-bs-target"],ql=Ne(()=>n("i",{class:"fa-solid fa-rectangle-list"},null,-1)),Rl=[ql],Hl={id:"settingsPanes",class:"tab-content mx-1 p-1 pb-3"},Jl=["id"],Ql=["id"],Yl=["id"],Zl=["id"],Xl=["id"],Kl=["id"],ei=I({__name:"CPChargeConfigPanel",props:{chargepoint:{}},emits:["closeConfig"],setup(t){const a=t.chargepoint,s=f(()=>ue[a.chargeTemplate]),o=f(()=>a.id);return ze(()=>{}),(r,l)=>(i(),h(W,null,[m(O,{title:"Status",icon:"fa-info-circle",fullwidth:!0},{default:b(()=>[n("span",xl,k(d(a).stateStr),1)]),_:1}),d(a).faultState!=0?(i(),B(O,{key:0,title:"Fehler"},{default:b(()=>[n("span",Pl,k(d(a).faultStr),1)]),_:1})):w("",!0),n("div",Ml,[n("nav",Cl,[n("a",{class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#chargeSettings"+o.value},Vl,8,Il),r.chargepoint.chargeMode=="instant_charging"?(i(),h("a",{key:0,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#instantSettings"+o.value},Ol,8,Tl)):w("",!0),r.chargepoint.chargeMode=="pv_charging"?(i(),h("a",{key:1,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#pvSettings"+o.value},Wl,8,Al)):w("",!0),r.chargepoint.chargeMode=="scheduled_charging"?(i(),h("a",{key:2,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#scheduledSettings"+o.value},jl,8,El)):w("",!0),r.chargepoint.scheduledCharging?(i(),h("a",{key:3,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#timeSettings"+o.value},Nl,8,Ul)):w("",!0),n("a",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#carSettings"+o.value},Rl,8,Fl)]),n("div",Hl,[n("div",{id:"chargeSettings"+o.value,class:"tab-pane active",role:"tabpanel","aria-labelledby":"instant-tab"},[m(Sl,{chargepoint:r.chargepoint},null,8,["chargepoint"])],8,Jl),n("div",{id:"instantSettings"+o.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"instant-tab"},[m(er,{chargepoint:d(a),vehicles:d(X),"charge-templates":d(ue)},null,8,["chargepoint","vehicles","charge-templates"])],8,Ql),n("div",{id:"pvSettings"+o.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"pv-tab"},[m(ir,{chargepoint:d(a),vehicles:d(X),"charge-templates":d(ue)},null,8,["chargepoint","vehicles","charge-templates"])],8,Yl),n("div",{id:"scheduledSettings"+o.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"scheduled-tab"},[s.value!=null?(i(),B(Hr,{key:0,"charge-template":s.value,"charge-template-id":d(a).chargeTemplate},null,8,["charge-template","charge-template-id"])):w("",!0)],8,Zl),n("div",{id:"timeSettings"+o.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"time-tab"},[s.value!=null?(i(),B(_l,{key:0,"charge-template":s.value,"charge-template-id":d(a).chargeTemplate},null,8,["charge-template","charge-template-id"])):w("",!0)],8,Xl),n("div",{id:"carSettings"+o.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"car-tab"},[d(X)[d(a).connectedVehicle]!=null?(i(),B(yl,{key:0,"vehicle-id":d(a).connectedVehicle},null,8,["vehicle-id"])):w("",!0)],8,Kl)])])],64))}});const dt=E(ei,[["__scopeId","data-v-963883cd"]]),ti=I({__name:"BatterySymbol",props:{soc:{}},setup(t){const e=t,a=f(()=>e.soc<=10?"fa-battery-empty":e.soc<50?"fa-battery-quarter":e.soc<75?"fa-battery-half":e.soc<95?"fa-battery-three-quarters":"fa-battery-full");return(s,o)=>(i(),h("span",null,[n("i",{class:z(["fa batIcon",a.value])},null,2),j(" "+k(s.soc+"%"),1)]))}});const At=E(ti,[["__scopeId","data-v-49be699a"]]),_a=I({__name:"FormatWattH",props:{wattH:{}},setup(t){const e=t,a=f(()=>Ze(e.wattH,_.decimalPlaces));return(s,o)=>(i(),h("span",null,k(a.value),1))}}),ai=t=>(K("data-v-349e7414"),t=t(),ee(),t),ni={class:"wb-widget p-0 m-0 shadow"},oi={class:"d-flex justify-content-between"},si={class:"m-4 mb-3"},ri=ai(()=>n("div",{class:"p-0"},"(title goes here)",-1)),li={class:"p-4 pb-0 col-4 m-0",style:{"text-align":"right"}},ii={class:"container-fluid p-0"},ci=I({__name:"WbWidgetFlex",props:{variableWidth:{type:Boolean},fullWidth:{type:Boolean}},setup(t){const e=t,a=f(()=>e.fullWidth?"col-12":e.variableWidth&&_.preferWideBoxes?"col-lg-6":"col-lg-4");return(s,o)=>(i(),h("div",{class:z(["p-2 m-0 d-flex",a.value])},[n("div",ni,[n("div",oi,[n("h3",si,[ae(s.$slots,"title",{},()=>[ri],!0),ae(s.$slots,"subtitle",{},void 0,!0)]),n("div",li,[ae(s.$slots,"buttons",{},void 0,!0)])]),n("div",ii,[ae(s.$slots,"default",{},void 0,!0)])])],2))}});const ut=E(ci,[["__scopeId","data-v-349e7414"]]),tt=t=>(K("data-v-faf7dfe6"),t=t(),ee(),t),di=tt(()=>n("span",{class:"fa-solid fa-charging-station"}," ",-1)),ui=tt(()=>n("span",{class:"fa-solid fa-lg ps-1 fa-ellipsis-vertical"},null,-1)),hi=[ui],pi={key:0},gi={class:"col m-0 mb-1 p-0 d-flex justify-content-between"},mi={class:"col m-0 p-0 d-flex justify-content-between"},fi={class:"row m-0 p-0 mt-3 mb-0"},_i={class:"col d-flex justify-content-center p-0 m-0"},vi={key:1,class:"row m-0 mt-0 p-0"},bi={class:"col m-0 p-0"},yi={key:0},wi={class:"col"},ki=tt(()=>n("i",{class:"fa-solid fa-sm fa-car me-2"},null,-1)),$i={key:0,class:"me-1 fa-solid fa-xs fa-star ps-1"},Si={class:"row m-0 p-1 pt-2 mb-3"},xi={class:"m-0 p-0 d-flex justify-content-between"},Pi={key:0,class:"me-1 fa-solid fa-xs fa-clock ps-1"},Mi=tt(()=>n("span",{class:"fas fa-gear"}," ",-1)),Ci=tt(()=>n("span",{class:"fa-solid fa-lg ps-1 fa-circle-check"},null,-1)),Ii=[Ci],Bi=I({__name:"CPChargePoint",props:{chargepoint:{},fullWidth:{type:Boolean}},setup(t){const e=t,a=f({get(){return e.chargepoint.chargeMode},set(C){T[e.chargepoint.id].chargeMode=C}}),s=f(()=>(Math.round(e.chargepoint.current*10)/10).toLocaleString(void 0)+" A"),o=f(()=>Math.round(e.chargepoint.rangeCharged).toString()+" "+e.chargepoint.rangeUnit),r=f(()=>e.chargepoint.isLocked?"Gesperrt":e.chargepoint.isCharging?"Lädt":e.chargepoint.isPluggedIn?"Bereit":"Frei"),l=f(()=>e.chargepoint.isLocked?"var(--color-evu)":e.chargepoint.isCharging?"var(--color-charging)":e.chargepoint.isPluggedIn?"var(--color-battery)":"var(--color-axis)"),c=f(()=>{let C="";return e.chargepoint.isLocked?C="fa-lock":e.chargepoint.isCharging?C=" fa-bolt":e.chargepoint.isPluggedIn&&(C="fa-plug"),"fa "+C}),u=f(()=>{switch(e.chargepoint.chargeMode){case"stop":return{color:"var(--fg)"};default:return{color:se[e.chargepoint.chargeMode].color}}}),g=f(()=>e.chargepoint.soc),y=f(()=>({color:e.chargepoint.color})),M=le(!1);return(C,S)=>(i(),h(W,null,[M.value?w("",!0):(i(),B(xe,{key:0,"variable-width":!0,"full-width":e.fullWidth},{title:b(()=>[n("span",{style:R(y.value),onClick:S[0]||(S[0]=P=>M.value=!M.value)},[di,j(" "+k(e.chargepoint.name),1)],4)]),buttons:b(()=>[n("span",{class:"ms-2 pt-1",style:R(u.value),onClick:S[1]||(S[1]=P=>M.value=!M.value)},hi,4)]),footer:b(()=>[M.value?w("",!0):(i(),h("div",yi,[n("div",{class:"row",onClick:S[5]||(S[5]=P=>M.value=!M.value)},[n("div",wi,[n("h3",null,[ki,j(" "+k(C.chargepoint.vehicleName)+" ",1),C.chargepoint.hasPriority?(i(),h("span",$i)):w("",!0)])])]),n("div",Si,[n("div",xi,[m(oe,{heading:"Ladestand:"},{default:b(()=>[C.chargepoint.isSocConfigured?(i(),B(At,{key:0,soc:g.value,class:"me-2"},null,8,["soc"])):w("",!0),C.chargepoint.isSocManual?(i(),h("i",{key:1,class:"fa-solid fa-sm fas fa-edit",style:R({color:"var(--color-menu)"})},null,4)):w("",!0),C.chargepoint.isSocManual?w("",!0):(i(),h("i",{key:2,class:"fa-solid fa-sm fa-sync",style:R({color:"var(--color-menu)"})},null,4))]),_:1}),m(oe,{heading:"Reichweite:"},{default:b(()=>[j(k(d(X)[e.chargepoint.connectedVehicle]?Math.round(d(X)[1].range):0)+" km ",1)]),_:1}),m(oe,{heading:"Zeitplan:"},{default:b(()=>[C.chargepoint.scheduledCharging?(i(),h("span",Pi)):w("",!0),j(" "+k(e.chargepoint.scheduledCharging?"Ja":"Nein"),1)]),_:1})])])]))]),default:b(()=>[M.value?w("",!0):(i(),h("div",pi,[n("div",{class:"row m-1 mt-0 p-0",onClick:S[2]||(S[2]=P=>M.value=!M.value)},[n("div",gi,[m(oe,{heading:"Status:"},{default:b(()=>[n("span",{style:R({color:l.value})},[n("i",{class:z(c.value)},null,2),j(" "+k(r.value),1)],4)]),_:1}),m(oe,{heading:"Geladen:"},{default:b(()=>[m(_a,{"watt-h":C.chargepoint.chargedSincePlugged},null,8,["watt-h"])]),_:1}),m(oe,{heading:"gel. Reichw.:"},{default:b(()=>[j(k(o.value),1)]),_:1})])]),e.chargepoint.power>0?(i(),h("div",{key:0,class:"row m-1 p-0",onClick:S[3]||(S[3]=P=>M.value=!M.value)},[n("div",mi,[m(oe,{heading:"Leistung:"},{default:b(()=>[m(Bt,{watt:e.chargepoint.power},null,8,["watt"])]),_:1}),m(oe,{heading:"Stromstärke:"},{default:b(()=>[j(k(s.value),1)]),_:1}),m(oe,{heading:"Phasen:"},{default:b(()=>[j(k(e.chargepoint.phasesInUse),1)]),_:1})])])):w("",!0),n("div",fi,[n("div",_i,[m(da,{id:"chargemode-"+C.chargepoint.name,modelValue:a.value,"onUpdate:modelValue":S[4]||(S[4]=P=>a.value=P),options:Object.keys(d(se)).map(P=>({text:d(se)[P].name,value:P,color:d(se)[P].color,icon:d(se)[P].icon,active:d(se)[P].mode==C.chargepoint.chargeMode}))},null,8,["id","modelValue","options"])])])])),M.value?(i(),h("div",vi,[n("div",bi,[C.chargepoint!=null?(i(),B(dt,{key:0,chargepoint:C.chargepoint},null,8,["chargepoint"])):w("",!0)])])):w("",!0)]),_:1},8,["full-width"])),M.value?(i(),B(ut,{key:1,"full-width":e.fullWidth},{title:b(()=>[n("span",{style:R(y.value),onClick:S[6]||(S[6]=P=>M.value=!M.value)},[Mi,j(" Einstellungen "+k(e.chargepoint.name),1)],4)]),buttons:b(()=>[n("span",{class:"ms-2 pt-1",style:R(u.value),onClick:S[7]||(S[7]=P=>M.value=!M.value)},Ii,4)]),default:b(()=>[C.chargepoint!=null?(i(),B(dt,{key:0,chargepoint:C.chargepoint},null,8,["chargepoint"])):w("",!0)]),_:1},8,["full-width"])):w("",!0)],64))}});const Vi=E(Bi,[["__scopeId","data-v-faf7dfe6"]]),Ti={class:"tablerow"},Li={class:"d-flex flex-wrap"},Oi={key:0,class:"fa-solid fa-xs fa-star"},Ai={key:1,class:"fa-solid fa-xs fa-clock"},Di={class:"tablecell left"},Wi={class:"d-flex flex-column"},Ei={key:0,class:"flex-wrap"},Gi=["data-bs-target"],ji={class:"d-flex flex-column"},Ui={class:"d-flex align-items-center flex-wrap"},zi={class:"d-flex align-items-center me-1"},Ni={class:"badge phasesInUse rounded-pill"},Fi=["data-bs-target"],qi={class:"d-flex flex-column"},Ri={class:"me-2"},Hi={class:"buttoncell right"},Ji=["data-bs-target"],Qi={key:0},Yi={colspan:"5",class:"px-0"},Zi=I({__name:"CPSListItem",props:{chargepoint:{}},setup(t){const e=t,a=le(!1),s=f(()=>se[e.chargepoint.chargeMode].icon),o=f(()=>{let x="";return e.chargepoint.isLocked?x="fa-lock":e.chargepoint.isCharging?x=" fa-bolt":e.chargepoint.isPluggedIn&&(x="fa-plug"),"fa "+x}),r=f(()=>{let x={color:"var(--color-axis)"};return e.chargepoint.isLocked?x.color="var(--color-evu)":e.chargepoint.isCharging?x.color="var(--color-charging)":e.chargepoint.isPluggedIn&&(x.color="var(--color-battery)"),x}),l=f(()=>{switch(e.chargepoint.chargeMode){case"stop":return{color:"var(--fg)"};default:return{color:se[e.chargepoint.chargeMode].color}}}),c=f(()=>Be(e.chargepoint.power,_.decimalPlaces)),u=f(()=>e.chargepoint.current+" A"),g=f(()=>e.chargepoint.phasesInUse),y=f(()=>e.chargepoint.dailyYield>0?Ze(e.chargepoint.dailyYield,_.decimalPlaces):"0 Wh"),M=f(()=>e.chargepoint.averageConsumption>0&&e.chargepoint.dailyYield>0?"("+Math.round(e.chargepoint.dailyYield/e.chargepoint.averageConsumption/10).toString()+" km)":""),C=f(()=>se[e.chargepoint.chargeMode].name);function S(){return{color:e.chargepoint.color}}function P(){a.value=!a.value}return(x,U)=>(i(),h(W,null,[n("tr",Ti,[n("td",{class:"tablecell left",onClick:P},[n("div",Li,[n("span",null,[n("i",{class:z([o.value,"me-1"]),style:R(r.value)},null,6),n("span",{class:"me-1",style:R(S())},k(x.chargepoint.name),5)]),n("span",null,[x.chargepoint.hasPriority?(i(),h("i",Oi)):w("",!0),x.chargepoint.scheduledCharging?(i(),h("i",Ai)):w("",!0)])])]),n("td",Di,[n("div",Wi,[n("span",null,k(x.chargepoint.vehicleName),1),x.chargepoint.isSocConfigured?(i(),h("span",Ei,[m(At,{class:"me-1",soc:x.chargepoint.soc},null,8,["soc"]),x.chargepoint.isSocManual?(i(),h("i",{key:0,class:"fa-solid fa-sm fas fa-edit me-2",style:R({color:"var(--color-menu)"})},null,4)):w("",!0),x.chargepoint.isSocManual?w("",!0):(i(),h("i",{key:1,class:"fa-solid fa-sm fa-sync me-2",style:R({color:"var(--color-menu)"})},null,4))])):w("",!0)])]),n("td",{class:"tablecell left","data-bs-toggle":"modal","data-bs-target":"#cpsconfig-"+x.chargepoint.id},[n("div",ji,[n("span",Ui,[n("span",null,k(c.value),1),n("span",zi,[n("span",Ni,k(g.value),1),n("span",null,k(u.value),1)])]),n("span",{style:R(l.value)},[n("i",{class:z(["fa me-1",s.value])},null,2),j(" "+k(C.value),1)],4)])],8,Gi),n("td",{class:"tablecell left","data-bs-toggle":"modal","data-bs-target":"#cpsconfig-"+x.chargepoint.id},[n("div",qi,[n("span",Ri,k(y.value),1),n("span",null,k(M.value),1)])],8,Fi),n("td",Hi,[n("span",{class:"fa-solid fa-lg fa-edit ps-1 tableicon","data-bs-toggle":"modal","data-bs-target":"#cpsconfig-"+x.chargepoint.id},null,8,Ji)])]),a.value?(i(),h("tr",Qi,[n("td",Yi,[a.value?(i(),B(dt,{key:0,chargepoint:x.chargepoint,onCloseConfig:P},null,8,["chargepoint"])):w("",!0)])])):w("",!0)],64))}});const Xi=E(Zi,[["__scopeId","data-v-e5ea1042"]]),Ki=t=>(K("data-v-76f208ee"),t=t(),ee(),t),ec={class:"table table-borderless px-0"},tc=Ki(()=>n("thead",null,[n("tr",null,[n("th",{class:"tableheader alignleft"},[n("i",{class:"fa-solid fa-lg fa-charging-station ps-2"})]),n("th",{class:"tableheader alignleft"},[n("i",{class:"fa-solid fa-lg fa-car ps-2"})]),n("th",{class:"tableheader alignleft"},[n("i",{class:"fa-solid fa-lg fa-bolt ps-2"})]),n("th",{class:"tableheader alignleft"},[n("i",{class:"fa-solid fa-lg fa-car-battery ps-2"})]),n("th",{class:"tableheader alignright"})])],-1)),ac=I({__name:"CPSimpleList",setup(t){const e=f(()=>Object.values(T));return(a,s)=>(i(),B(xe,null,{title:b(()=>[j(" Ladepunkte ")]),default:b(()=>[n("table",ec,[tc,n("tbody",null,[(i(!0),h(W,null,q(e.value,o=>(i(),B(Xi,{key:o.id,chargepoint:o},null,8,["chargepoint"]))),128))])]),(i(!0),h(W,null,q(e.value,o=>(i(),B(Lt,{key:o.id,"modal-id":"cpsconfig-"+o.id},{title:b(()=>[j(" Konfiguration: "+k(o.name),1)]),default:b(()=>[o!=null?(i(),B(dt,{key:0,chargepoint:o},null,8,["chargepoint"])):w("",!0)]),_:2},1032,["modal-id"]))),128))]),_:1}))}});const nc=E(ac,[["__scopeId","data-v-76f208ee"]]);const wt=I({__name:"ChargePointList",setup(t){let e,a;const s=f(()=>{let l=Object.values(T);return r(),l}),o=f(()=>{switch(Object.values(T).length){case 0:return _.preferWideBoxes?"col-lg-6":"col-lg-4";case 1:return _.preferWideBoxes?"col-lg-6":"col-lg-4";case 2:return _.preferWideBoxes?"col-lg-12":"col-lg-8 ";default:return"col-lg-12"}});function r(){if(e){let l="1";if(Ie.value)switch(Object.values(T).length){case 0:case 1:l="1";break;case 2:l="2";break;default:l="3"}a.setAttribute("slides-per-view",l),e.update()}}return ze(()=>{let l=document.querySelector(".swiper-chargepoints");l&&(a=l,e=a.swiper),window.addEventListener("resize",r)}),(l,c)=>(i(),h(W,null,[d(_).simpleCpList?w("",!0):(i(),h("swiper-container",{key:0,"space-between":0,"slides-per-view":1,pagination:{clickable:!0},class:z(["cplist m-0 p-0 swiper-chargepoints d-flex align-items-stretch",o.value])},[(i(!0),h(W,null,q(s.value,u=>(i(),h("swiper-slide",{key:u.id},[n("div",{class:z([d(Ie)?"mb-0":"mb-5","d-flex align-items-stretch flex-fill"])},[m(Vi,{chargepoint:u,"full-width":!0},null,8,["chargepoint"])],2)]))),128))],2)),d(_).simpleCpList?(i(),B(nc,{key:1})):w("",!0)],64))}}),oc={class:"container-fluid p-0 m-0"},sc={class:"row p-0 m-0"},rc={class:"d-grid gap-2"},lc=["onClick"],ic={class:"col-md-4 p-1"},cc={class:"d-grid gap-2"},dc={key:0},uc=n("hr",null,null,-1),hc=n("div",{class:"row"},[n("div",{class:"col text-center"},"Vorrang im Lademodus PV-Laden:")],-1),pc={class:"row justify-content-center m-1 p-0"},gc={class:"col-6 p-1 m-0"},mc={class:"d-grid gap-2"},fc=n("span",{class:"fas fa-car"}," ",-1),_c={class:"col-6 p-1 m-0"},vc={class:"d-grid gap-2"},bc=n("span",{class:"fas fa-car-battery"}," ",-1),yc=I({__name:"BBSelect",props:{cpId:{}},setup(t){const e=t,a=[{mode:"instant_charging",name:"Sofort",color:"var(--color-charging)"},{mode:"pv_charging",name:"PV",color:"var(--color-pv)"},{mode:"scheduled_charging",name:"Zielladen",color:"var(--color-battery)"},{mode:"standby",name:"Standby",color:"var(--color-axis)"},{mode:"stop",name:"Stop",color:"var(--color-axis)"}],s=f(()=>T[e.cpId]);function o(g){return g==s.value.chargeMode?"btn btn-success buttonTextSize":"btn btn-secondary buttonTextSize"}function r(g){switch(g){case"ev":return re.pvBatteryPriority?"btn-secondary":"btn-success";case"bat":return re.pvBatteryPriority?"btn-success":"btn-secondary";default:return""}}function l(g){s.value.chargeMode=g}function c(g){s.value.isLocked=g}function u(g){re.pvBatteryPriority=g}return(g,y)=>(i(),h("div",oc,[n("div",sc,[(i(),h(W,null,q(a,(M,C)=>n("div",{key:C,class:"col-md-4 p-1"},[n("div",rc,[n("button",{type:"button",class:z(o(M.mode)),style:{},onClick:S=>l(M.mode)},k(M.name),11,lc)])])),64)),n("div",ic,[n("div",cc,[s.value.isLocked?(i(),h("button",{key:0,type:"button",class:"btn btn-outline-success buttonTextSize","data-bs-dismiss":"modal",onClick:y[0]||(y[0]=M=>c(!1))}," Entsperren ")):w("",!0),s.value.isLocked?w("",!0):(i(),h("button",{key:1,type:"button",class:"btn btn-outline-danger buttonTextSize","data-bs-dismiss":"modal",onClick:y[1]||(y[1]=M=>c(!0))}," Sperren "))])])]),d(re).isBatteryConfigured&&s.value.chargeMode=="pv_charging"?(i(),h("div",dc,[uc,hc,n("div",pc,[n("div",gc,[n("div",mc,[n("button",{id:"evPriorityBtn",type:"button",class:z(["priorityModeBtn btn btn-secondary buttonTextSize",r("ev")]),"data-dismiss":"modal",priority:"1",onClick:y[2]||(y[2]=M=>u(!1))},[j(" EV "),fc],2)])]),n("div",_c,[n("div",vc,[n("button",{id:"batteryPriorityBtn",type:"button",class:z(["priorityModeBtn btn btn-secondary buttonTextSize",r("bat")]),"data-dismiss":"modal",priority:"0",onClick:y[3]||(y[3]=M=>u(!0))},[j(" Speicher "),bc],2)])])])])):w("",!0)]))}}),wc={class:"col-lg-4 p-0 m-0 mt-1"},kc={class:"d-grid gap-2"},$c=["data-bs-target"],Sc={class:"m-0 p-0 d-flex justify-content-between align-items-center"},xc={class:"mx-1 badge rounded-pill smallTextSize plugIndicator"},Pc={key:0,class:"ms-2"},Mc={class:"m-0 p-0"},Cc={key:0,class:"ps-1"},Ic=I({__name:"BbChargeButton",props:{chargepoint:{}},setup(t){const e=t,a="chargeSelectModal"+e.chargepoint.id,s=f(()=>se[e.chargepoint.chargeMode].name),o=f(()=>{let y={background:"var(--color-menu)"};return e.chargepoint.isLocked?y.background="var(--color-evu)":e.chargepoint.isCharging?y.background="var(--color-charging)":e.chargepoint.isPluggedIn&&(y.background="var(--color-battery)"),y}),r=f(()=>{if(se){let y={background:se[e.chargepoint.chargeMode].color,color:"white"};switch(e.chargepoint.chargeMode){case ce.instant_charging:e.chargepoint.isCharging&&!e.chargepoint.isLocked&&(y=g(y));break;case ce.standby:case ce.stop:y.background="darkgrey",y.color="black";break;case ce.scheduled_charging:e.chargepoint.isPluggedIn&&!e.chargepoint.isCharging&&!e.chargepoint.isLocked&&(y=g(y));break}return y}else return{background:"var(--color-bg)",color:"var(--color-bg)"}}),l=f(()=>se?se[e.chargepoint.chargeMode].icon:""),c=f(()=>re.pvBatteryPriority?"fa-car-battery":"fa-car"),u=f(()=>{let y="fa-ellipsis";return e.chargepoint.isLocked?y="fa-lock":e.chargepoint.isCharging?y=" fa-bolt":e.chargepoint.isPluggedIn&&(y="fa-plug"),"fa "+y});function g(y){let M=y.color;return y.color=y.background,y.background=M,y}return(y,M)=>(i(),h("div",wc,[n("div",kc,[n("button",{type:"button",class:"btn mx-1 mb-0 p-1 regularTextSize chargeButton shadow",style:R(o.value),"data-bs-toggle":"modal","data-bs-target":"#"+a},[n("div",Sc,[n("span",xc,[n("i",{class:z(u.value)},null,2),y.chargepoint.isCharging?(i(),h("span",Pc,k(d(Be)(y.chargepoint.power)),1)):w("",!0)]),n("span",Mc,k(y.chargepoint.name),1),n("span",{class:"mx-2 m-0 badge rounded-pill smallTextSize modeIndicator",style:R(r.value)},[n("i",{class:z(["fa me-1",l.value])},null,2),j(" "+k(s.value)+" ",1),y.chargepoint.chargeMode==d(ce).pv_charging&&d(re).isBatteryConfigured?(i(),h("span",Cc,[j(" ( "),n("i",{class:z(["fa m-0",c.value])},null,2),j(") ")])):w("",!0)],4)])],12,$c)]),m(Lt,{"modal-id":a},{title:b(()=>[j(" Lademodus für "+k(y.chargepoint.name),1)]),default:b(()=>[m(yc,{"cp-id":y.chargepoint.id},null,8,["cp-id"])]),_:1})]))}});const Bc=E(Ic,[["__scopeId","data-v-888cf4ca"]]),Vc={class:"row p-0 mt-0 mb-1 m-0"},Tc={class:"col p-0 m-0"},Lc={class:"container-fluid p-0 m-0"},Oc={class:"row p-0 m-0 d-flex justify-content-center"},Ac=I({__name:"ButtonBar",setup(t){return(e,a)=>(i(),h("div",Vc,[n("div",Tc,[n("div",Lc,[n("div",Oc,[(i(!0),h(W,null,q(d(T),(s,o)=>(i(),B(Bc,{key:o,chargepoint:s,"charge-point-count":Object.values(d(T)).length},null,8,["chargepoint","charge-point-count"]))),128))])])])]))}}),Dt=t=>(K("data-v-694d07cd"),t=t(),ee(),t),Dc=Dt(()=>n("span",{class:"fas fa-car-battery me-2",style:{color:"var(--color-battery)"}}," ",-1)),Wc=Dt(()=>n("span",{class:"sh-title py-4"},"Speicher",-1)),Ec={class:"col m-0 mb-1 p-0 d-flex justify-content-between"},Gc={class:"col m-0 mt-3 mb-1 p-0 d-flex justify-content-between"},jc=Dt(()=>n("span",{class:"todaystring mt-4 float-right"}," Heute:",-1)),Uc=I({__name:"BatteryList",setup(t){const e=f(()=>N.batOut.power>0?"Liefert":A.batIn.power>0?"Lädt":"Bereit"),a=f(()=>Be(N.batOut.power+A.batIn.power));return(s,o)=>d(re).isBatteryConfigured?(i(),B(xe,{key:0,"variable-width":!0},{title:b(()=>[Dc,Wc]),default:b(()=>[n("div",Ec,[m(oe,{heading:"Ladestand:"},{default:b(()=>[m(At,{soc:d(re).batterySoc,class:"me-2"},null,8,["soc"])]),_:1}),m(oe,{heading:"Status:"},{default:b(()=>[n("span",null,k(e.value),1)]),_:1}),m(oe,{heading:"Leistung:"},{default:b(()=>[n("span",null,k(a.value),1)]),_:1})]),n("div",Gc,[m(oe,{heading:""},{default:b(()=>[jc]),_:1}),m(oe,{heading:"Geladen:"},{default:b(()=>[n("span",null,k(d(Ze)(d(A).batIn.energy)),1)]),_:1}),m(oe,{heading:"Geliefert"},{default:b(()=>[n("span",null,k(d(Ze)(d(N).batOut.energy)),1)]),_:1})])]),_:1})):w("",!0)}});const kt=E(Uc,[["__scopeId","data-v-694d07cd"]]),zc=t=>(K("data-v-453a6579"),t=t(),ee(),t),Nc=zc(()=>n("p",null,"not implemented yet",-1)),Fc=I({__name:"PriceChart",setup(t){return(e,a)=>d(We).isEtEnabled?(i(),B(xe,{key:0},{default:b(()=>[Nc]),_:1})):w("",!0)}});const $t=E(Fc,[["__scopeId","data-v-453a6579"]]),qc={class:"d-flex float-right justify-content-end align-items-center"},Rc={key:0,class:"my-0 badge rounded-pill tempbadge mx-1"},Hc={class:"row m-1 mt-0 p-0"},Jc={class:"col m-0 mb-1 p-0 d-flex justify-content-between"},Qc=I({__name:"SHListItem",props:{device:{}},setup(t){const e=t,a=f(()=>e.device.status=="on"?"fa-toggle-on":e.device.status=="waiting"?"fa-spinner fa-spin":"fa-toggle-off"),s=f(()=>{let c="var(--color-switchRed)";switch(e.device.status){case"on":c="var(--color-switchGreen)";break;case"detection":c="var(--color-switchBlue)";break;case"timeout":c="var(--color-switchWhite)";break;case"waiting":c="var(--color-menu)";break;default:c="var(--color-switchRed)"}return{color:c}});function o(){e.device.isAutomatic||(e.device.status=="on"?Z("shSwitchOn",0,e.device.id):Z("shSwitchOn",1,e.device.id),F[e.device.id].status="waiting")}function r(){e.device.isAutomatic?Z("shSetManual",1,e.device.id):Z("shSetManual",0,e.device.id)}const l=f(()=>e.device.isAutomatic?"Auto":"Man");return(c,u)=>(i(),B(ha,{titlecolor:c.device.color,fullwidth:!0},{title:b(()=>[j(k(c.device.name),1)]),buttons:b(()=>[n("div",qc,[(i(!0),h(W,null,q(c.device.temp,(g,y)=>(i(),h("span",{key:y,class:"p-0 m-0 align-items-center d-flex"},[y<c.device.tempConfigured?(i(),h("span",Rc,k(d(fn)(g)),1)):w("",!0)]))),128)),e.device.canSwitch?(i(),h("span",{key:0,class:z([a.value,"fa statusbutton mr-2 ms-4"]),style:R(s.value),onClick:o},null,6)):w("",!0),e.device.canSwitch?(i(),h("span",{key:1,class:"badge rounded-pill modebutton mx-2",onClick:r},k(l.value),1)):w("",!0)])]),default:b(()=>[n("div",Hc,[n("div",Jc,[m(oe,{heading:"Leistung:"},{default:b(()=>[m(Bt,{watt:c.device.power},null,8,["watt"])]),_:1}),m(oe,{heading:"Energie:"},{default:b(()=>[m(_a,{"watt-h":c.device.energy},null,8,["watt-h"])]),_:1}),m(oe,{heading:"Laufzeit:"},{default:b(()=>[j(k(d(gn)(c.device.runningTime)),1)]),_:1})])])]),_:1},8,["titlecolor"]))}});const Yc=E(Qc,[["__scopeId","data-v-064f5a85"]]),at=t=>(K("data-v-476a5661"),t=t(),ee(),t),Zc=at(()=>n("span",{class:"fas fa-plug me-2",style:{color:"var(--color-devices)"}}," ",-1)),Xc={class:"sh-title py-4"},Kc=at(()=>n("span",{class:"fa-solid fa-lg ps-1 fa-ellipsis-vertical"},null,-1)),ed=[Kc],td=at(()=>n("span",{class:"fas fa-gear"}," ",-1)),ad=at(()=>n("span",{class:"fa-solid fa-lg ps-1 fa-circle-check"},null,-1)),nd=[ad],od=["id","onUpdate:modelValue","value"],sd=["for"],rd=at(()=>n("div",{class:"col-12 mb-3 pe-3 mt-0"},[n("button",{class:"btn btn-sm btn-secondary float-end"},"Schließen")],-1)),ld=[rd],id=3,cd=I({__name:"SmartHomeList",setup(t){const e=f(()=>Ie.value?a.value.reduce((l,c)=>{const u=l;let g=l[l.length-1];return g.length>=id?l.push([c]):g.push(c),u},[[]]):[a.value]),a=f(()=>Object.values(F).filter(l=>l.configured));function s(l){return"Geräte"+(Ie.value&&e.value.length>1?"("+(l+1)+")":"")}function o(){r.value=!r.value}const r=le(!1);return(l,c)=>(i(),h(W,null,[(i(!0),h(W,null,q(e.value,(u,g)=>(i(),B(ut,{key:g,"variable-width":!0},{title:b(()=>[n("span",{onClick:o},[Zc,n("span",Xc,k(s(g)),1)])]),buttons:b(()=>[n("span",{class:"ms-2 pt-1",onClick:o},ed)]),default:b(()=>[(i(!0),h(W,null,q(u,y=>(i(),B(Yc,{key:y.id,device:y},null,8,["device"]))),128))]),_:2},1024))),128)),r.value?(i(),B(ut,{key:0},{title:b(()=>[n("span",{class:"smarthome",onClick:o},[td,j(" Einstellungen")])]),buttons:b(()=>[n("span",{class:"ms-2 pt-1",onClick:o},nd)]),default:b(()=>[m(O,{title:"Im Energie-Graph anzeigen:",icon:"fa-chart-column",fullwidth:!0},{default:b(()=>[(i(!0),h(W,null,q(a.value,(u,g)=>(i(),h("div",{key:g},[Oe(n("input",{id:"check"+g,"onUpdate:modelValue":y=>u.showInGraph=y,class:"form-check-input",type:"checkbox",value:u},null,8,od),[[_t,u.showInGraph]]),n("label",{class:"form-check-label px-2",for:"check"+g},k(u.name),9,sd)]))),128))]),_:1}),n("div",{class:"row p-0 m-0",onClick:o},ld)]),_:1})):w("",!0)],64))}});const St=E(cd,[["__scopeId","data-v-476a5661"]]),dd={class:"row py-0 px-0 m-0"},ud={"space-between":0,pagination:{clickable:!0},"slides-per-view":"1",class:"p-0 m-0 swiper-carousel",breakpoints:{992:{slidesPerView:3,spaceBetween:0}}},hd=I({__name:"CarouselFix",setup(t){return(e,a)=>(i(),h("div",dd,[n("swiper-container",ud,[n("swiper-slide",null,[n("div",{class:z([d(Ie)?"mb-0":"mb-5","flex-fill d-flex align-items-stretch"])},[ae(e.$slots,"item1",{},void 0,!0)],2)]),n("swiper-slide",null,[n("div",{class:z([d(Ie)?"mb-0":"mb-5","flex-fill d-flex align-items-stretch"])},[ae(e.$slots,"item2",{},void 0,!0)],2)]),n("swiper-slide",null,[n("div",{class:z([d(Ie)?"mb-0":"mb-5","flex-fill d-flex align-items-stretch"])},[ae(e.$slots,"item3",{},void 0,!0)],2)])])]))}});const pd=E(hd,[["__scopeId","data-v-3ef4f401"]]);function gd(t,e){t=="openWB/graph/boolDisplayLiveGraph"?re.displayLiveGraph=+e==1:t.match(/^openwb\/graph\/alllivevaluesJson[1-9][0-9]*$/i)?md(t,e):t=="openWB/graph/lastlivevaluesJson"?fd(t,e):t=="openWB/graph/config/duration"&&(te.duration=JSON.parse(e))}function md(t,e){if(!te.initialized){let a=[];const s=e.toString().split(`
`);s.length>1?a=s.map(l=>JSON.parse(l)):a=[];const o=t.match(/(\d+)$/g),r=o?o[0]:"";r!=""&&typeof te.rawDataPacks[+r-1]>"u"&&(te.rawDataPacks[+r-1]=a,te.initCounter++)}if(te.initCounter==16){const a=[];te.unsubscribeRefresh(),te.initialized=!0,te.rawDataPacks.map(s=>{s.map(o=>{const r=va(o);a.push(r)})}),et(a),te.subscribeUpdates()}}function fd(t,e){const a=JSON.parse(e),s=va(a);te.graphRefreshCounter++,et(v.data.concat(s)),te.graphRefreshCounter>60&&te.activate()}function va(t){const e={};e.date=_d(t.time).valueOf(),+t.grid>0?(e.gridPull=+t.grid,e.gridPush=0):+t.grid<=0?(e.gridPull=0,e.gridPush=-t.grid):(e.gridPull=0,e.gridPush=0),+t["pv-all"]>=0?(e.solarPower=+t["pv-all"],e.inverter=0):(e.solarPower=0,e.inverter=-t["pv-all"]),e.house=+t["house-power"],+t["bat-all-power"]>0?(e.batOut=0,e.batIn=+t["bat-all-power"]):+t["bat-all-power"]<0?(e.batOut=-t["bat-all-power"],e.batIn=0):(e.batOut=0,e.batIn=0),t["bat-all-soc"]?e.batterySoc=+t["bat-all-soc"]:e.batterySoc=0,e.charging=+t["charging-all"];for(let a=0;a<10;a++)t["cp"+a+"-power"]?e["cp"+a]=+t["cp"+a+"-power"]:e["cp"+a]=0;return e.selfUsage=e.solarPower-e.gridPush,e.selfUsage<0&&(e.selfUsage=0),e.devices=0,e}function _d(t){const e=new Date(Date.now()),a=864e5;let s=new Date;const o=Qe("%H:%M:%S")(t);return o&&(s=o,s.setDate(e.getDate()),s.setMonth(e.getMonth()),s.setFullYear(e.getFullYear()),s.getHours()>e.getHours()&&(s=new Date(s.getTime()-a))),s}let nt={},ba={},Re=[];function vd(t,e){const a=JSON.parse(e).entries;Re=Object.values(X).map(o=>"soc-ev"+o.id.toString()),Te.map(o=>{$[o].energyPv=0,$[o].energyBat=0});const s=bd(a);et(s),Te.map(o=>{$[o].energyPv=Math.round($[o].energyPv*100)/100,$[o].energyBat=Math.round($[o].energyBat*100)/100}),Sd(nt,ba),v.graphMode=="today"&&setTimeout(()=>H.activate(),3e5)}function bd(t){const e=[];let a={},s={};return t.map((o,r)=>{if(s=yd(o),r==0)nt=s,nt.chargingPv=0,nt.chargingBat=0;else{const l=$d(s,a);e.push(l),Te.map(c=>{$[c].energyPv+=l[c+"Pv"]/12,$[c].energyBat+=l[c+"Bat"]/12})}a=s}),ba=s,e}function yd(t){const e={};if(e.devices=0,v.graphMode=="day"||v.graphMode=="today"){const a=Qe("%H:%M")(t.date);a&&(a.setMonth(H.date.getMonth()),a.setDate(H.date.getDate()),a.setFullYear(H.date.getFullYear()),e.date=a.getTime())}else{const a=Qe("%Y%m%d")(t.date);a&&(e.date=a.getDate())}return Object.entries(t.counter).forEach(a=>{e.gridPush=a[1].exported,e.gridPull=a[1].imported}),Object.entries(t.pv).forEach(([a,s])=>{a=="pv1"&&(e.solarPower=s.exported)}),Object.entries(t.bat).length>0?Object.entries(t.bat).forEach(([a,s])=>{a=="all"&&(e.batIn=s.imported,e.batOut=s.exported)}):(e.batIn=0,e.batOut=0),Object.entries(t.cp).forEach(([a,s])=>{a!="all"?(e[a]=s.imported,e["soc"+a]=s.soc):e.charging=s.imported}),Object.entries(t.ev).forEach(([a,s])=>{a!="all"&&(e["soc-"+a]=s.soc)}),Object.entries(t.sh).forEach(([a,s])=>{a!="all"&&(e[a]=s.imported),e.devices+=s.imported}),e}const wd=["cp0","cp1","cp2","cp3","cp4","cp5","cp6","cp7","cp8","cp9"],kd=["sh0","sh1","sh2","sh3","sh4"];function $d(t,e){const a={};a.date=t.date;const s=["gridPull","gridPush","solarPower","batIn","batOut","charging","devices"];return s.concat(wd).forEach(r=>{a[r]=Ht(t,e,r)}),s.concat(kd).forEach(r=>{a[r]=Ht(t,e,r)}),a.soc0=Re[0]?t[Re[0]]:0,a.soc1=Re[1]?t[Re[1]]:0,a.selfUsage=a.solarPower-a.gridPush,a.house=a.solarPower+a.gridPull+a.batOut-a.gridPush-a.batIn-a.charging-a.devices,a.inverter=0,a.gridPull+a.batOut+a.solarPower>0?Te.map(r=>Vt(r,a)):Te.map(r=>{a[r+"Pv"]=0,a[r+"Bat"]=0}),a}function Ht(t,e,a){return t[a]!==void 0&&e[a]!==void 0?12*(t[a]-e[a])/1e3:0}function Sd(t,e){$.pv.energy=e.solarPower-t.solarPower,$.evuIn.energy=e.gridPull-t.gridPull,$.batOut.energy=e.batOut-t.batOut,$.evuOut.energy=e.gridPush-t.gridPush,$.batIn.energy=e.batIn-t.batIn,$.charging.energy=e.charging-t.charging,$.devices.energy=e.devices-t.devices,$.charging.pvPercentage=Math.round(($.charging.energyPv+$.charging.energyBat)/$.charging.energy*100),$.house.energy=$.evuIn.energy+$.pv.energy+$.batOut.energy-$.evuOut.energy-$.batIn.energy-$.charging.energy-$.devices.energy,A.devices.energy=$.devices.energy,Te.map(a=>{A[a].energyPv=$[a].energyPv,A[a].energyBat=$[a].energyBat,$[a].pvPercentage=Math.round(($[a].energyPv+$[a].energyBat)/$[a].energy*100),A[a].pvPercentage=$[a].pvPercentage})}let He={};const ht=["charging","house","batIn","devices"];function xd(t,e){const a=JSON.parse(e).entries;ht.map(s=>{$[s].energyPv=0,$[s].energyBat=0}),et(Pd(a)),ra(He),Md(t,e)}function Pd(t){const e=[];let a={};return He={},t.map(s=>{a=ya(s),e.push(a),ht.map(o=>{$[o].energyPv+=a[o+"Pv"],$[o].energyBat+=a[o+"Bat"]}),Object.keys(a).map(o=>{o!="date"&&(He[o]?He[o]+=a[o]:He[o]=a[o])})}),e}function Md(t,e){JSON.parse(e).entries.map(s=>{ya(s)})}function ya(t){const e={},a=Qe("%Y%m%d")(t.date);return a&&(e.date=a.getDate()),Object.entries(t.counter).forEach(o=>{e.gridPush=o[1].energy_exported,e.gridPull=o[1].energy_imported}),Object.entries(t.pv).forEach(([o,r])=>{o=="all"&&(e.solarPower=r.energy_exported)}),Object.entries(t.bat).length>0?Object.entries(t.bat).forEach(([o,r])=>{o=="all"&&(e.batIn=r.energy_imported,e.batOut=r.energy_exported)}):(e.batIn=0,e.batOut=0),Object.entries(t.cp).forEach(([o,r])=>{o!="all"?e[o]=r.energy_imported:e.charging=r.energy_imported}),Object.entries(t.ev).forEach(([o,r])=>{o!="all"&&(e["soc-"+o]=r.soc)}),e.devices=Object.entries(t.sh).reduce((o,r)=>(o+=r[1].energy_imported,o),0),e.selfUsage=e.solarPower-e.gridPush,e.house=e.solarPower+e.gridPull+e.batOut-e.gridPush-e.batIn-e.charging,e.inverter=0,e.gridPull+e.batOut+e.solarPower>0?ht.map(o=>Vt(o,e)):ht.map(o=>{e[o+"Pv"]=0,e[o+"Bat"]=0}),e}let Je={};const pt=["charging","house","batIn","devices"];function Cd(t,e){const a=JSON.parse(e).entries;pt.map(s=>{$[s].energyPv=0,$[s].energyBat=0}),et(Id(a)),ra(Je),Bd(t,e)}function Id(t){const e=[];let a={};return Je={},t.map(s=>{a=wa(s),e.push(a),pt.map(o=>{$[o].energyPv+=a[o+"Pv"],$[o].energyBat+=a[o+"Bat"]}),Object.keys(a).map(o=>{o!="date"&&(a[o]<0&&(console.warn(`Negative energy value for ${o} in row ${a.date}. Ignoring the value.`),a[o]=0),Je[o]?Je[o]+=a[o]:Je[o]=a[o])})}),e}function Bd(t,e){JSON.parse(e).entries.map(s=>{wa(s)})}function wa(t){const e={},a=Qe("%Y%m%d")(t.date);return a&&(e.date=a.getMonth()+1),Object.entries(t.counter).forEach(o=>{e.gridPush=o[1].energy_exported/1e3,e.gridPull=o[1].energy_imported/1e3}),Object.entries(t.pv).forEach(([o,r])=>{o=="all"&&(e.solarPower=r.energy_exported/1e3)}),Object.entries(t.bat).length>0?Object.entries(t.bat).forEach(([o,r])=>{o=="all"&&(e.batIn=r.energy_imported/1e3,e.batOut=r.energy_exported/1e3)}):(e.batIn=0,e.batOut=0),Object.entries(t.cp).forEach(([o,r])=>{o!="all"?e[o]=r.energy_imported/1e3:e.charging=r.energy_imported/1e3}),Object.entries(t.ev).forEach(([o,r])=>{o!="all"&&(e["soc-"+o]=r.soc)}),e.devices=Object.entries(t.sh).reduce((o,r)=>(r[1].energy_imported>=0?o+=r[1].energy_imported/1e3:console.warn(`Negative energy value for device ${r[0]} in row ${e.date}. Ignoring this value`),o),0),e.selfUsage=e.solarPower-e.gridPush,e.house=e.solarPower+e.gridPull+e.batOut-e.gridPush-e.batIn-e.charging,e.inverter=0,e.gridPull+e.batOut+e.solarPower>0?pt.map(o=>Vt(o,e)):pt.map(o=>{e[o+"Pv"]=0,e[o+"Bat"]=0}),e}class Vd{constructor(e){p(this,"id");p(this,"dailyYieldExport",0);p(this,"dailyYieldImport",0);p(this,"exported",0);p(this,"faultState",0);p(this,"faultStr","");p(this,"imported",0);p(this,"power",0);p(this,"soc",0);this.id=e}}class Td{constructor(){p(this,"dailyExport",0);p(this,"dailyImport",0);p(this,"exported",0);p(this,"imported",0);p(this,"power",0);p(this,"soc",0)}}const pe=J({});J(new Td);function Ld(t){t in pe?console.info("Duplicate battery message: "+t):(pe[t]=new Vd(t),console.info("Added battery "+t))}function Od(){Object.keys(pe).forEach(t=>{delete pe[parseInt(t)]})}function Ad(t,e){const a=Dd(t);if(a&&!(a in pe)){console.warn("Invalid battery index received: "+a);return}t=="openWB/bat/config/configured"?re.isBatteryConfigured=e=="true":t=="openWB/bat/get/power"?+e>0?(A.batIn.power=+e,N.batOut.power=0):(A.batIn.power=0,N.batOut.power=-e):t=="openWB/bat/get/soc"?re.batterySoc=+e:t=="openWB/bat/get/daily_exported"?N.batOut.energy=+e:t=="openWB/bat/get/daily_imported"?A.batIn.energy=+e:a&&(t.match(/^openwb\/bat\/[0-9]+\/get\/daily_yield_export$/i)?pe[a].dailyYieldExport=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/daily_yield_import$/i)?pe[a].dailyYieldImport=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/exported$/i)?pe[a].exported=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/fault_state$/i)?pe[a].faultState=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/fault_str$/i)?pe[a].faultStr=e:t.match(/^openwb\/bat\/[0-9]+\/get\/imported$/i)?pe[a].imported=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/power$/i)?pe[a].power=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/soc$/i)&&(pe[a].soc=+e))}function Dd(t){let e=0;try{const a=t.match(/(?:\/)([0-9]+)(?=\/)/g);return a?(e=+a[0].replace(/[^0-9]+/g,""),e):void 0}catch{console.warn("Parser error in getIndex for topic "+t)}}function Wd(t,e){t=="openWB/optional/et/active"?We.isEtEnabled=JSON.parse(e):t=="openWB/optional/et/get/price"?We.etCurrentPrice=parseFloat(e):t=="openWB/optional/et/config/max_price"?We.updateEtMaxPrice(parseFloat(e)):t=="openWB/optional/et/provider"&&(We.etProvider=JSON.parse(e))}function Ed(t,e){const a=ka(t);if(a&&!(a in T)){console.warn("Invalid chargepoint id received: "+a);return}if(t=="openWB/chargepoint/get/power"?A.charging.power=+e:t=="openWB/chargepoint/get/daily_imported"&&(A.charging.energy=+e),t=="openWB/chargepoint/get/daily_exported")re.cpDailyExported=+e;else if(a){if(t.match(/^openwb\/chargepoint\/[0-9]+\/config$/i))if(T[a]){const s=JSON.parse(e);T[a].name=s.name,T[a].icon=s.name}else console.warn("invalid chargepoint index: "+a);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/state_str$/i))T[a].stateStr=JSON.parse(e);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/fault_str$/i))T[a].faultStr=JSON.parse(e);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/fault_state$/i))T[a].faultState=+e;else if(t.match(/^openWB\/chargepoint\/[0-9]+\/get\/power$/i))T[a].power=+e;else if(t.match(/^openWB\/chargepoint\/[0-9]+\/get\/daily_imported$/i))T[a].dailyYield=+e/1e3;else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/plug_state$/i))T[a].isPluggedIn=e=="true";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/charge_state$/i))T[a].isCharging=e=="true";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/set\/manual_lock$/i))T[a].updateIsLocked(e=="true");else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/enabled$/i))T[a].isEnabled=e=="1";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/phases_in_use/i))T[a].phasesInUse=+e;else if(t.match(/^openwb\/chargepoint\/[0-9]+\/set\/current/i))T[a].current=+e;else if(t.match(/^openwb\/chargepoint\/[0-9]+\/set\/log/i)){const s=JSON.parse(e);T[a].chargedSincePlugged=s.imported_since_plugged}else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/soc$/i)){const s=JSON.parse(e);T[a].rangeCharged=s.range_charged,T[a].rangeUnit=s.range_unit}else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/soc_config$/i))T[a].isSocManual=e=="manual";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/info$/i)){const s=JSON.parse(e);T[a].vehicleName=String(s.name),T[a].updateConnectedVehicle(+s.id)}else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/config$/i)){const s=JSON.parse(e);switch(s.chargemode){case"instant_charging":T[a].updateChargeMode(ce.instant_charging);break;case"pv_charging":T[a].updateChargeMode(ce.pv_charging);break;case"scheduled_charging":T[a].updateChargeMode(ce.scheduled_charging);break;case"standby":T[a].updateChargeMode(ce.standby);break;case"stop":T[a].updateChargeMode(ce.stop);break}T[a].chargeTemplate=s.charge_template,T[a].averageConsumption=s.average_consumption}}}function Gd(t,e){const a=ka(t);if(a!=null){if(!(a in X)){const s=new Qa(a);X[a]=s}t.match(/^openwb\/vehicle\/[0-9]+\/name$/i)?(Object.values(T).forEach(s=>{s.connectedVehicle==a&&(s.vehicleName=JSON.parse(e))}),X[a].name=JSON.parse(e)):t.match(/^openwb\/vehicle\/[0-9]+\/get\/soc$/i)?Object.values(T).forEach(s=>{s.connectedVehicle==a&&(s.soc=JSON.parse(e))}):t.match(/^openwb\/vehicle\/[0-9]+\/get\/range$/i)?X[a].range=+e:t.match(/^openwb\/vehicle\/[0-9]+\/charge_template$/i)?X[a].updateChargeTemplateId(+e):t.match(/^openwb\/vehicle\/[0-9]+\/ev_template$/i)&&X[a].updateEvTemplateId(+e)}}function jd(t,e){if(t.match(/^openwb\/vehicle\/template\/charge_template\/[0-9]+$/i)){const a=t.match(/[0-9]+$/i);if(a){const s=+a[0],o=JSON.parse(e);o.chargemode.scheduled_charging.plans||(o.chargemode.scheduled_charging.plans={}),o.time_charging.plans||(o.time_charging.plans={}),ue[s]=o,Ud(s,o)}}else if(t.match(/^openwb\/vehicle\/template\/charge_template\/[0-9]+\/time_charging\/plans\/[0-9]+$/i)){const a=t.match(/(?:\/)([0-9]+)(?:\/)/g),s=t.match(/[0-9]+$/i);if(a&&s){const o=+a[0].replace(/[^0-9]+/g,""),r=+s[0],l=JSON.parse(e);ue[o].time_charging.plans[r]=l}}else if(t.match(/^openwb\/vehicle\/template\/ev_template\/[0-9]+$/i)){const a=t.match(/[0-9]+$/i);if(a){const s=+a[0],o=JSON.parse(e);xt[s]=o}}}function Ud(t,e){Object.values(T).forEach(a=>{a.chargeTemplate==t&&(a.updateCpPriority(e.prio),a.updateInstantChargeLimitMode(e.chargemode.instant_charging.limit.selected),a.updateInstantTargetCurrent(e.chargemode.instant_charging.current),a.updateInstantTargetSoc(e.chargemode.instant_charging.limit.soc),a.updateInstantMaxEnergy(e.chargemode.instant_charging.limit.amount),a.updateScheduledCharging(e.time_charging.active),a.updatePvFeedInLimit(e.chargemode.pv_charging.feed_in_limit),a.updatePvMinCurrent(e.chargemode.pv_charging.min_current),a.updatePvMaxSoc(e.chargemode.pv_charging.max_soc),a.updatePvMinSoc(e.chargemode.pv_charging.min_soc),a.updatePvMinSocCurrent(e.chargemode.pv_charging.min_soc_current))})}function ka(t){let e=0;try{const a=t.match(/(?:\/)([0-9]+)(?=\/)/g);return a?(e=+a[0].replace(/[^0-9]+/g,""),e):void 0}catch{console.warn("Parser error in getIndex for topic "+t)}}function zd(t,e){t.match(/^openWB\/LegacySmarthome\/config\//i)?Nd(t,e):t.match(/^openWB\/LegacySmarthome\/Devices\//i)&&Fd(t,e)}function Nd(t,e){const a=$a(t);a!=null&&(a in F||It(a),t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_configured$/i)?F[a].configured=e!="0":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_name$/i)?F[a].name=e.toString():t.match(/^openWB\/LegacySmarthome\/config\/set\/Devices\/[0-9]+\/mode$/i)?F[a].isAutomatic=e=="0":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_canswitch$/i)?F[a].canSwitch=e=="1":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_temperatur_configured$/i)&&(F[a].tempConfigured=+e))}function Fd(t,e){const a=$a(t);if(a==null){console.warn("Smarthome: Missing index in "+t);return}if(a in F||It(a),t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/Watt$/i))F[a].power=+e,qd("power");else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/RunningTimeToday$/i))F[a].runningTime=+e;else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/TemperatureSensor0$/i))F[a].temp[0]=+e;else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/TemperatureSensor1$/i))F[a].temp[1]=+e;else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/TemperatureSensor2$/i))F[a].temp[2]=+e;else if(t.match(/^openWB\/LegacySmartHome\/Devices\/[0-9]+\/Status$/i))switch(+e){case 10:F[a].status="off";break;case 11:F[a].status="on";break;case 20:F[a].status="detection";break;case 30:F[a].status="timeout";break;default:F[a].status="off"}}function qd(t){switch(t){case"power":A.devices.power=Object.values(F).filter(e=>e.configured).reduce((e,a)=>e+a.power,0);break;case"energy":A.devices.energy=Object.values(F).filter(e=>e.configured).reduce((e,a)=>e+a.energy,0);break;default:console.error("Unknown category")}}function $a(t){let e=0;try{const a=t.match(/(?:\/)([0-9]+)(?=\/)/g);return a?(e=+a[0].replace(/[^0-9]+/g,""),e):void 0}catch{console.warn("Parser error in getIndex for topic "+t)}}const Rd=["openWB/counter/#","openWB/bat/#","openWB/pv/get/#","openWB/chargepoint/#","openWB/vehicle/#","openWB/general/chargemode_config/pv_charging/#","openWB/optional/et/#","openWB/system/#","openWB/LegacySmartHome/#"];function Hd(){Ra(Jd),Rd.forEach(t=>{Ce(t)}),de()}function Jd(t,e){const a=e.toString();t.match(/^openwb\/counter\/[0-9]+\//i)?Qd(t,a):t.match(/^openwb\/counter\//i)?Yd(t,a):t.match(/^openwb\/bat\//i)?Ad(t,a):t.match(/^openwb\/pv\//i)?Zd(t,a):t.match(/^openwb\/chargepoint\//i)?Ed(t,a):t.match(/^openwb\/vehicle\/template\//i)?jd(t,a):t.match(/^openwb\/vehicle\//i)?Gd(t,a):t.match(/^openwb\/general\/chargemode_config\/pv_charging\//i)?Xd(t,a):t.match(/^openwb\/graph\//i)?gd(t,a):t.match(/^openwb\/log\/daily\//i)?vd(t,a):t.match(/^openwb\/log\/monthly\//i)?xd(t,a):t.match(/^openwb\/log\/yearly\//i)?Cd(t,a):t.match(/^openwb\/optional\/et\//i)?Wd(t,a):t.match(/^openwb\/LegacySmartHome\//i)&&zd(t,a)}function Qd(t,e){const a=t.split("/");if(+a[2]==re.evuId)Kd(t,e);else if(a[3]!="config")switch(a[4]){}}function Yd(t,e){if(t.match(/^openwb\/counter\/get\/hierarchy$/i)){const a=JSON.parse(e);if(a.length){Za(),Od();for(const s of a)s.type=="counter"&&(re.evuId=s.id);Sa(a[0])}}else t.match(/^openwb\/counter\/set\/home_consumption$/i)?A.house.power=+e:t.match(/^openwb\/counter\/set\/daily_yield_home_consumption$/i)&&(A.house.energy=+e)}function Sa(t){switch(t.type){case"counter":break;case"cp":Ya(t.id);break;case"bat":Ld(t.id);break}t.children.forEach(e=>Sa(e))}function Zd(t,e){switch(t){case"openWB/pv/get/power":N.pv.power=-e;break;case"openWB/pv/get/daily_exported":N.pv.energy=+e;break}}function Xd(t,e){const a=t.split("/");if(a.length>0)switch(a[4]){case"bat_prio":re.updatePvBatteryPriority(e=="true");break}}function Kd(t,e){switch(t.split("/")[4]){case"power":+e>0?(N.evuIn.power=+e,A.evuOut.power=0):(N.evuIn.power=0,A.evuOut.power=-e);break;case"daily_imported":N.evuIn.energy=+e;break;case"daily_exported":A.evuOut.energy=+e;break}}const eu=0,tu={host:location.hostname,port:location.protocol=="https:"?443:80,endpoint:"/ws",protocol:location.protocol=="https:"?"wss":"ws",clean:!0,connectTimeout:4e3,reconnectPeriod:4e3,clientId:Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,6),username:"openWB",password:"openWB"},Jt={topic:"",qos:eu};let Ue;const{host:au,port:nu,endpoint:ou,...xa}=tu,su=`${xa.protocol}://${au}:${nu}${ou}`;try{Ue=Qt.connect(su,xa),Ue.on("connect",()=>{console.info("MQTT connection successful")}),Ue.on("error",t=>{console.error("MQTT connection failed: ",t)})}catch(t){console.error("MQTT connect error: ",t)}function ru(t){Ue?Ue.on("message",t):console.error("MqttRegister: MQTT client not available")}function lu(t){Jt.topic=t;const{topic:e,qos:a}=Jt;Ue.subscribe(e,{qos:a},s=>{if(s){console.error("MQTT Subscription error: "+s);return}console.info("MQTT Subscription successful: "+t)})}const gt=J([]);let iu=class Pa{constructor(e,a,s,o){p(this,"name");p(this,"children");p(this,"count");p(this,"lastValue");this.name=e,this.children=a,this.count=s,this.lastValue=o}insert(e,a){if(e.length){const s=e.splice(1);if(e[0]==this.name)if(s.length){let o=!1;if(this.children.forEach(r=>{r.name==s[0]&&(r.insert(s,a),o=!0)}),!o){const r=new Pa(s[0],[],0,"");r.insert(s,a),this.children.push(r)}}else this.count=this.count+1,this.lastValue=a}}};function cu(t,e){const a=t.split("/");if(a.length){let s=!1;if(gt.forEach(o=>{o.name==a[0]&&(o.insert(a,e),s=!0)}),!s){const o=new iu(a[0],[],0,"");gt.push(o),o.insert(a,e)}}}const du=["openWB/#"];function uu(){ru(hu),du.forEach(t=>{lu(t)})}function hu(t,e){cu(t,e.toString())}const pu={class:"row p-0 mb-0 mx-0"},gu={class:"py-2 m-0"},mu={key:0},fu={key:1,style:{"background-color":"white"},class:"p-2"},_u={key:0,class:"col-md-9 m-0 p-0 ps-2"},vu={class:"container-fluid m-0 p-0"},bu=I({__name:"MqttNode",props:{node:{},level:{},hide:{type:Boolean},expandAll:{type:Boolean}},setup(t){const e=t;let a=le(!e.hide),s=le(!1);const o=f(()=>e.node.name),r=f(()=>[...e.node.children].sort((y,M)=>y.name<M.name?-1:1)),l=f(()=>e.node.count>0?"("+e.node.count+")":""),c=f(()=>e.node.children.length),u=f(()=>e.node.lastValue!=""?{"background-color":"lightgoldenrodyellow"}:{"background-color":"lightsteelblue"});function g(){c.value>0&&(a.value=!a.value),e.node.lastValue!=""&&(s.value=!s.value)}return(y,M)=>{const C=Wa("MqttNode",!0);return i(),h("div",pu,[n("div",{class:"col-md m-0 px-2 node",style:R(u.value),onClick:g},[n("p",gu,k(o.value)+k(l.value),1),d(s)?(i(),h("hr",mu)):w("",!0),d(s)?(i(),h("p",fu,[n("code",null,k(e.node.lastValue),1)])):w("",!0)],4),(d(a)||e.expandAll)&&c.value>0?(i(),h("div",_u,[n("div",vu,[(i(!0),h(W,null,q(r.value,(S,P)=>(i(),B(C,{key:P,level:e.level+1,node:S,hide:!0,"expand-all":e.expandAll},null,8,["level","node","expand-all"]))),128))])])):w("",!0)])}}});const yu=E(bu,[["__scopeId","data-v-3dfd535f"]]),Wt=t=>(K("data-v-bf618b70"),t=t(),ee(),t),wu={class:"mqviewer"},ku={class:"row pt-2"},$u={class:"col"},Su=Wt(()=>n("h3",{class:"mqtitle ps-2"},"MQTT Message Viewer",-1)),xu=Wt(()=>n("hr",null,null,-1)),Pu=Wt(()=>n("hr",null,null,-1)),Mu={key:0},Cu=I({__name:"MQTTViewer",setup(t){ze(()=>{uu()});const e=le(!1);function a(){e.value=!e.value}const s=f(()=>e.value?"active":"");return(o,r)=>(i(),h("div",wu,[n("div",ku,[n("div",$u,[Su,xu,n("button",{class:z(["btn btn-small btn-outline-primary ms-2",s.value]),onClick:a}," Expand All ",2),Pu])]),d(gt)[0]?(i(),h("div",Mu,[(i(!0),h(W,null,q(d(gt)[0].children.sort((l,c)=>l.name<c.name?-1:1),(l,c)=>(i(),B(yu,{key:c,node:l,level:1,hide:!0,"expand-all":e.value},null,8,["node","expand-all"]))),128))])):w("",!0)]))}});const Iu=E(Cu,[["__scopeId","data-v-bf618b70"]]),Bu={class:"container-fluid p-0 m-0"},Vu={class:"row p-0 m-0"},Tu=n("button",{class:"btn btn-secondary float-end mt-0 ms-1","data-bs-toggle":"collapse","data-bs-target":"#themesettings"},[n("span",null,[n("i",{class:"fa-solid fa-rectangle-xmark"})])],-1),Lu={class:"row m-0 p-0"},Ou=n("div",{class:"row p-0 m-0"},[n("div",{class:"col-12 mb-3 pe-3 mt-0"},[n("button",{class:"btn btn-sm btn-secondary float-end","data-bs-toggle":"collapse","data-bs-target":"#themesettings"}," Schließen ")])],-1),Au=I({__name:"ThemeSettings",emits:["resetArcs"],setup(t,{emit:e}){const a=[["Dunkel","dark"],["Hell","light"],["Blau","blue"]],s=[["3 kW","0"],["3,1 kW","1"],["3,14 kW","2"],["3,141 kW","3"],["3141 W","4"]],o=[["Orange","normal"],["Grün/Violett","standard"],["Bunt","advanced"]];return(r,l)=>(i(),h("div",Bu,[n("div",Vu,[m(ut,{"full-width":!0},{title:b(()=>[j(" Look & Feel ")]),buttons:b(()=>[Tu]),default:b(()=>[n("div",Lu,[m(O,{title:"Farbschema",icon:"fa-adjust",infotext:"Hintergrundfarbe"},{default:b(()=>[m(Le,{modelValue:d(_).displayMode,"onUpdate:modelValue":l[0]||(l[0]=c=>d(_).displayMode=c),options:a},null,8,["modelValue"])]),_:1}),m(O,{title:"Grafik: Raster",icon:"fa-th",infotext:"Verwende ein Hintergrundraster in den Grafiken"},{default:b(()=>[m(me,{modelValue:d(_).showGrid,"onUpdate:modelValue":l[1]||(l[1]=c=>d(_).showGrid=c)},null,8,["modelValue"])]),_:1}),m(O,{title:"Variable Bogenlänge",icon:"fa-chart-area",infotext:"Im Graph 'Aktuelle Leistung' können die Bögen immer die volle Länge haben, oder entsprechend des aktuellen Gesamtleistung verkürzt dargestellt werden."},{default:b(()=>[m(me,{modelValue:d(_).showRelativeArcs,"onUpdate:modelValue":l[2]||(l[2]=c=>d(_).showRelativeArcs=c)},null,8,["modelValue"])]),_:1}),d(_).showRelativeArcs?(i(),B(O,{key:0,title:"Bögen zurücksetzen",icon:"fa-undo",infotext:"Durch Click auf den Button wird die Maximallänge der Bögen auf den aktuellen Wert gesetzt."},{default:b(()=>[d(_).showRelativeArcs?(i(),h("button",{key:0,class:"btn btn-secondary",onClick:l[3]||(l[3]=c=>e("resetArcs"))}," Reset ")):w("",!0)]),_:1})):w("",!0),m(O,{title:"Anzahl Dezimalstellen",icon:"fa-sliders-h",infotext:"Alle kW- und kWh-Werte werden mit der gewählten Anzahl an Stellen angezeigt."},{default:b(()=>[m(Ot,{modelValue:d(_).decimalPlaces,"onUpdate:modelValue":l[4]||(l[4]=c=>d(_).decimalPlaces=c),options:s},null,8,["modelValue"])]),_:1}),m(O,{title:"Farbschema Smart-Home-Geräte",icon:"fa-palette",infotext:"Für die Smart-Home-Geräte stehen mehrere Schemata zur Verfügung."},{default:b(()=>[m(Le,{modelValue:d(_).smartHomeColors,"onUpdate:modelValue":l[5]||(l[5]=c=>d(_).smartHomeColors=c),options:o},null,8,["modelValue"])]),_:1}),m(O,{title:"Kompakte Ladepunktliste",icon:"fa-list",infotext:"Zeige eine einzelne Ladepunktliste statt separater Element pro Ladepunkt."},{default:b(()=>[m(me,{modelValue:d(_).simpleCpList,"onUpdate:modelValue":l[6]||(l[6]=c=>d(_).simpleCpList=c)},null,8,["modelValue"])]),_:1}),m(O,{title:"Filter-Buttons",icon:"fa-filter",infotext:"Hauptseite mit Buttons zur Auswahl der Kategorie."},{default:b(()=>[m(me,{modelValue:d(_).showQuickAccess,"onUpdate:modelValue":l[7]||(l[7]=c=>d(_).showQuickAccess=c)},null,8,["modelValue"])]),_:1}),m(O,{title:"Animationen",icon:"fa-film",infotext:"Animationen anzeigen"},{default:b(()=>[m(me,{modelValue:d(_).showAnimations,"onUpdate:modelValue":l[8]||(l[8]=c=>d(_).showAnimations=c)},null,8,["modelValue"])]),_:1}),m(O,{title:"Breite Widgets",icon:"fa-desktop",infotext:"Widgets immer breit machen"},{default:b(()=>[m(me,{modelValue:d(_).preferWideBoxes,"onUpdate:modelValue":l[9]||(l[9]=c=>d(_).preferWideBoxes=c)},null,8,["modelValue"])]),_:1})]),Ou]),_:1})])]))}}),Fe=t=>(K("data-v-42ab5d0a"),t=t(),ee(),t),Du={class:"container-fluid px-2 m-0 theme-colors"},Wu={id:"themesettings",class:"collapse"},Eu={key:1,class:"row py-0 px-0 m-0"},Gu={key:2,class:"row py-0 m-0 d-flex justify-content-center"},ju={key:3,class:"nav nav-tabs nav-justified mx-1 mt-2",role:"tablist"},Uu=Ea('<a class="nav-link active" data-bs-toggle="tab" data-bs-target="#showAll" data-v-42ab5d0a><i class="fa-solid fa-lg fa-circle-info me-1" data-v-42ab5d0a></i><span class="d-none d-md-inline ms-2" data-v-42ab5d0a>Alles</span></a><a class="nav-link" data-bs-toggle="tab" data-bs-target="#chargepointlist" data-v-42ab5d0a><i class="fa-solid fa-lg fa-charging-station" data-v-42ab5d0a></i><span class="d-none d-md-inline ms-2" data-v-42ab5d0a>Ladepunkte</span></a>',2),zu={key:0,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#batterylist"},Nu=Fe(()=>n("i",{class:"fa-solid fa-lg fa-car-battery"},null,-1)),Fu=Fe(()=>n("span",{class:"d-none d-md-inline ms-2"},"Speicher",-1)),qu=[Nu,Fu],Ru=Fe(()=>n("a",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#smarthomelist"},[n("i",{class:"fa-solid fa-lg fa-plug"}),n("span",{class:"d-none d-md-inline ms-2"},"Smart Home")],-1)),Hu={key:1,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#etPricing"},Ju=Fe(()=>n("i",{class:"fa-solid fa-lg fa-money-bill-1-wave"},null,-1)),Qu=Fe(()=>n("span",{class:"d-none d-md-inline ms-2"},"Strompreis",-1)),Yu=[Ju,Qu],Zu={key:4,id:"cpContent",class:"tab-content mx-0 pt-1"},Xu={id:"showAll",class:"tab-pane active",role:"tabpanel","aria-labelledby":"showall-tab"},Ku={class:"row py-0 m-0 d-flex justify-content-center"},eh={id:"chargepointlist",class:"tab-pane",role:"tabpanel","aria-labelledby":"chargepoint-tab"},th={class:"row py-0 m-0 d-flex justify-content-center"},ah={id:"batterylist",class:"tab-pane",role:"tabpanel","aria-labelledby":"battery-tab"},nh={class:"row py-0 m-0 d-flex justify-content-center"},oh={id:"smarthomelist",class:"tab-pane",role:"tabpanel","aria-labelledby":"smarthome-tab"},sh={key:0,class:"row py-0 m-0 d-flex justify-content-center"},rh={id:"etPricing",class:"tab-pane",role:"tabpanel","aria-labelledby":"pricechart-tab"},lh={class:"row py-0 m-0 d-flex justify-content-center"},ih={class:"row p-2 mt-5"},ch={class:"col p-2"},dh=Fe(()=>n("hr",null,null,-1)),uh={class:"d-flex justify-content-between"},hh={class:"mx-4"},ph={key:0},gh=I({__name:"ColorsTheme",setup(t){const e=f(()=>[A.evuOut,A.devices,A.charging].concat(Object.values(T).map(r=>r.toPowerItem())).concat(Object.values(Ye).filter(r=>r.configured&&r.showInGraph)).concat([A.batIn,A.house])),a=le(!1);function s(){sa()}function o(){a.value=!a.value}return ze(()=>{s(),window.addEventListener("resize",sn),Hd()}),(r,l)=>(i(),h(W,null,[n("div",Du,[n("div",Wu,[m(Au)]),m(Ac),w("",!0),(i(),h("div",Eu,[m(pd,null,{item1:b(()=>[m(Gn)]),item2:b(()=>[m(Ho)]),item3:b(()=>[m(fs,{"usage-details":e.value},null,8,["usage-details"])]),_:1})])),d(_).showQuickAccess?w("",!0):(i(),h("div",Gu,[m(wt),m(kt),m(St),m($t)])),d(_).showQuickAccess?(i(),h("nav",ju,[Uu,d(re).isBatteryConfigured?(i(),h("a",zu,qu)):w("",!0),Ru,d(We).isEtEnabled?(i(),h("a",Hu,Yu)):w("",!0)])):w("",!0),d(_).showQuickAccess?(i(),h("div",Zu,[n("div",Xu,[n("div",Ku,[m(wt),m(kt),m(St),m($t)])]),n("div",eh,[n("div",th,[m(wt)])]),n("div",ah,[n("div",nh,[m(kt)])]),n("div",oh,[Object.keys(d(Ye)).length>0?(i(),h("div",sh,[m(St)])):w("",!0)]),n("div",rh,[n("div",lh,[m($t)])])])):w("",!0)]),n("div",ih,[n("div",ch,[dh,n("div",uh,[n("p",hh,"Screen Width: "+k(d(it).x),1),n("button",{class:"btn btn-sm btn-secondary mx-4",onClick:o}," MQ Viewer ")]),a.value?(i(),h("hr",ph)):w("",!0),a.value?(i(),B(Iu,{key:1})):w("",!0)])])],64))}});const mh=E(gh,[["__scopeId","data-v-42ab5d0a"]]);const fh={},Ma=t=>(K("data-v-75865e45"),t=t(),ee(),t),_h=Ma(()=>n("nav",{class:"navbar navbar-expand-lg px-3 mb-0"},[n("div",{class:"container-lg"},[n("a",{href:"/",class:"navbar-brand"},[n("span",null,"openWB")]),n("button",{class:"navbar-toggler togglebutton ps-5",type:"button","data-bs-toggle":"collapse","data-bs-target":"#mainNavbar","aria-controls":"mainNavbar","aria-expanded":"false","aria-label":"Toggle navigation"},[n("span",{class:"fa-solid fa-ellipsis-vertical"})]),n("div",{id:"mainNavbar",class:"collapse navbar-collapse justify-content-end"},[n("div",{class:"nav navbar-nav"},[n("a",{id:"navStatus",class:"nav-link",href:"../../settings/#/Status",target:"_parent"},"Status"),n("div",{class:"nav-item dropdown"},[n("a",{id:"loggingDropdown",class:"nav-link",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[j("Auswertungen "),n("i",{class:"fa-solid fa-caret-down"})]),n("div",{class:"dropdown-menu","aria-labelledby":"loggingDropdown"},[n("a",{href:"../../settings/#/Logging/ChargeLog",class:"dropdown-item",target:"_parent"},"Ladeprotokoll"),n("a",{href:"../../settings/#/Logging/Chart",class:"dropdown-item",target:"_parent"},"Diagramme")])]),n("div",{class:"nav-item dropdown"},[n("a",{id:"settingsDropdown",class:"nav-link",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[j("Einstellungen "),n("span",{class:"fa-solid fa-caret-down"})]),n("div",{class:"dropdown-menu","aria-labelledby":"settingsDropdown"},[n("a",{id:"navSettings",class:"nav-link",href:"../../settings/index.html",target:"_parent"},"openWB"),n("a",{class:"nav-link","data-bs-toggle":"collapse","data-bs-target":"#themesettings","aria-expanded":"false","aria-controls":"themeSettings"},[n("span",null,[j("Look&Feel"),n("span",{class:"fa-solid fa-caret-down"})])])])])])])])],-1)),vh=Ma(()=>n("hr",{class:"m-0 p-0 mb-2"},null,-1));function bh(t,e){return i(),h(W,null,[_h,vh],64)}const yh=E(fh,[["render",bh],["__scopeId","data-v-75865e45"]]),wh={id:"app",class:"m-0 p-0"},kh={class:"container-lg p-0"},$h={class:"row p-0 m-0"},Sh={class:"col-12 p-0 m-0"},xh=I({__name:"App",setup(t){return(e,a)=>(i(),h("div",wh,[m(yh),n("div",kh,[n("div",$h,[n("div",Sh,[m(mh)])])])]))}});const Ph=Ga(xh);ja();Ph.mount("#app");
