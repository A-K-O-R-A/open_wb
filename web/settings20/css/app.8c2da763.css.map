{"version":3,"sources":["webpack:///src/components/PageFooter.vue","webpack:///src/App.vue","webpack:///src/components/Card.vue","webpack:///src/components/Heading.vue"],"names":[],"mappings":"AAkBA,yBACC,cAAe,CACf,QAAS,CACT,UAAW,CACX,WAAY,CAEZ,gBAAiB,CAEjB,YAED,CAEA,4BACC,kBAAmB,CACnB,iBACD,CCqIA,KACC,6CAAiD,CACjD,kCAAmC,CACnC,iCACD,CAEA,sBACC,sBACD,CC/HA,uBACC,kBACD,CAEA,oCACC,eACD,CAEA,qHAIC,UACD,CAEA,uDAEC,aACD,CAEA,8PAGC,qBACD,CAEA,iEACC,2BACD,CAEA,mIAEC,iBACD,CCnEA,oCACC,cAAe,CACf,eAAiB,CACjB,eACD","file":"app.8c2da763.css","sourcesContent":["<template>\n\t<footer id=\"footer\" class=\"footer bg-dark text-light font-small\">\n\t\t<div class=\"container text-center\">\n\t\t\t<small>\n\t\t\t\tSie befinden sich hier: Einstellungen /\n\t\t\t\t{{ $route.meta.heading }}\n\t\t\t</small>\n\t\t</div>\n\t</footer>\n</template>\n\n<script>\nexport default {\n\tname: \"PageFooter\",\n};\n</script>\n\n<style scoped>\n.footer {\n\tposition: fixed;\n\tbottom: 0;\n\twidth: 100%;\n\theight: 30px;\n\t/* fixed height of footer */\n\tline-height: 30px;\n\t/* vertically center the text there */\n\tz-index: 1030;\n\t/* same as menue */\n}\n\n.container {\n\tpadding-right: 15px;\n\tpadding-left: 15px;\n}\n</style>\n","<template>\n\t<header>\n\t\t<nav-bar />\n\t</header>\n\t<div role=\"main\" class=\"container\">\n\t\t<div id=\"content\">\n\t\t\t<h1>{{ $route.meta.heading }}</h1>\n\t\t\t<router-view\n\t\t\t\t@save=\"saveValues()\"\n\t\t\t\t@reset=\"resetValues()\"\n\t\t\t\t@defaults=\"setDefaultValues()\"\n\t\t\t/>\n\t\t</div>\n\t\t<donation-banner />\n\t</div>\n\t<page-footer />\n</template>\n\n<script>\n// @ is an alias to /src\nimport NavBar from \"@/components/Navbar.vue\";\nimport PageFooter from \"@/components/PageFooter.vue\";\nimport DonationBanner from \"@/components/DonationBanner.vue\";\nimport mqtt from \"mqtt\";\n\nexport default {\n\tname: \"settings-app\",\n\tcomponents: {\n\t\tNavBar,\n\t\tPageFooter,\n\t\tDonationBanner,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tclient: {\n\t\t\t\tconnected: false,\n\t\t\t},\n\t\t\tsubscribeSuccess: false,\n\t\t\tconnection: {\n\t\t\t\thost: location.hostname,\n\t\t\t\tport: 9001,\n\t\t\t\tendpoint: \"/\",\n\t\t\t\tconnectTimeout: 4000,\n\t\t\t\treconnectPeriod: 4000,\n\t\t\t},\n\t\t};\n\t},\n\tcomputed: {\n\t\ttopicList() {\n\t\t\treturn Object.keys(this.$store.state.mqtt);\n\t\t},\n\t},\n\tmethods: {\n\t\tsaveValues() {\n\t\t\tconsole.debug(\"saving values...\");\n\t\t\t// *** may be useful if we implemented authentication ***\n\t\t\t// let data = JSON.stringify(this.$store.state.mqtt);\n\t\t\t// console.debug(\"data:\", data);\n\t\t\t// then post data to server\n\t\t\tlet topics = this.$store.state.mqtt;\n\t\t\t// console.debug(\"topics\", topics);\n\t\t\tfor (const [topic, payload] of Object.entries(topics)) {\n\t\t\t\tlet setTopic = topic.replace(\"openWB/\", \"openWB/set/\");\n\t\t\t\tconsole.debug(\"saving data:\", setTopic, payload);\n\t\t\t\tthis.doPublish(setTopic, payload);\n\t\t\t}\n\t\t},\n\t\tresetValues() {\n\t\t\tconsole.debug(\"resetting values...\");\n\t\t\t// simply unsubscribe and subscribe to broker\n\t\t\tlet topics = this.topicList;\n\t\t\tconsole.debug(\"topics: \", topics);\n\t\t\tthis.doUnsubscribe(topics);\n\t\t\tthis.doSubscribe(topics);\n\t\t},\n\t\tsetDefaultValues() {\n\t\t\tconsole.debug(\"setting default values...\");\n\t\t},\n\t\tcreateConnection() {\n\t\t\tconsole.debug(\"connecting to broker...\");\n\t\t\t// Connect string, and specify the connection method used through protocol\n\t\t\t// ws unencrypted WebSocket connection\n\t\t\t// wss encrypted WebSocket connection\n\t\t\t// mqtt unencrypted TCP connection\n\t\t\t// mqtts encrypted TCP connection\n\t\t\t// wxs WeChat mini app connection\n\t\t\t// alis Alipay mini app connection\n\t\t\tconst { host, port, endpoint, ...options } = this.connection;\n\t\t\tconst connectUrl = `ws://${host}:${port}${endpoint}`;\n\t\t\ttry {\n\t\t\t\tthis.client = mqtt.connect(connectUrl, options);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"mqtt.connect error\", error);\n\t\t\t}\n\t\t\tthis.client.on(\"connect\", () => {\n\t\t\t\tconsole.debug(\"Connection succeeded!\");\n\t\t\t\t// this.doSubscribe();\n\t\t\t});\n\t\t\tthis.client.on(\"error\", (error) => {\n\t\t\t\tconsole.error(\"Connection failed\", error);\n\t\t\t});\n\t\t\tthis.client.on(\"message\", (topic, message) => {\n\t\t\t\t// console.log(`Received message ${message} from topic ${topic}`);\n\t\t\t\ttry {\n\t\t\t\t\tthis.$store.commit(\"addTopic\", {\n\t\t\t\t\t\ttopic: topic,\n\t\t\t\t\t\tpayload: JSON.parse(message.toString()),\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.debug(\n\t\t\t\t\t\t\"Json parsing failed, fallback to string: \",\n\t\t\t\t\t\ttopic\n\t\t\t\t\t);\n\t\t\t\t\tthis.$store.commit(\"addTopic\", {\n\t\t\t\t\t\ttopic: topic,\n\t\t\t\t\t\tpayload: message.toString(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdoSubscribe(topics) {\n\t\t\tconsole.debug(\"subscribing to topics...\");\n\t\t\tthis.client.subscribe(topics, {}, (error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.error(\"Subscribe to topics error\", error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.subscribeSuccess = true;\n\t\t\t});\n\t\t},\n\t\tdoUnsubscribe(topics) {\n\t\t\tconsole.debug(\"unsubscribing topics...\");\n\t\t\tthis.client.unsubscribe(topics, (error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.error(\"Unsubscribe error\", error);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttopics.forEach((topic) => {\n\t\t\t\tthis.$store.commit(\"removeTopic\", topic);\n\t\t\t});\n\t\t},\n\t\tdoPublish(topic, payload) {\n\t\t\tlet options = {\n\t\t\t\tqos: 2,\n\t\t\t\tretain: true,\n\t\t\t};\n\t\t\tthis.client.publish(\n\t\t\t\ttopic,\n\t\t\t\tJSON.stringify(payload),\n\t\t\t\toptions,\n\t\t\t\t(error) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tconsole.log(\"Publish error\", error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t},\n\tcreated() {\n\t\tconsole.debug(\"app created\");\n\t\tthis.createConnection();\n\t},\n};\n</script>\n\n<style>\n#app {\n\tfont-family: Avenir, Helvetica, Arial, sans-serif;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n}\n\n.container[role=\"main\"] {\n\tpadding: 60px 15px 30px;\n}\n</style>\n","<template>\n\t<div class=\"card\" :class=\"'border-' + subtype\">\n\t\t<div class=\"card-header\" :class=\"'bg-' + subtype\">\n\t\t\t<div class=\"form-group mb-0\">\n\t\t\t\t<div class=\"form-row vaRow mb-1\">\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"card-body\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t\t<div v-if=\"$slots.footer\" class=\"card-footer\">\n\t\t\t<slot name=\"footer\"></slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: \"Card\",\n\tprops: {\n\t\ttitle: { type: String, default: \"# no title set #\" },\n\t\tsubtype: {\n\t\t\tvalidator: function (value) {\n\t\t\t\treturn (\n\t\t\t\t\t[\n\t\t\t\t\t\t\"info\",\n\t\t\t\t\t\t\"success\",\n\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\"danger\",\n\t\t\t\t\t\t\"primary\",\n\t\t\t\t\t\t\"secondary\",\n\t\t\t\t\t\t\"light\",\n\t\t\t\t\t\t\"dark\",\n\t\t\t\t\t].indexOf(value) !== -1\n\t\t\t\t);\n\t\t\t},\n\t\t\tdefault: \"secondary\",\n\t\t},\n\t},\n};\n</script>\n\n<style scoped>\n.card {\n\tmargin-bottom: 1rem;\n}\n\n.card .card-header {\n\tfont-weight: bold;\n}\n\n.bg-primary,\n.bg-secondary,\n.bg-danger,\n.bg-success {\n\tcolor: white;\n}\n\n.bg-warning,\n.bg-info {\n\tcolor: #212529;\n}\n\n.card-header.bg-secondary .btn-outline-info:not(.active):not(:hover),\n.card-header.bg-success .btn-outline-info:not(.active):not(:hover),\n.card-header.bg-primary .btn-outline-info:not(.active):not(:hover) {\n\tbackground-color: white;\n}\n\n.card-header.bg-success .btn-outline-info.focus {\n\tbox-shadow: 0 0 0 0.2rem white;\n}\n\n.card-header.bg-success .btn-outline-info.active,\n.card-header.bg-success .btn-outline-info:hover {\n\tborder-color: white;\n}\n</style>\n","<template>\n\t<div class=\"card-text card-text-heading\">\n\t\t<slot></slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: \"Heading\",\n};\n</script>\n\n<style scoped>\n.card-text-heading {\n\tfont-size: 125%;\n\tfont-weight: bold;\n\tmargin-top: 1rem;\n}\n</style>\n"]}