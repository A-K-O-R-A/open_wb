(self["webpackChunkopenwb_ui_settings"]=self["webpackChunkopenwb_ui_settings"]||[]).push([[3488],{9648:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Ce}});a(7327),a(1539);var i=a(6252),n=a(3577),l={class:"chargeLog"},o={name:"chargeLogForm"},s={class:"row justify-content-center"},r=(0,i.Uk)(" Filter anwenden "),g=(0,i.Uk)(" Es wurden noch keine Daten abgerufen. "),c={key:1};function d(e,t,a,d,u,p){var h=(0,i.up)("openwb-base-text-input"),v=(0,i.up)("openwb-base-button-group-input"),m=(0,i.up)("openwb-base-select-input"),b=(0,i.up)("openwb-base-alert"),f=(0,i.up)("openwb-base-card"),_=(0,i.up)("openwb-base-click-button"),w=(0,i.up)("vue3-table-lite");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("form",o,[(0,i.Wm)(f,{title:"Filter"},{footer:(0,i.w5)((function(){return[(0,i._)("div",s,[(0,i.Wm)(_,{class:"col-4 btn-success",onClick:t[5]||(t[5]=function(e){return p.requestChargeLog()})},{default:(0,i.w5)((function(){return[r]})),_:1})])]})),default:(0,i.w5)((function(){return[(0,i.Wm)(h,{title:"Zeitraum",subtype:"month",min:"2018-01",max:u.currentMonth,modelValue:p.chargeLogDate,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p.chargeLogDate=e})},null,8,["max","modelValue"]),(0,i.Wm)(f,{title:"Erweiterte Optionen",collapsible:!0,collapsed:!0},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{title:"Priorität",buttons:[{buttonValue:void 0,text:"Alle"},{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],modelValue:u.chargeLogRequestData.filter.vehicle.prio,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.chargeLogRequestData.filter.vehicle.prio=e})},null,8,["modelValue"]),(0,i.Wm)(v,{title:"Lademodus",buttons:[{buttonValue:void 0,text:"Alle"},{buttonValue:"instant_charging",text:"Sofort",class:"btn-outline-danger"},{buttonValue:"pv_charging",text:"PV",class:"btn-outline-success"},{buttonValue:"scheduled_charging",text:"Zielladen",class:"btn-outline-primary"},{buttonValue:"standby",text:"Standby",class:"btn-outline-secondary"},{buttonValue:"stop",text:"Stop",class:"btn-outline-dark"}],modelValue:u.chargeLogRequestData.filter.vehicle.chargemode[0],"onUpdate:modelValue":t[2]||(t[2]=function(e){return u.chargeLogRequestData.filter.vehicle.chargemode[0]=e})},null,8,["modelValue"]),(0,i.Wm)(m,{title:"Ladepunkt",multiple:"",options:p.chargePointList,modelValue:u.chargeLogRequestData.filter.chargepoint.id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return u.chargeLogRequestData.filter.chargepoint.id=e})},null,8,["options","modelValue"]),(0,i.Wm)(m,{title:"Fahrzeug",multiple:"",options:p.vehicleList,modelValue:u.chargeLogRequestData.filter.vehicle.id,"onUpdate:modelValue":t[4]||(t[4]=function(e){return u.chargeLogRequestData.filter.vehicle.id=e})},null,8,["options","modelValue"]),(0,i.Wm)(b,null,{default:(0,i.w5)((function(){return[(0,i.Uk)((0,n.zw)(u.chargeLogRequestData.filter),1)]})),_:1})]})),_:1})]})),_:1}),p.chargeLogRead?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(w,{class:"charge-log-table","is-static-mode":!0,columns:u.table.columns,rows:p.chargeLogDataset,total:p.totalRecordCount,sortable:u.table.sortable,messages:u.table.messages,"page-options":u.table.pageOptions,limit:25},null,8,["columns","rows","total","sortable","messages","page-options"])])):((0,i.wg)(),(0,i.j4)(b,{key:0,subtype:"info"},{default:(0,i.w5)((function(){return[g]})),_:1}))])])}var u=a(8818),p=(a(4916),a(3123),a(1249),a(3948),a(8309),a(9720),a(4723),a(3112),a(9963));const h=e=>((0,i.dD)("data-v-d8b63abc"),e=e(),(0,i.Cn)(),e),v={class:"card"},m={key:0,class:"vtl-title card-header"},b={class:"card-body"},f=h((()=>(0,i._)("p",{class:"card-title"},null,-1))),_={id:"dataTables-example_wrapper",class:"dataTables_wrapper dt-bootstrap4 no-footer"},w=h((()=>(0,i._)("div",{class:"row"},null,-1))),k={class:"row"},y={class:"col-sm-12"},D=h((()=>(0,i._)("div",{class:"row"},null,-1))),x={key:0,class:"loading-mask"},L=h((()=>(0,i._)("div",{class:"loading-content"},[(0,i._)("span",{style:{color:"white"}},"Loading...")],-1))),C=[L],S={class:"vtl-table table table-hover table-bordered table-responsive-sm",id:"dataTables-example",ref:"localTable"},P={class:"vtl-thead thead-dark"},q={class:"vtl-thead-tr"},R={key:0,class:"vtl-thead-th checkbox-th"},z=["onClick"],V={key:0,class:"vtl-tbody"},M={key:0,class:"vtl-tbody-td"},H=["value"],W=["innerHTML"],A={key:0},O={key:1},E={key:0,class:"vtl-tbody-td"},F=["value"],Y=["innerHTML"],T={key:1},j={key:0},B={key:1},N={key:0,class:"vtl-paging row"},I={class:"vtl-paging-info col-sm-12 col-md-4"},K={role:"status","aria-live":"polite"},U={class:"vtl-paging-change-div col-sm-12 col-md-4"},Z={class:"vtl-paging-count-label"},$=["value"],G={class:"vtl-paging-page-label"},J=["value"],X={class:"vtl-paging-pagination-div col-sm-12 col-md-4"},Q={class:"dataTables_paginate paging_simple_numbers",id:"dataTables-example_paginate"},ee={class:"vtl-paging-pagination-ul pagination"},te=h((()=>(0,i._)("span",{"aria-hidden":"true"},"«",-1))),ae=h((()=>(0,i._)("span",{class:"sr-only"},"First",-1))),ie=[te,ae],ne=h((()=>(0,i._)("span",{"aria-hidden":"true"},"<",-1))),le=h((()=>(0,i._)("span",{class:"sr-only"},"Prev",-1))),oe=[ne,le],se=["onClick"],re=h((()=>(0,i._)("span",{"aria-hidden":"true"},">",-1))),ge=h((()=>(0,i._)("span",{class:"sr-only"},"Next",-1))),ce=[re,ge],de=h((()=>(0,i._)("span",{"aria-hidden":"true"},"»",-1))),ue=h((()=>(0,i._)("span",{class:"sr-only"},"Last",-1))),pe=[de,ue],he={key:1,class:"row"},ve={class:"vtl-empty-msg col-sm-12 text-center"};function me(e,t,a,l,o,s){return(0,i.wg)(),(0,i.iD)("div",v,[e.title?((0,i.wg)(),(0,i.iD)("div",m,(0,n.zw)(e.title),1)):(0,i.kq)("",!0),(0,i._)("div",b,[f,(0,i._)("div",_,[w,(0,i._)("div",k,[(0,i._)("div",y,[D,e.isLoading?((0,i.wg)(),(0,i.iD)("div",x,C)):(0,i.kq)("",!0),(0,i._)("table",S,[(0,i._)("thead",P,[(0,i._)("tr",q,[e.hasCheckbox?((0,i.wg)(),(0,i.iD)("th",R,[(0,i._)("div",null,[(0,i.wy)((0,i._)("input",{type:"checkbox",class:"vtl-thead-checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.setting.isCheckAll=t)},null,512),[[p.e8,e.setting.isCheckAll]])])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((t,a)=>((0,i.wg)(),(0,i.iD)("th",{class:"vtl-thead-th",key:a,style:(0,n.j5)({width:t.width?t.width:"auto"})},[(0,i._)("div",{class:(0,n.C_)(["vtl-thead-column",{sortable:t.sortable,both:t.sortable,asc:e.setting.order===t.field&&"asc"===e.setting.sort,desc:e.setting.order===t.field&&"desc"===e.setting.sort}]),onClick:a=>!!t.sortable&&e.doSort(t.field)},(0,n.zw)(t.label),11,z)],4)))),128))])]),e.rows.length>0?((0,i.wg)(),(0,i.iD)("tbody",V,[e.isStaticMode?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.localRows,((a,l)=>((0,i.wg)(),(0,i.iD)("tr",{key:l,class:"vtl-tbody-tr"},[e.hasCheckbox?((0,i.wg)(),(0,i.iD)("td",M,[(0,i._)("div",null,[(0,i._)("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:t=>{e.rowCheckbox[l]=t},value:a[e.setting.keyColumn],onClick:t[1]||(t[1]=(...t)=>e.checked&&e.checked(...t))},null,8,H)])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((t,l)=>((0,i.wg)(),(0,i.iD)("td",{key:l,class:"vtl-tbody-td"},[t.display?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:t.display(a)},null,8,W)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[e.setting.isSlotMode&&e.slots[t.field]?((0,i.wg)(),(0,i.iD)("div",A,[(0,i.WI)(e.$slots,t.field,{value:a},void 0,!0)])):((0,i.wg)(),(0,i.iD)("span",O,(0,n.zw)(a[t.field]),1))],64))])))),128))])))),128)):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(e.rows,((a,l)=>((0,i.wg)(),(0,i.iD)("tr",{key:l,class:"vtl-tbody-tr"},[e.hasCheckbox?((0,i.wg)(),(0,i.iD)("td",E,[(0,i._)("div",null,[(0,i._)("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:t=>{e.rowCheckbox[l]=t},value:a[e.setting.keyColumn],onClick:t[2]||(t[2]=(...t)=>e.checked&&e.checked(...t))},null,8,F)])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((t,l)=>((0,i.wg)(),(0,i.iD)("td",{key:l,class:"vtl-tbody-td"},[t.display?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:t.display(a)},null,8,Y)):((0,i.wg)(),(0,i.iD)("div",T,[e.setting.isSlotMode&&e.slots[t.field]?((0,i.wg)(),(0,i.iD)("div",j,[(0,i.WI)(e.$slots,t.field,{value:a},void 0,!0)])):((0,i.wg)(),(0,i.iD)("span",B,(0,n.zw)(a[t.field]),1))]))])))),128))])))),128))])):(0,i.kq)("",!0)],512)])]),e.rows.length>0?((0,i.wg)(),(0,i.iD)("div",N,[e.setting.isHidePaging?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",I,[(0,i._)("div",K,(0,n.zw)(e.stringFormat(e.messages.pagingInfo,e.setting.offset,e.setting.limit,e.total)),1)]),(0,i._)("div",U,[(0,i._)("span",Z,(0,n.zw)(e.messages.pageSizeChangeLabel),1),(0,i.wy)((0,i._)("select",{class:"vtl-paging-count-dropdown","onUpdate:modelValue":t[3]||(t[3]=t=>e.setting.pageSize=t)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pageOptions,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.value,key:e.value},(0,n.zw)(e.text),9,$)))),128))],512),[[p.bM,e.setting.pageSize]]),(0,i._)("span",G,(0,n.zw)(e.messages.gotoPageLabel),1),(0,i.wy)((0,i._)("select",{class:"vtl-paging-page-dropdown","onUpdate:modelValue":t[4]||(t[4]=t=>e.setting.page=t)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.setting.maxPage,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:parseInt(e)},(0,n.zw)(e),9,J)))),128))],512),[[p.bM,e.setting.page]])]),(0,i._)("div",X,[(0,i._)("div",Q,[(0,i._)("ul",ee,[(0,i._)("li",{class:(0,n.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item",{disabled:e.setting.page<=1}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:t[5]||(t[5]=t=>e.setting.page=1)},ie)],2),(0,i._)("li",{class:(0,n.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item",{disabled:e.setting.page<=1}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:t[6]||(t[6]=(...t)=>e.prevPage&&e.prevPage(...t))},oe)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.setting.paging,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,n.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item",{disabled:e.setting.page===t}]),key:t},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link",href:"javascript:void(0)",onClick:a=>e.movePage(t)},(0,n.zw)(t),9,se)],2)))),128)),(0,i._)("li",{class:(0,n.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link",href:"javascript:void(0)","aria-label":"Next",onClick:t[7]||(t[7]=(...t)=>e.nextPage&&e.nextPage(...t))},ce)],2),(0,i._)("li",{class:(0,n.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link",href:"javascript:void(0)","aria-label":"Next",onClick:t[8]||(t[8]=t=>e.setting.page=e.setting.maxPage)},pe)],2)])])])],64))])):((0,i.wg)(),(0,i.iD)("div",he,[(0,i._)("div",ve,(0,n.zw)(e.messages.noDataAvailable),1)]))])])])}var be=a(2262),fe=(0,i.aZ)({name:"my-table",emits:["return-checked-rows","do-search","is-finished","get-now-page"],props:{isLoading:{type:Boolean,require:!0},isReSearch:{type:Boolean,require:!0},hasCheckbox:{type:Boolean,default:!1},title:{type:String,default:""},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},total:{type:Number,default:100},page:{type:Number,default:1},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})},messages:{type:Object,default:()=>({pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"})},isStaticMode:{type:Boolean,default:!1},isSlotMode:{type:Boolean,default:!1},isHidePaging:{type:Boolean,default:!1},pageOptions:{type:Array,default:()=>[{value:10,text:10},{value:25,text:25},{value:50,text:50}]}},setup(e,{emit:t,slots:a}){let n=(0,be.iH)(null),l=e.pageOptions.length>0?(0,be.iH)(e.pageOptions[0].value):(0,be.iH)(e.pageSize);e.pageOptions.length>0&&e.pageOptions.forEach((t=>{Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"text")&&e.pageSize==t.value&&(l.value=t.value)}));const o=(0,be.qj)({isSlotMode:e.isSlotMode,isCheckAll:!1,isHidePaging:e.isHidePaging,keyColumn:(0,i.Fl)((()=>{let t="";return Object.assign(e.columns).forEach((e=>{e.isKey&&(t=e.field)})),t})),page:e.page,pageSize:l.value,maxPage:(0,i.Fl)((()=>{if(e.total<=0)return 0;let t=Math.floor(e.total/o.pageSize),a=e.total%o.pageSize;return a>0&&t++,t})),offset:(0,i.Fl)((()=>(o.page-1)*o.pageSize+1)),limit:(0,i.Fl)((()=>{let t=o.page*o.pageSize;return e.total>=t?t:e.total})),paging:(0,i.Fl)((()=>{let e=o.page-2<=0?1:o.page-2;o.maxPage-o.page<=2&&(e=o.maxPage-4),e=e<=0?1:e;let t=[];for(let a=e;a<=o.maxPage;a++)t.length<5&&t.push(a);return t})),order:e.sortable.order,sort:e.sortable.sort,pageOptions:e.pageOptions}),s=(0,i.Fl)((()=>{let t=o.order,a=1;"desc"===o.sort&&(a=-1);let n=e.rows;n.sort(((e,i)=>e[t]<i[t]?-1*a:e[t]>i[t]?a:0));let l=[];for(let e=o.offset-1;e<o.limit;e++)n[e]&&l.push(n[e]);return(0,i.Y3)((function(){f()})),l})),r=(0,be.iH)([]);e.hasCheckbox&&((0,i.Xn)((()=>{r.value=[]})),(0,i.YP)((()=>o.isCheckAll),(e=>{let a=[];r.value.forEach((t=>{t&&(t.checked=e,t.checked&&a.push(t.value))})),t("return-checked-rows",a)})));const g=()=>{let e=[];r.value.forEach((t=>{t&&t.checked&&e.push(t.value)})),t("return-checked-rows",e)},c=()=>{r.value.forEach((e=>{e&&e.checked&&(e.checked=!1)})),t("return-checked-rows",[])},d=a=>{let i="asc";a==o.order&&"asc"==o.sort&&(i="desc");let n=(o.page-1)*o.pageSize,l=o.pageSize;o.order=a,o.sort=i,t("do-search",n,l,a,i),o.isCheckAll?o.isCheckAll=!1:e.hasCheckbox&&c()},u=(a,i)=>{o.isCheckAll=!1;let n=o.order,l=o.sort,s=(a-1)*o.pageSize,r=o.pageSize;(!e.isReSearch||a>1||a==i)&&t("do-search",s,r,n,l)};(0,i.YP)((()=>o.page),u),(0,i.YP)((()=>e.page),(e=>{e<=1?(o.page=1,t("get-now-page",o.page)):e>=o.maxPage?(o.page=o.maxPage,t("get-now-page",o.page)):o.page=e}));const p=()=>{1===o.page?u(o.page,o.page):(o.page=1,o.isCheckAll=!1)};(0,i.YP)((()=>o.pageSize),p);const h=()=>{if(1==o.page)return!1;o.page--},v=e=>{o.page=e},m=()=>{if(o.page>=o.maxPage)return!1;o.page++};(0,i.YP)((()=>e.rows),(()=>{(e.isReSearch||e.isStaticMode)&&(o.page=1),(0,i.Y3)((function(){e.isStaticMode||f()}))}));const b=(e,...t)=>e.replace(/{(\d+)}/g,(function(e,a){return"undefined"!=typeof t[a]?t[a]:e})),f=()=>{if(n.value){let e=n.value.getElementsByClassName("is-rows-el");t("is-finished",e)}t("get-now-page",o.page)};return(0,i.bv)((()=>{(0,i.Y3)((()=>{e.rows.length>0&&f()}))})),e.hasCheckbox?{slots:a,localTable:n,localRows:s,setting:o,rowCheckbox:r,checked:g,doSort:d,prevPage:h,movePage:v,nextPage:m,stringFormat:b}:{slots:a,localTable:n,localRows:s,setting:o,doSort:d,prevPage:h,movePage:v,nextPage:m,stringFormat:b}}}),_e=a(8118);const we=(0,_e.Z)(fe,[["render",me],["__scopeId","data-v-d8b63abc"]]);var ke=we,ye=ke,De=a(4912),xe={name:"OpenwbChargeLog",components:{Vue3TableLite:ye},mixins:[De.Z],emits:["sendCommand"],data:function(){var e=this;return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/chargepoint/+/config","openWB/vehicle/+/name"],currentMonth:"",chargeLogRequestData:{month:"",year:"",filter:{chargepoint:{id:[]},vehicle:{id:[],chargemode:[],prio:void 0}}},table:{messages:{pagingInfo:"Einträge {0}-{1} von {2}",pageSizeChangeLabel:"Einträge:",gotoPageLabel:" Gehe zu:",noDataAvailable:"Keine Einträge gefunden."},"is-hide-paging":!0,pageOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:25,text:"25"},{value:50,text:"50"},{value:100,text:"100"}],columns:[{label:"Beginn",field:"time_begin",sortable:!0},{label:"Ende",field:"time_end",sortable:!0},{label:"Fahrzeug",field:"vehicle_name"},{label:"Dauer",field:"time_time_charged",sortable:!0,display:function(t){return e.alignEnd(t.time_time_charged)}},{label:"Energie",field:"data_charged_since_plugged_counter",sortable:!0,display:function(t){return e.alignEnd(e.formatNumber(t.data_charged_since_plugged_counter/1e3,2)+"&nbsp;kWh / "+e.formatNumber(t.data_range_charged/1e3,0)+"&nbspkm")}},{label:"Kosten",field:"data_costs",sortable:!0,display:function(t){return e.alignEnd(e.formatNumber(t.data_costs/1e3,2)+"&nbsp;€")}},{label:"Lademodus",field:"vehicle_chargemode",display:function(t){return e.translateChargeMode(t.vehicle_chargemode)}},{label:"Ladepunkt",field:"chargepoint_name"},{label:"Priorität",field:"vehicle_prio",display:function(t){return e.translateBool(t.vehicle_prio)}}],sortable:{order:"time_begin",sort:"asc"}}}},computed:{chargeLogDate:{get:function(){return this.chargeLogRequestData.year+"-"+this.chargeLogRequestData.month},set:function(e){var t=e.split("-");this.chargeLogRequestData.year=t[0],this.chargeLogRequestData.month=t[1]}},chargeLogDataset:{get:function(){var e=new Intl.DateTimeFormat("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});try{return this.$store.state.mqtt["openWB/log/"+this.mqttClientId+"/data"]["entries"].map((function(t){return{chargepoint_id:t["chargepoint"]["id"],chargepoint_name:t["chargepoint"]["name"],vehicle_id:t["vehicle"]["id"],vehicle_name:t["vehicle"]["name"],vehicle_chargemode:t["vehicle"]["chargemode"],vehicle_rfid:t["vehicle"]["rfid"],vehicle_prio:t["vehicle"]["prio"],time_begin:e.format(new Date(t["time"]["begin"])),time_end:e.format(new Date(t["time"]["end"])),time_time_charged:t["time"]["time_charged"],data_power:t["data"]["power"],data_range_charged:t["data"]["range_charged"],data_costs:t["data"]["costs"],data_charged_since_plugged_counter:t["data"]["charged_since_plugged_counter"],data_charged_since_mode_switch:t["data"]["charged_since_mode_switch"]}}))}catch(t){return[]}}},chargeLogRead:{get:function(){return void 0!=this.chargeLogDataset}},chargeLogHasEntries:{get:function(){return void 0!=this.chargeLogDataset&&this.chargeLogDataset.length>0}},totalRecordCount:function(){return this.chargeLogDataset.length},chargePointList:function(){for(var e=this.getWildcardTopics("openWB/chargepoint/+/config"),t=[{value:void 0,text:"Alle"}],a=0,i=Object.entries(e);a<i.length;a++){var n=(0,u.Z)(i[a],2),l=n[1];t.push({value:l.id,text:l.name})}return t},vehicleList:function(){for(var e=this.getWildcardTopics("openWB/vehicle/+/name"),t=[{value:void 0,text:"Alle"}],a=0,i=Object.entries(e);a<i.length;a++){var n=(0,u.Z)(i[a],2),l=n[0],o=n[1],s=parseInt(l.match(/\/([0-9]+)\/name$/)[1]);t.push({value:s,text:o})}return t}},methods:{cleanRequestData:function(){"id"in this.chargeLogRequestData.filter.chargepoint&&(this.chargeLogRequestData.filter.chargepoint.id=this.chargeLogRequestData.filter.chargepoint.id.filter((function(e){return void 0!=e}))),"chargemode"in this.chargeLogRequestData.filter.vehicle&&(this.chargeLogRequestData.filter.vehicle.chargemode=this.chargeLogRequestData.filter.vehicle.chargemode.filter((function(e){return void 0!=e}))),"id"in this.chargeLogRequestData.filter.vehicle&&(this.chargeLogRequestData.filter.vehicle.id=this.chargeLogRequestData.filter.vehicle.id.filter((function(e){return void 0!=e})))},requestChargeLog:function(){var e=document.forms["chargeLogForm"];e.reportValidity()?(this.cleanRequestData(),this.$emit("sendCommand",{command:"getChargeLog",data:this.chargeLogRequestData})):console.log("form invalid")},alignEnd:function(e){return'<div class="td-end">'+e+"</div>"},alignCenter:function(e){return'<div class="td-center">'+e+"</div>"},translateBool:function(e){var t="Nein",a="bg-danger";return e&&(t="Ja",a="bg-success"),'<div class="td-center tag '+a+'">'+t+"</div>"},translateChargeMode:function(e){var t="bg-light",a=e;switch(e){case"instant_charging":t="bg-danger",a="Sofort";break;case"pv_charging":t="bg-success",a="PV";break;case"scheduled_charging":t="bg-primary",a="Zielladen";break;case"standby":t="bg-secondary",a="Standby";break;case"stop":t="bg-dark",a="Stop";break;default:console.warn("unknown charge mode:",e)}return'<div class="td-center tag '+t+'">'+a+"</div>"},formatNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:a})}},mounted:function(){var e=new Date;this.currentMonth=this.chargeLogDate=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0"),this.requestChargeLog()}};const Le=(0,_e.Z)(xe,[["render",d],["__scopeId","data-v-a3e213e6"]]);var Ce=Le},4986:function(e,t,a){var i=a(8113);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},6650:function(e,t,a){var i=a(1702),n=a(7466),l=a(1340),o=a(8415),s=a(4488),r=i(o),g=i("".slice),c=Math.ceil,d=function(e){return function(t,a,i){var o,d,u=l(s(t)),p=n(a),h=u.length,v=void 0===i?" ":l(i);return p<=h||""==v?u:(o=p-h,d=r(v,c(o/v.length)),d.length>o&&(d=g(d,0,o)),e?u+d:d+u)}};e.exports={start:d(!1),end:d(!0)}},8415:function(e,t,a){"use strict";var i=a(7854),n=a(9303),l=a(1340),o=a(4488),s=i.RangeError;e.exports=function(e){var t=l(o(this)),a="",i=n(e);if(i<0||i==1/0)throw s("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},1249:function(e,t,a){"use strict";var i=a(2109),n=a(2092).map,l=a(1194),o=l("map");i({target:"Array",proto:!0,forced:!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},3112:function(e,t,a){"use strict";var i=a(2109),n=a(6650).start,l=a(4986);i({target:"String",proto:!0,forced:l},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=ChargeLog-legacy.61a92eae.js.map