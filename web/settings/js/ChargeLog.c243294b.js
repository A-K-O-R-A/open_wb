"use strict";(self["webpackChunkopenwb_ui_settings"]=self["webpackChunkopenwb_ui_settings"]||[]).push([[3488],{9648:function(e,a,t){t.r(a),t.d(a,{default:function(){return Le}});var i=t(6252),l=t(3577);const s={class:"chargeLog"},o={name:"chargeLogForm"},n={class:"row justify-content-center"},g=(0,i.Uk)(" Filter anwenden "),r=(0,i.Uk)(" Es wurden noch keine Daten abgerufen. "),c={key:1};function d(e,a,t,d,p,u){const h=(0,i.up)("openwb-base-text-input"),v=(0,i.up)("openwb-base-button-group-input"),m=(0,i.up)("openwb-base-select-input"),b=(0,i.up)("openwb-base-alert"),_=(0,i.up)("openwb-base-card"),f=(0,i.up)("openwb-base-click-button"),k=(0,i.up)("vue3-table-lite");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("form",o,[(0,i.Wm)(_,{title:"Filter"},{footer:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(f,{class:"col-4 btn-success",onClick:a[5]||(a[5]=e=>u.requestChargeLog())},{default:(0,i.w5)((()=>[g])),_:1})])])),default:(0,i.w5)((()=>[(0,i.Wm)(h,{title:"Zeitraum",subtype:"month",min:"2018-01",max:p.currentMonth,modelValue:u.chargeLogDate,"onUpdate:modelValue":a[0]||(a[0]=e=>u.chargeLogDate=e)},null,8,["max","modelValue"]),(0,i.Wm)(_,{title:"Erweiterte Optionen",collapsible:!0,collapsed:!0},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{title:"Priorität",buttons:[{buttonValue:void 0,text:"Alle"},{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],modelValue:p.chargeLogRequestData.filter.vehicle.prio,"onUpdate:modelValue":a[1]||(a[1]=e=>p.chargeLogRequestData.filter.vehicle.prio=e)},null,8,["modelValue"]),(0,i.Wm)(v,{title:"Lademodus",buttons:[{buttonValue:void 0,text:"Alle"},{buttonValue:"instant_charging",text:"Sofort",class:"btn-outline-danger"},{buttonValue:"pv_charging",text:"PV",class:"btn-outline-success"},{buttonValue:"scheduled_charging",text:"Zielladen",class:"btn-outline-primary"},{buttonValue:"standby",text:"Standby",class:"btn-outline-secondary"},{buttonValue:"stop",text:"Stop",class:"btn-outline-dark"}],modelValue:p.chargeLogRequestData.filter.vehicle.chargemode[0],"onUpdate:modelValue":a[2]||(a[2]=e=>p.chargeLogRequestData.filter.vehicle.chargemode[0]=e)},null,8,["modelValue"]),(0,i.Wm)(m,{title:"Ladepunkt",multiple:"",options:u.chargePointList,modelValue:p.chargeLogRequestData.filter.chargepoint.id,"onUpdate:modelValue":a[3]||(a[3]=e=>p.chargeLogRequestData.filter.chargepoint.id=e)},null,8,["options","modelValue"]),(0,i.Wm)(m,{title:"Fahrzeug",multiple:"",options:u.vehicleList,modelValue:p.chargeLogRequestData.filter.vehicle.id,"onUpdate:modelValue":a[4]||(a[4]=e=>p.chargeLogRequestData.filter.vehicle.id=e)},null,8,["options","modelValue"]),(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(p.chargeLogRequestData.filter),1)])),_:1})])),_:1})])),_:1}),u.chargeLogRead?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(k,{class:"charge-log-table","is-static-mode":!0,columns:p.table.columns,rows:u.chargeLogDataset,total:u.totalRecordCount,sortable:p.table.sortable,messages:p.table.messages,"page-options":p.table.pageOptions,limit:25},null,8,["columns","rows","total","sortable","messages","page-options"])])):((0,i.wg)(),(0,i.j4)(b,{key:0,subtype:"info"},{default:(0,i.w5)((()=>[r])),_:1}))])])}var p=t(9963);const u=e=>((0,i.dD)("data-v-d8b63abc"),e=e(),(0,i.Cn)(),e),h={class:"card"},v={key:0,class:"vtl-title card-header"},m={class:"card-body"},b=u((()=>(0,i._)("p",{class:"card-title"},null,-1))),_={id:"dataTables-example_wrapper",class:"dataTables_wrapper dt-bootstrap4 no-footer"},f=u((()=>(0,i._)("div",{class:"row"},null,-1))),k={class:"row"},w={class:"col-sm-12"},y=u((()=>(0,i._)("div",{class:"row"},null,-1))),D={key:0,class:"loading-mask"},x=u((()=>(0,i._)("div",{class:"loading-content"},[(0,i._)("span",{style:{color:"white"}},"Loading...")],-1))),L=[x],C={class:"vtl-table table table-hover table-bordered table-responsive-sm",id:"dataTables-example",ref:"localTable"},P={class:"vtl-thead thead-dark"},S={class:"vtl-thead-tr"},q={key:0,class:"vtl-thead-th checkbox-th"},R=["onClick"],z={key:0,class:"vtl-tbody"},V={key:0,class:"vtl-tbody-td"},H=["value"],M=["innerHTML"],O={key:0},W={key:1},A={key:0,class:"vtl-tbody-td"},F=["value"],E=["innerHTML"],Y={key:1},T={key:0},j={key:1},B={key:0,class:"vtl-paging row"},N={class:"vtl-paging-info col-sm-12 col-md-4"},I={role:"status","aria-live":"polite"},K={class:"vtl-paging-change-div col-sm-12 col-md-4"},U={class:"vtl-paging-count-label"},Z=["value"],$={class:"vtl-paging-page-label"},G=["value"],J={class:"vtl-paging-pagination-div col-sm-12 col-md-4"},X={class:"dataTables_paginate paging_simple_numbers",id:"dataTables-example_paginate"},Q={class:"vtl-paging-pagination-ul pagination"},ee=u((()=>(0,i._)("span",{"aria-hidden":"true"},"«",-1))),ae=u((()=>(0,i._)("span",{class:"sr-only"},"First",-1))),te=[ee,ae],ie=u((()=>(0,i._)("span",{"aria-hidden":"true"},"<",-1))),le=u((()=>(0,i._)("span",{class:"sr-only"},"Prev",-1))),se=[ie,le],oe=["onClick"],ne=u((()=>(0,i._)("span",{"aria-hidden":"true"},">",-1))),ge=u((()=>(0,i._)("span",{class:"sr-only"},"Next",-1))),re=[ne,ge],ce=u((()=>(0,i._)("span",{"aria-hidden":"true"},"»",-1))),de=u((()=>(0,i._)("span",{class:"sr-only"},"Last",-1))),pe=[ce,de],ue={key:1,class:"row"},he={class:"vtl-empty-msg col-sm-12 text-center"};function ve(e,a,t,s,o,n){return(0,i.wg)(),(0,i.iD)("div",h,[e.title?((0,i.wg)(),(0,i.iD)("div",v,(0,l.zw)(e.title),1)):(0,i.kq)("",!0),(0,i._)("div",m,[b,(0,i._)("div",_,[f,(0,i._)("div",k,[(0,i._)("div",w,[y,e.isLoading?((0,i.wg)(),(0,i.iD)("div",D,L)):(0,i.kq)("",!0),(0,i._)("table",C,[(0,i._)("thead",P,[(0,i._)("tr",S,[e.hasCheckbox?((0,i.wg)(),(0,i.iD)("th",q,[(0,i._)("div",null,[(0,i.wy)((0,i._)("input",{type:"checkbox",class:"vtl-thead-checkbox","onUpdate:modelValue":a[0]||(a[0]=a=>e.setting.isCheckAll=a)},null,512),[[p.e8,e.setting.isCheckAll]])])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((a,t)=>((0,i.wg)(),(0,i.iD)("th",{class:"vtl-thead-th",key:t,style:(0,l.j5)({width:a.width?a.width:"auto"})},[(0,i._)("div",{class:(0,l.C_)(["vtl-thead-column",{sortable:a.sortable,both:a.sortable,asc:e.setting.order===a.field&&"asc"===e.setting.sort,desc:e.setting.order===a.field&&"desc"===e.setting.sort}]),onClick:t=>!!a.sortable&&e.doSort(a.field)},(0,l.zw)(a.label),11,R)],4)))),128))])]),e.rows.length>0?((0,i.wg)(),(0,i.iD)("tbody",z,[e.isStaticMode?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.localRows,((t,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:s,class:"vtl-tbody-tr"},[e.hasCheckbox?((0,i.wg)(),(0,i.iD)("td",V,[(0,i._)("div",null,[(0,i._)("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:a=>{e.rowCheckbox[s]=a},value:t[e.setting.keyColumn],onClick:a[1]||(a[1]=(...a)=>e.checked&&e.checked(...a))},null,8,H)])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((a,s)=>((0,i.wg)(),(0,i.iD)("td",{key:s,class:"vtl-tbody-td"},[a.display?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:a.display(t)},null,8,M)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[e.setting.isSlotMode&&e.slots[a.field]?((0,i.wg)(),(0,i.iD)("div",O,[(0,i.WI)(e.$slots,a.field,{value:t},void 0,!0)])):((0,i.wg)(),(0,i.iD)("span",W,(0,l.zw)(t[a.field]),1))],64))])))),128))])))),128)):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(e.rows,((t,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:s,class:"vtl-tbody-tr"},[e.hasCheckbox?((0,i.wg)(),(0,i.iD)("td",A,[(0,i._)("div",null,[(0,i._)("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:a=>{e.rowCheckbox[s]=a},value:t[e.setting.keyColumn],onClick:a[2]||(a[2]=(...a)=>e.checked&&e.checked(...a))},null,8,F)])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((a,s)=>((0,i.wg)(),(0,i.iD)("td",{key:s,class:"vtl-tbody-td"},[a.display?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:a.display(t)},null,8,E)):((0,i.wg)(),(0,i.iD)("div",Y,[e.setting.isSlotMode&&e.slots[a.field]?((0,i.wg)(),(0,i.iD)("div",T,[(0,i.WI)(e.$slots,a.field,{value:t},void 0,!0)])):((0,i.wg)(),(0,i.iD)("span",j,(0,l.zw)(t[a.field]),1))]))])))),128))])))),128))])):(0,i.kq)("",!0)],512)])]),e.rows.length>0?((0,i.wg)(),(0,i.iD)("div",B,[e.setting.isHidePaging?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",N,[(0,i._)("div",I,(0,l.zw)(e.stringFormat(e.messages.pagingInfo,e.setting.offset,e.setting.limit,e.total)),1)]),(0,i._)("div",K,[(0,i._)("span",U,(0,l.zw)(e.messages.pageSizeChangeLabel),1),(0,i.wy)((0,i._)("select",{class:"vtl-paging-count-dropdown","onUpdate:modelValue":a[3]||(a[3]=a=>e.setting.pageSize=a)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pageOptions,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.value,key:e.value},(0,l.zw)(e.text),9,Z)))),128))],512),[[p.bM,e.setting.pageSize]]),(0,i._)("span",$,(0,l.zw)(e.messages.gotoPageLabel),1),(0,i.wy)((0,i._)("select",{class:"vtl-paging-page-dropdown","onUpdate:modelValue":a[4]||(a[4]=a=>e.setting.page=a)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.setting.maxPage,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:parseInt(e)},(0,l.zw)(e),9,G)))),128))],512),[[p.bM,e.setting.page]])]),(0,i._)("div",J,[(0,i._)("div",X,[(0,i._)("ul",Q,[(0,i._)("li",{class:(0,l.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item",{disabled:e.setting.page<=1}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:a[5]||(a[5]=a=>e.setting.page=1)},te)],2),(0,i._)("li",{class:(0,l.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item",{disabled:e.setting.page<=1}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:a[6]||(a[6]=(...a)=>e.prevPage&&e.prevPage(...a))},se)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.setting.paging,(a=>((0,i.wg)(),(0,i.iD)("li",{class:(0,l.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item",{disabled:e.setting.page===a}]),key:a},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link",href:"javascript:void(0)",onClick:t=>e.movePage(a)},(0,l.zw)(a),9,oe)],2)))),128)),(0,i._)("li",{class:(0,l.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link",href:"javascript:void(0)","aria-label":"Next",onClick:a[7]||(a[7]=(...a)=>e.nextPage&&e.nextPage(...a))},re)],2),(0,i._)("li",{class:(0,l.C_)(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item",{disabled:e.setting.page>=e.setting.maxPage}])},[(0,i._)("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link",href:"javascript:void(0)","aria-label":"Next",onClick:a[8]||(a[8]=a=>e.setting.page=e.setting.maxPage)},pe)],2)])])])],64))])):((0,i.wg)(),(0,i.iD)("div",ue,[(0,i._)("div",he,(0,l.zw)(e.messages.noDataAvailable),1)]))])])])}var me=t(2262),be=(0,i.aZ)({name:"my-table",emits:["return-checked-rows","do-search","is-finished","get-now-page"],props:{isLoading:{type:Boolean,require:!0},isReSearch:{type:Boolean,require:!0},hasCheckbox:{type:Boolean,default:!1},title:{type:String,default:""},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},total:{type:Number,default:100},page:{type:Number,default:1},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})},messages:{type:Object,default:()=>({pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"})},isStaticMode:{type:Boolean,default:!1},isSlotMode:{type:Boolean,default:!1},isHidePaging:{type:Boolean,default:!1},pageOptions:{type:Array,default:()=>[{value:10,text:10},{value:25,text:25},{value:50,text:50}]}},setup(e,{emit:a,slots:t}){let l=(0,me.iH)(null),s=e.pageOptions.length>0?(0,me.iH)(e.pageOptions[0].value):(0,me.iH)(e.pageSize);e.pageOptions.length>0&&e.pageOptions.forEach((a=>{Object.prototype.hasOwnProperty.call(a,"value")&&Object.prototype.hasOwnProperty.call(a,"text")&&e.pageSize==a.value&&(s.value=a.value)}));const o=(0,me.qj)({isSlotMode:e.isSlotMode,isCheckAll:!1,isHidePaging:e.isHidePaging,keyColumn:(0,i.Fl)((()=>{let a="";return Object.assign(e.columns).forEach((e=>{e.isKey&&(a=e.field)})),a})),page:e.page,pageSize:s.value,maxPage:(0,i.Fl)((()=>{if(e.total<=0)return 0;let a=Math.floor(e.total/o.pageSize),t=e.total%o.pageSize;return t>0&&a++,a})),offset:(0,i.Fl)((()=>(o.page-1)*o.pageSize+1)),limit:(0,i.Fl)((()=>{let a=o.page*o.pageSize;return e.total>=a?a:e.total})),paging:(0,i.Fl)((()=>{let e=o.page-2<=0?1:o.page-2;o.maxPage-o.page<=2&&(e=o.maxPage-4),e=e<=0?1:e;let a=[];for(let t=e;t<=o.maxPage;t++)a.length<5&&a.push(t);return a})),order:e.sortable.order,sort:e.sortable.sort,pageOptions:e.pageOptions}),n=(0,i.Fl)((()=>{let a=o.order,t=1;"desc"===o.sort&&(t=-1);let l=e.rows;l.sort(((e,i)=>e[a]<i[a]?-1*t:e[a]>i[a]?t:0));let s=[];for(let e=o.offset-1;e<o.limit;e++)l[e]&&s.push(l[e]);return(0,i.Y3)((function(){_()})),s})),g=(0,me.iH)([]);e.hasCheckbox&&((0,i.Xn)((()=>{g.value=[]})),(0,i.YP)((()=>o.isCheckAll),(e=>{let t=[];g.value.forEach((a=>{a&&(a.checked=e,a.checked&&t.push(a.value))})),a("return-checked-rows",t)})));const r=()=>{let e=[];g.value.forEach((a=>{a&&a.checked&&e.push(a.value)})),a("return-checked-rows",e)},c=()=>{g.value.forEach((e=>{e&&e.checked&&(e.checked=!1)})),a("return-checked-rows",[])},d=t=>{let i="asc";t==o.order&&"asc"==o.sort&&(i="desc");let l=(o.page-1)*o.pageSize,s=o.pageSize;o.order=t,o.sort=i,a("do-search",l,s,t,i),o.isCheckAll?o.isCheckAll=!1:e.hasCheckbox&&c()},p=(t,i)=>{o.isCheckAll=!1;let l=o.order,s=o.sort,n=(t-1)*o.pageSize,g=o.pageSize;(!e.isReSearch||t>1||t==i)&&a("do-search",n,g,l,s)};(0,i.YP)((()=>o.page),p),(0,i.YP)((()=>e.page),(e=>{e<=1?(o.page=1,a("get-now-page",o.page)):e>=o.maxPage?(o.page=o.maxPage,a("get-now-page",o.page)):o.page=e}));const u=()=>{1===o.page?p(o.page,o.page):(o.page=1,o.isCheckAll=!1)};(0,i.YP)((()=>o.pageSize),u);const h=()=>{if(1==o.page)return!1;o.page--},v=e=>{o.page=e},m=()=>{if(o.page>=o.maxPage)return!1;o.page++};(0,i.YP)((()=>e.rows),(()=>{(e.isReSearch||e.isStaticMode)&&(o.page=1),(0,i.Y3)((function(){e.isStaticMode||_()}))}));const b=(e,...a)=>e.replace(/{(\d+)}/g,(function(e,t){return"undefined"!=typeof a[t]?a[t]:e})),_=()=>{if(l.value){let e=l.value.getElementsByClassName("is-rows-el");a("is-finished",e)}a("get-now-page",o.page)};return(0,i.bv)((()=>{(0,i.Y3)((()=>{e.rows.length>0&&_()}))})),e.hasCheckbox?{slots:t,localTable:l,localRows:n,setting:o,rowCheckbox:g,checked:r,doSort:d,prevPage:h,movePage:v,nextPage:m,stringFormat:b}:{slots:t,localTable:l,localRows:n,setting:o,doSort:d,prevPage:h,movePage:v,nextPage:m,stringFormat:b}}}),_e=t(8118);const fe=(0,_e.Z)(be,[["render",ve],["__scopeId","data-v-d8b63abc"]]);var ke=fe,we=ke,ye=t(6061),De={name:"OpenwbChargeLog",components:{Vue3TableLite:we},mixins:[ye.Z],emits:["sendCommand"],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/chargepoint/+/config","openWB/vehicle/+/name"],currentMonth:"",chargeLogRequestData:{month:"",year:"",filter:{chargepoint:{id:[]},vehicle:{id:[],chargemode:[],prio:void 0}}},table:{messages:{pagingInfo:"Einträge {0}-{1} von {2}",pageSizeChangeLabel:"Einträge:",gotoPageLabel:" Gehe zu:",noDataAvailable:"Keine Einträge gefunden."},"is-hide-paging":!0,pageOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:25,text:"25"},{value:50,text:"50"},{value:100,text:"100"}],columns:[{label:"Beginn",field:"time_begin",sortable:!0},{label:"Ende",field:"time_end",sortable:!0},{label:"Fahrzeug",field:"vehicle_name"},{label:"Dauer",field:"time_time_charged",sortable:!0,display:e=>this.alignEnd(e.time_time_charged)},{label:"Energie",field:"data_charged_since_plugged_counter",sortable:!0,display:e=>this.alignEnd(this.formatNumber(e.data_charged_since_plugged_counter/1e3,2)+"&nbsp;kWh / "+this.formatNumber(e.data_range_charged/1e3,0)+"&nbspkm")},{label:"Kosten",field:"data_costs",sortable:!0,display:e=>this.alignEnd(this.formatNumber(e.data_costs/1e3,2)+"&nbsp;€")},{label:"Lademodus",field:"vehicle_chargemode",display:e=>this.translateChargeMode(e.vehicle_chargemode)},{label:"Ladepunkt",field:"chargepoint_name"},{label:"Priorität",field:"vehicle_prio",display:e=>this.translateBool(e.vehicle_prio)}],sortable:{order:"time_begin",sort:"asc"}}}},computed:{chargeLogDate:{get(){return this.chargeLogRequestData.year+"-"+this.chargeLogRequestData.month},set(e){let a=e.split("-");this.chargeLogRequestData.year=a[0],this.chargeLogRequestData.month=a[1]}},chargeLogDataset:{get(){let e=new Intl.DateTimeFormat("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});try{return this.$store.state.mqtt["openWB/log/"+this.mqttClientId+"/data"]["entries"].map((a=>({chargepoint_id:a["chargepoint"]["id"],chargepoint_name:a["chargepoint"]["name"],vehicle_id:a["vehicle"]["id"],vehicle_name:a["vehicle"]["name"],vehicle_chargemode:a["vehicle"]["chargemode"],vehicle_rfid:a["vehicle"]["rfid"],vehicle_prio:a["vehicle"]["prio"],time_begin:e.format(new Date(a["time"]["begin"])),time_end:e.format(new Date(a["time"]["end"])),time_time_charged:a["time"]["time_charged"],data_power:a["data"]["power"],data_range_charged:a["data"]["range_charged"],data_costs:a["data"]["costs"],data_charged_since_plugged_counter:a["data"]["charged_since_plugged_counter"],data_charged_since_mode_switch:a["data"]["charged_since_mode_switch"]})))}catch(a){return[]}}},chargeLogRead:{get(){return void 0!=this.chargeLogDataset}},chargeLogHasEntries:{get(){return void 0!=this.chargeLogDataset&&this.chargeLogDataset.length>0}},totalRecordCount(){return this.chargeLogDataset.length},chargePointList(){let e=this.getWildcardTopics("openWB/chargepoint/+/config");var a=[{value:void 0,text:"Alle"}];for(const[,t]of Object.entries(e))a.push({value:t.id,text:t.name});return a},vehicleList(){let e=this.getWildcardTopics("openWB/vehicle/+/name");var a=[{value:void 0,text:"Alle"}];for(const[t,i]of Object.entries(e)){let e=parseInt(t.match(/\/([0-9]+)\/name$/)[1]);a.push({value:e,text:i})}return a}},methods:{cleanRequestData(){"id"in this.chargeLogRequestData.filter.chargepoint&&(this.chargeLogRequestData.filter.chargepoint.id=this.chargeLogRequestData.filter.chargepoint.id.filter((e=>void 0!=e))),"chargemode"in this.chargeLogRequestData.filter.vehicle&&(this.chargeLogRequestData.filter.vehicle.chargemode=this.chargeLogRequestData.filter.vehicle.chargemode.filter((e=>void 0!=e))),"id"in this.chargeLogRequestData.filter.vehicle&&(this.chargeLogRequestData.filter.vehicle.id=this.chargeLogRequestData.filter.vehicle.id.filter((e=>void 0!=e)))},requestChargeLog(){let e=document.forms["chargeLogForm"];e.reportValidity()?(this.cleanRequestData(),this.$emit("sendCommand",{command:"getChargeLog",data:this.chargeLogRequestData})):console.log("form invalid")},alignEnd(e){return'<div class="td-end">'+e+"</div>"},alignCenter(e){return'<div class="td-center">'+e+"</div>"},translateBool(e){let a="Nein",t="bg-danger";return e&&(a="Ja",t="bg-success"),'<div class="td-center tag '+t+'">'+a+"</div>"},translateChargeMode(e){let a="bg-light",t=e;switch(e){case"instant_charging":a="bg-danger",t="Sofort";break;case"pv_charging":a="bg-success",t="PV";break;case"scheduled_charging":a="bg-primary",t="Zielladen";break;case"standby":a="bg-secondary",t="Standby";break;case"stop":a="bg-dark",t="Stop";break;default:console.warn("unknown charge mode:",e)}return'<div class="td-center tag '+a+'">'+t+"</div>"},formatNumber(e,a=0,t=a){return e.toLocaleString(void 0,{minimumFractionDigits:a,maximumFractionDigits:t})}},mounted(){const e=new Date;this.currentMonth=this.chargeLogDate=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0"),this.requestChargeLog()}};const xe=(0,_e.Z)(De,[["render",d],["__scopeId","data-v-a3e213e6"]]);var Le=xe}}]);
//# sourceMappingURL=ChargeLog.c243294b.js.map